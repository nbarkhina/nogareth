parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"WmOQ":[function(require,module,exports) {
"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.InputController=exports.KeyMappings=exports.GamePadState=void 0;var i=function e(t,i){n(this,e),this.buttonDown=!1,this.buttonNum=-1,this.buttonTimer=0,this.keyName="",this.buttonNum=t,this.keyName=i};exports.GamePadState=i;var o=function e(){n(this,e),this.Mapping_Left=null,this.Mapping_Right=null,this.Mapping_Up=null,this.Mapping_Down=null,this.Mapping_Action_1=null,this.Mapping_Action_2=null,this.Mapping_Action_3=null,this.Mapping_Action_4=null,this.Mapping_Action_5=null,this.Mapping_Action_6=null,this.Mapping_Action_7=null,this.Mapping_Start=null,this.Mapping_Select=null};exports.KeyMappings=o;var a=function(){function e(t,i){n(this,e),this.gamepadButtons=[],this.Key_Up=!1,this.Key_Down=!1,this.Key_Left=!1,this.Key_Right=!1,this.Key_Action_1=!1,this.Key_Action_2=!1,this.Key_Action_3=!1,this.Key_Action_4=!1,this.Key_Action_5=!1,this.Key_Action_6=!1,this.Key_Action_7=!1,this.Key_Start=!1,this.Key_Select=!1,this.Gamepad_Process_Axis=!1,this.GamepadHorizontalAccess=0,this.GamepadVerticalAccess=0,this.Touch_Tap=!1,this.DebugKeycodes=!1,this.LastKey="",this.LastGameButton="",this.GamepadDetails="",this._last_key_press=null,this.KEY_PRESS=null,this.Mobile1=!1,this.Mobile2=!1,this.MobileStart=!1,this.MobileSelect=!1,this.touchX_Start=0,this.touchY_Start=0,this.touch_tap_counter=0,window.inputController=this,t&&(i&&(document.getElementById(i).addEventListener("touchstart",function(e){e.stopPropagation()},!1),document.getElementById(i).addEventListener("touchend",function(e){e.stopPropagation()},!1)),document.getElementById(t).addEventListener("touchstart",this.touchStart,!1),document.getElementById(t).addEventListener("touchend",this.touchEnd,!1),document.getElementById(t).addEventListener("touchmove",this.touchMove,!1),document.getElementById("mobile1").addEventListener("touchstart",this.mobilePressA.bind(this),!1),document.getElementById("mobile2").addEventListener("touchstart",this.mobilePressB.bind(this),!1),document.getElementById("mobileStart").addEventListener("touchstart",this.mobilePressStart.bind(this),!1),document.getElementById("mobileSelect").addEventListener("touchstart",this.mobilePressSelect.bind(this),!1),document.getElementById("mobile1").addEventListener("touchend",this.mobileReleaseA.bind(this),!1),document.getElementById("mobile2").addEventListener("touchend",this.mobileReleaseB.bind(this),!1),document.getElementById("mobileStart").addEventListener("touchend",this.mobileReleaseStart.bind(this),!1),document.getElementById("mobileSelect").addEventListener("touchend",this.mobileReleaseSelect.bind(this),!1),document.getElementById("mobile1").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("mobile2").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("mobileStart").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("mobileSelect").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("menuDiv").addEventListener("touchstart",this.canvasTouch.bind(this),!1)),this.KeyMappings={Mapping_Left:"ArrowLeft",Mapping_Right:"ArrowRight",Mapping_Up:"ArrowUp",Mapping_Down:"ArrowDown",Mapping_Action_1:"a",Mapping_Action_2:"s",Mapping_Action_3:"z",Mapping_Action_4:"x",Mapping_Action_5:"q",Mapping_Action_6:"w",Mapping_Action_7:"w",Mapping_Start:"p",Mapping_Select:"n"},document.onkeydown=this.keyDown,document.onkeyup=this.keyUp,console.log("InputController Initialized")}return t(e,[{key:"canvasTouch",value:function(e){e.touches[0].clientY<50&&$("#divMain").show(),$("#menuDiv").hide()}},{key:"mobilePressA",value:function(e){e.preventDefault(),this.Key_Action_1=!0,this.Mobile1=!0}},{key:"mobilePressB",value:function(e){e.preventDefault(),this.Key_Action_2=!0,this.Mobile2=!0}},{key:"mobilePressStart",value:function(e){e.preventDefault(),this.Key_Start=!0,this.MobileStart=!0}},{key:"mobilePressSelect",value:function(e){e.preventDefault(),this.Key_Select=!0,this.MobileSelect=!0}},{key:"mobileReleaseA",value:function(e){e.preventDefault(),this.Mobile1=!1,this.Key_Action_1=!1}},{key:"mobileReleaseB",value:function(e){e.preventDefault(),this.Mobile2=!1,this.Key_Action_2=!1}},{key:"mobileReleaseStart",value:function(e){e.preventDefault(),this.MobileStart=!1,this.Key_Start=!1}},{key:"mobileReleaseSelect",value:function(e){e.preventDefault(),this.MobileSelect=!1,this.Key_Start=!1}},{key:"setupGamePad",value:function(){window.addEventListener("gamepadconnected",this.initGamePad.bind(this)),this.gamepadButtons.push(new i(14,this.KeyMappings.Mapping_Left)),this.gamepadButtons.push(new i(15,this.KeyMappings.Mapping_Right)),this.gamepadButtons.push(new i(13,this.KeyMappings.Mapping_Down)),this.gamepadButtons.push(new i(12,this.KeyMappings.Mapping_Up)),this.gamepadButtons.push(new i(9,this.KeyMappings.Mapping_Start)),this.gamepadButtons.push(new i(8,this.KeyMappings.Mapping_Select))}},{key:"initGamePad",value:function(e){try{e.gamepad.buttons.length}catch(t){}console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",e.gamepad.index,e.gamepad.id,e.gamepad.buttons.length,e.gamepad.axes.length),window.inputController.GamepadDetails="Gamepad connected at index "+e.gamepad.index+" ID:"+e.gamepad.id+" Buttons: "+e.gamepad.buttons.length+" Axes: "+e.gamepad.axes.length}},{key:"processGamepad",value:function(){var e=this;try{var t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];if(!t)return;for(var n=null,i=0;i<t.length;i++)t[i]&&t[i].buttons.length>0&&(n=t[i]);if(n){for(var o=0;o<n.buttons.length;o++)n.buttons[o].pressed&&(this.DebugKeycodes&&console.log("Gamepad Button: "+o),this.LastGameButton=o.toString());if(this.gamepadButtons.forEach(function(t){n.buttons[t.buttonNum].pressed?(0==t.buttonTimer&&e.sendKeyDownEvent(t.keyName),t.buttonDown=!0,t.buttonTimer++):t.buttonDown&&(n.buttons[t.buttonNum].pressed||(t.buttonDown=!1,t.buttonTimer=0,e.sendKeyUpEvent(t.keyName)))}),this.Gamepad_Process_Axis)try{var a=n.axes[0],p=n.axes[1];this.GamepadHorizontalAccess=a,this.GamepadVerticalAccess=p,this.Key_Left=a<-.5,this.Key_Right=a>.5,this.Key_Down=p<-.5,this.Key_Up=p>.5}catch(s){}}}catch(u){}}},{key:"sendKeyDownEvent",value:function(e){var t=new KeyboardEvent("Gamepad Event Down",{key:e});this.keyDown(t)}},{key:"sendKeyUpEvent",value:function(e){var t=new KeyboardEvent("Gamepad Event Up",{key:e});this.keyUp(t)}},{key:"keyDown",value:function(e){var t=window.inputController;t.DebugKeycodes&&console.log(e),t.LastKey=e.key,"Left"==e.key&&"ArrowLeft"==t.KeyMappings.Mapping_Left&&(e=new KeyboardEvent("",{key:"ArrowLeft"})),"Right"==e.key&&"ArrowRight"==t.KeyMappings.Mapping_Right&&(e=new KeyboardEvent("",{key:"ArrowRight"})),"Up"==e.key&&"ArrowUp"==t.KeyMappings.Mapping_Up&&(e=new KeyboardEvent("",{key:"ArrowUp"})),"Down"==e.key&&"ArrowDown"==t.KeyMappings.Mapping_Down&&(e=new KeyboardEvent("",{key:"ArrowDown"})),e.key==t.KeyMappings.Mapping_Down&&(t.Key_Down=!0),e.key==t.KeyMappings.Mapping_Up&&(t.Key_Up=!0),e.key==t.KeyMappings.Mapping_Left&&(t.Key_Left=!0),e.key==t.KeyMappings.Mapping_Right&&(t.Key_Right=!0),e.key==t.KeyMappings.Mapping_Action_1&&(t.Key_Action_1=!0),e.key==t.KeyMappings.Mapping_Action_2&&(t.Key_Action_2=!0),e.key==t.KeyMappings.Mapping_Action_3&&(t.Key_Action_3=!0),e.key==t.KeyMappings.Mapping_Action_4&&(t.Key_Action_4=!0),e.key==t.KeyMappings.Mapping_Action_5&&(t.Key_Action_5=!0),e.key==t.KeyMappings.Mapping_Action_6&&(t.Key_Action_6=!0),e.key==t.KeyMappings.Mapping_Action_7&&(t.Key_Action_7=!0),e.key==t.KeyMappings.Mapping_Start&&(t.Key_Start=!0),e.key==t.KeyMappings.Mapping_Select&&(t.Key_Select=!0)}},{key:"keyUp",value:function(e){var t=window.inputController;"Left"==e.key&&"ArrowLeft"==t.KeyMappings.Mapping_Left&&(e=new KeyboardEvent("",{key:"ArrowLeft"})),"Right"==e.key&&"ArrowRight"==t.KeyMappings.Mapping_Right&&(e=new KeyboardEvent("",{key:"ArrowRight"})),"Up"==e.key&&"ArrowUp"==t.KeyMappings.Mapping_Up&&(e=new KeyboardEvent("",{key:"ArrowUp"})),"Down"==e.key&&"ArrowDown"==t.KeyMappings.Mapping_Down&&(e=new KeyboardEvent("",{key:"ArrowDown"})),e.key==t.KeyMappings.Mapping_Down&&(t.Key_Down=!1),e.key==t.KeyMappings.Mapping_Up&&(t.Key_Up=!1),e.key==t.KeyMappings.Mapping_Left&&(t.Key_Left=!1),e.key==t.KeyMappings.Mapping_Right&&(t.Key_Right=!1),e.key==t.KeyMappings.Mapping_Action_1&&(t.Key_Action_1=!1),e.key==t.KeyMappings.Mapping_Action_2&&(t.Key_Action_2=!1),e.key==t.KeyMappings.Mapping_Action_3&&(t.Key_Action_3=!1),e.key==t.KeyMappings.Mapping_Action_4&&(t.Key_Action_4=!1),e.key==t.KeyMappings.Mapping_Action_5&&(t.Key_Action_5=!1),e.key==t.KeyMappings.Mapping_Action_6&&(t.Key_Action_6=!1),e.key==t.KeyMappings.Mapping_Action_7&&(t.Key_Action_7=!1),e.key==t.KeyMappings.Mapping_Start&&(t.Key_Start=!1),e.key==t.KeyMappings.Mapping_Select&&(t.Key_Select=!1),t._last_key_press=e.key}},{key:"prevent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"touchStart",value:function(e){e.preventDefault();var t=window.inputController;t.touchX_Start=e.touches[0].clientX,t.touchY_Start=e.touches[0].clientY}},{key:"touchMove",value:function(e){e.preventDefault();var t=window.inputController,n=e.touches[0].clientX-t.touchX_Start,i=e.touches[0].clientY-t.touchY_Start;n>10&&(t.Key_Right=!0),n<-10&&(t.Key_Left=!0),i>10&&(t.Key_Down=!0),i<-10&&(t.Key_Up=!0)}},{key:"touchEnd",value:function(e){e.preventDefault(),e.stopPropagation();var t=window.inputController;0==t.Key_Left&&0==t.Key_Right&&0==t.Key_Down&&0==t.Key_Up&&(t.Touch_Tap=!0),t.Key_Left=!1,t.Key_Right=!1,t.Key_Up=!1,t.Key_Down=!1}},{key:"mouseUp",value:function(e){e.preventDefault()}},{key:"mouseDown",value:function(e){e.preventDefault()}},{key:"mouseMove",value:function(e){e.preventDefault()}},{key:"update",value:function(){this.processGamepad(),this.Touch_Tap&&this.touch_tap_counter++,this.touch_tap_counter>1&&(this.Touch_Tap=!1,this.touch_tap_counter=0),this.KEY_PRESS&&(this.KEY_PRESS=null),this._last_key_press&&(this.KEY_PRESS=this._last_key_press,this._last_key_press=null)}},{key:"loop",value:function(){this.update(),window.requestAnimationFrame(this.loop.bind(this))}}]),e}();exports.InputController=a;
},{}],"UKm1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BOBAPI=exports.BOB=void 0;var e=require("./data");function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}var i=function(){function e(n,r){t(this,e),this.x=0,this.y=0,this.curr_frame=0,this.frames={},this.width=n,this.height=r}return r(e,[{key:"getCurrentFrameData",value:function(){return this.getFrameData(this.curr_frame)}},{key:"getFrameData",value:function(e){return this.frames[e]}}]),e}();exports.BOB=i;var o=function e(n,r,i,o,a){t(this,e),this.image=n,this.top=i,this.left=r,this.width=o,this.height=a},a=function(){function n(){t(this,n)}return r(n,null,[{key:"Draw_BOB16",value:function(t){var n=t.getCurrentFrameData();t.x>e.CONSTANTS.ScreenWidth||t.x+t.width<0||t.y>e.CONSTANTS.ScreenHeight||t.y+t.height<0||e.CANVAS.drawImage(n.image,n.left,n.top,n.width,n.height,t.x,t.y,t.width,t.height)}},{key:"Load_Frame_BOB16",value:function(e,t,n,r,i){var a,u;!(arguments.length>5&&void 0!==arguments[5])||arguments[5]?(a=r*(e.width+1)+1,u=i*(e.height+1)+1):(a=r,u=i),e.frames[n]=new o(t,a,u,e.width,e.height)}},{key:"Create_BOB",value:function(e,t,n,r,o){var a=new i(n,r);return a.x=e,a.y=t,a.numFrames=o,a}},{key:"Draw_Line16",value:function(t,n,r,i,o){var a=e.CANVAS;a.strokeStyle=o,a.beginPath(),a.moveTo(t,n),a.lineTo(r,i),a.stroke()}},{key:"Draw_Pixel16",value:function(t,n,r){var i=e.CANVAS;i.fillStyle=r,i.fillRect(t,n,1,1)}},{key:"DSound_Play",value:function(e){n.PlaySoundFromBuffer(e)}},{key:"DrawText",value:function(t,n,r,i,o,a){var u=t.split(" "),f="",l=e.CANVAS;l.fillStyle=a,l.font="16px Verdana,Arial";for(var s=0;s<u.length;s++){var d=u[s];if("<break>"!=d)if(d.startsWith("**")){for(;s<u.length&&(f=f+(d=u[s])+" ",!d.endsWith("**"));s++);var h=f+d+" ",c=0;i-(w=l.measureText(h).width)>=0&&(c=i-w),l.fillText(f,n+c,r),f=""}else{var w;h=f+d+" ";(w=l.measureText(h).width)>i&&s>0?(l.fillText(f,n,r),f=u[s]+" ",r+=o):f=h}else l.fillText(f,n,r),r+=o,f=""}l.fillText(f,n,r)}},{key:"DMusic_Play",value:function(t){window.player&&window.player.stop();new Tone.Buffer(e.MUSIC_FILES[t],function(e){Tone.context.resume(),window.player&&window.player.stop(),window.player=new Tone.Player(e),window.player.toMaster(),window.player.loop=!0,window.player.start()})}},{key:"DMusic_Stop",value:function(){window.player&&window.player.stop()}},{key:"RGB",value:function(e,t,n){var r=function(e){return e>=16?e.toString(16):"0"+e.toString()};return"#"+r(e)+r(t)+r(n)}},{key:"LoadAllSounds",value:function(){var t;try{t=new AudioContext}catch(r){try{t=new window.webkitAudioContext,console.log("found mobile audio")}catch(i){console.log("could not initialize audio")}}n.audioContext=t,t.resume(),e.SOUND_FILES.forEach(function(r){fetch(r).then(function(e){return e.arrayBuffer()}).then(function(e){return t.decodeAudioData(e)}).then(function(t){for(var i=0,o=0;o<e.SOUND_FILES.length;o++)e.SOUND_FILES[o]==r&&(i=o);var a={id:i,buffer:t};n.soundBuffers.push(a),n.soundBuffers.length==e.SOUND_FILES.length&&(console.log("Finished Loading Sounds"),window.myApp.finishedLoading())})})}},{key:"PlaySoundFromBuffer",value:function(e){try{var t=n.audioContext;t.resume();for(var r=n.soundBuffers[0],i=0;i<n.soundBuffers.length;i++)n.soundBuffers[i].id==e&&(r=n.soundBuffers[i]);var o=t.createBufferSource();o.buffer=r.buffer,o.connect(t.destination),o.start()}catch(a){}}}]),n}();exports.BOBAPI=a,a.musicPlayer=document.createElement("audio"),a.soundBuffers=[];
},{"./data":"aZjg"}],"aZjg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setCanvas=u,exports.setPlayer=L,exports.setGame=l,exports.setInputController=I,exports.GetRandom=p,exports.SOUND_FILES=exports.MUSIC_FILES=exports.INPUTCONTROLLER=exports.GAME=exports.PLAYER=exports.CANVAS=exports.ALL_BOBS=exports.DATA=exports.CONSTANTS=void 0;var e=require("./bob"),a=function(e,a,B,r){return new(B||(B=Promise))(function(t,o){function O(e){try{_(r.next(e))}catch(a){o(a)}}function m(e){try{_(r.throw(e))}catch(a){o(a)}}function _(e){e.done?t(e.value):new B(function(a){a(e.value)}).then(O,m)}_((r=r.apply(e,a||[])).next())})};function B(){return a(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("data/levels/mikeslevel.txt");case 2:return _.levels.MikeLevel=e.sent,e.next=5,O("data/levels/juanlevel.txt");case 5:return _.levels.Juanlevel=e.sent,e.next=8,O("data/levels/neallevel.txt");case 8:_.levels.NeilLevel=e.sent;case 9:case"end":return e.stop()}},e)}))}function r(){return{images:{Gareth:o("data/images/Gareth copy.png"),GreyZombie:o("data/images/greyZombie.png"),RedZombie:o("data/images/redZombie.png"),Sluggo:o("data/images/Slugo.png"),Objects:o("data/images/objects.png"),MikeTileSet:o("data/images/mikeTileTemplate.bmp"),NeilTileSet:o("data/images/nealTileTemplate.bmp"),JuanTileSet:o("data/images/juanTileTemplate.bmp"),KeysOverlay:o("data/images/Keys.bmp"),LifeOverlay:o("data/images/Life.bmp"),DarknessOverlay:o("data/images/darkness.png"),IntroMenu:o("data/images/introMenu.bmp"),PauseScreen:o("data/images/pauseScreen.bmp"),GameOver:o("data/images/gameOver.bmp"),About:o("data/images/about.bmp"),Help:o("data/images/help.bmp"),Win:o("data/images/win.bmp")},levels:{MikeLevel:"",Juanlevel:"",NeilLevel:""},sounds:{},LoadAsync:B}}function t(){return{Gareth:v(),RedZombie:f(),GreyZombie:E(),Sluggo:x(),MikeLevelTileSet:b(_.images.MikeTileSet),NeilLevelTileSet:b(_.images.NeilTileSet),JuanLevelTileSet:b(_.images.JuanTileSet),ObjectSet:y(),GameScreens:T(),KeyOverlay:S(),LifeOverlay:c(),DarknessOverlay:g()}}function o(e){var a=new Image;return a.src=e,a}function O(e){return a(this,void 0,void 0,regeneratorRuntime.mark(function a(){var B;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(e);case 2:return B=a.sent,a.next=5,B.text();case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}},a)}))}var m={TemplateHeight:35,TemplateWidth:4,NumFrames:140,NumObjects:15,StartX:520,StartY:1040,TileHeight:40,TileWidth:40,ScreenWidth:640,ScreenHeight:480,TileType:{Wall:0,Floor:1,Hole:2,Spike:3},TileState:{Off:0,On:1,Up:2,Down:3},ScriptInstrType:{SetState:0,SetStateTemp:1,LoadLevel:2,PlaySound:3,PlayMusic:4,Teleport:5,TextBox:6,ToggleState:7,WinGame:8,RestoreHealth:9,Lights:10,Jump:11,JumpIfEqual:12,JumpIfNotEqual:13},EnemyType:{GreyZombie:0,RedZombie:1,Manic:2,Sluggo:3},AiMode:{Sleep:0,DumbWalk:1,SeekPlayer:2},ThingState:{NORMAL:0,FALLING:1},GameType:{PLAYER:0,TILE:1,ENEMY:2,OBJECT:3},ObjectType:{REDDOOR:0,GREENDOOR:1,BLUEDOOR:2,REDKEY:3,GREENKEY:4,BLUEKEY:5,KNIFE:6},GameState:{GAME_INTRO:0,GAME_RUNNING:1,GAME_OVER:2,GAME_TEXT_BOX:3,GAME_PAUSED:4,GAME_HELP:5,GAME_ABOUT:6,GAME_WIN:7,GAME_LOADING_LEVEL:8}};exports.CONSTANTS=m;var _=r();exports.DATA=_;var n=t();exports.ALL_BOBS=n;var s=null;exports.CANVAS=s;var i=null;exports.PLAYER=i;var d=null;exports.GAME=d;var A=null;function u(e){exports.CANVAS=s=e}function L(e){exports.PLAYER=i=e}function l(e){exports.GAME=d=e}function I(e){exports.INPUTCONTROLLER=A=e}exports.INPUTCONTROLLER=A;var P=["data/music/WinCredits.mp3","data/music/WinCredits.mp3","data/music/WinCredits.mp3","data/music/ItFollows.mp3","data/music/Ominous.mp3","data/music/WhereAmI.mp3","data/music/WinCredits.mp3"];exports.MUSIC_FILES=P;var F=["data/sounds/laugh.wav","data/sounds/Bounced.wav","data/sounds/Footsteps.wav","data/sounds/messagebox.wav","data/sounds/falling.wav","data/sounds/ZombieSound.wav","data/sounds/Door Big Close.wav","data/sounds/Breaker Switch 1.wav","data/sounds/evillaugh.wav","data/sounds/ZombieFalling.wav","data/sounds/ZombieLostThePlayer.wav","data/sounds/keys.wav"];function p(e){return Math.floor(Math.random()*e)}function v(){var a=e.BOBAPI.Create_BOB(0,0,26,40,15),B=_.images.Gareth;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0),e.BOBAPI.Load_Frame_BOB16(a,B,1,1,0),e.BOBAPI.Load_Frame_BOB16(a,B,2,2,0),e.BOBAPI.Load_Frame_BOB16(a,B,3,0,1),e.BOBAPI.Load_Frame_BOB16(a,B,4,1,1),e.BOBAPI.Load_Frame_BOB16(a,B,5,2,1),e.BOBAPI.Load_Frame_BOB16(a,B,6,0,2),e.BOBAPI.Load_Frame_BOB16(a,B,7,1,2),e.BOBAPI.Load_Frame_BOB16(a,B,8,2,2),e.BOBAPI.Load_Frame_BOB16(a,B,9,0,3),e.BOBAPI.Load_Frame_BOB16(a,B,10,1,3),e.BOBAPI.Load_Frame_BOB16(a,B,11,2,3),e.BOBAPI.Load_Frame_BOB16(a,B,12,0,4),e.BOBAPI.Load_Frame_BOB16(a,B,13,1,4),e.BOBAPI.Load_Frame_BOB16(a,B,14,2,4),a}function c(){var a=e.BOBAPI.Create_BOB(0,0,176,28,1),B=_.images.LifeOverlay;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0,!1),a}function g(){var a=e.BOBAPI.Create_BOB(0,0,640,480,1),B=_.images.DarknessOverlay;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0,!1),a}function S(){var a=e.BOBAPI.Create_BOB(0,0,100,28,1),B=_.images.KeysOverlay;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0,!1),a}function T(){var a=e.BOBAPI.Create_BOB(0,0,640,480,6);return e.BOBAPI.Load_Frame_BOB16(a,_.images.IntroMenu,0,0,0,!1),e.BOBAPI.Load_Frame_BOB16(a,_.images.PauseScreen,1,0,0,!1),e.BOBAPI.Load_Frame_BOB16(a,_.images.GameOver,2,0,0,!1),e.BOBAPI.Load_Frame_BOB16(a,_.images.About,3,0,0,!1),e.BOBAPI.Load_Frame_BOB16(a,_.images.Help,4,0,0,!1),e.BOBAPI.Load_Frame_BOB16(a,_.images.Win,5,0,0,!1),a}function E(){var a=e.BOBAPI.Create_BOB(0,0,30,40,15),B=_.images.GreyZombie;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0),e.BOBAPI.Load_Frame_BOB16(a,B,1,1,0),e.BOBAPI.Load_Frame_BOB16(a,B,2,2,0),e.BOBAPI.Load_Frame_BOB16(a,B,3,0,1),e.BOBAPI.Load_Frame_BOB16(a,B,4,1,1),e.BOBAPI.Load_Frame_BOB16(a,B,5,2,1),e.BOBAPI.Load_Frame_BOB16(a,B,6,0,2),e.BOBAPI.Load_Frame_BOB16(a,B,7,1,2),e.BOBAPI.Load_Frame_BOB16(a,B,8,2,2),e.BOBAPI.Load_Frame_BOB16(a,B,9,0,3),e.BOBAPI.Load_Frame_BOB16(a,B,10,1,3),e.BOBAPI.Load_Frame_BOB16(a,B,11,2,3),e.BOBAPI.Load_Frame_BOB16(a,B,12,0,4),e.BOBAPI.Load_Frame_BOB16(a,B,13,1,4),e.BOBAPI.Load_Frame_BOB16(a,B,14,2,4),a}function f(){var a=e.BOBAPI.Create_BOB(0,0,30,40,15),B=_.images.RedZombie;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0),e.BOBAPI.Load_Frame_BOB16(a,B,1,1,0),e.BOBAPI.Load_Frame_BOB16(a,B,2,2,0),e.BOBAPI.Load_Frame_BOB16(a,B,3,0,1),e.BOBAPI.Load_Frame_BOB16(a,B,4,1,1),e.BOBAPI.Load_Frame_BOB16(a,B,5,2,1),e.BOBAPI.Load_Frame_BOB16(a,B,6,0,2),e.BOBAPI.Load_Frame_BOB16(a,B,7,1,2),e.BOBAPI.Load_Frame_BOB16(a,B,8,2,2),e.BOBAPI.Load_Frame_BOB16(a,B,9,0,3),e.BOBAPI.Load_Frame_BOB16(a,B,10,1,3),e.BOBAPI.Load_Frame_BOB16(a,B,11,2,3),e.BOBAPI.Load_Frame_BOB16(a,B,12,0,4),e.BOBAPI.Load_Frame_BOB16(a,B,13,1,4),e.BOBAPI.Load_Frame_BOB16(a,B,14,2,4),a}function x(){var a=e.BOBAPI.Create_BOB(0,0,28,40,12),B=_.images.Sluggo;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0),e.BOBAPI.Load_Frame_BOB16(a,B,1,1,0),e.BOBAPI.Load_Frame_BOB16(a,B,2,2,0),e.BOBAPI.Load_Frame_BOB16(a,B,3,0,1),e.BOBAPI.Load_Frame_BOB16(a,B,4,1,1),e.BOBAPI.Load_Frame_BOB16(a,B,5,2,1),e.BOBAPI.Load_Frame_BOB16(a,B,6,0,2),e.BOBAPI.Load_Frame_BOB16(a,B,7,1,2),e.BOBAPI.Load_Frame_BOB16(a,B,8,2,2),e.BOBAPI.Load_Frame_BOB16(a,B,9,0,3),e.BOBAPI.Load_Frame_BOB16(a,B,10,1,3),e.BOBAPI.Load_Frame_BOB16(a,B,11,2,3),a}function b(a){for(var B=e.BOBAPI.Create_BOB(0,0,40,40,m.NumFrames),r=0,t=0;t<m.TemplateHeight;t++)for(var o=0;o<m.TemplateWidth;o++)e.BOBAPI.Load_Frame_BOB16(B,a,r,o,t),r++;return B}function y(){var a=e.BOBAPI.Create_BOB(0,0,40,40,15),B=_.images.Objects;return e.BOBAPI.Load_Frame_BOB16(a,B,0,0,0),e.BOBAPI.Load_Frame_BOB16(a,B,1,1,0),e.BOBAPI.Load_Frame_BOB16(a,B,2,2,0),e.BOBAPI.Load_Frame_BOB16(a,B,3,0,1),e.BOBAPI.Load_Frame_BOB16(a,B,4,1,1),e.BOBAPI.Load_Frame_BOB16(a,B,5,2,1),e.BOBAPI.Load_Frame_BOB16(a,B,6,3,1),e.BOBAPI.Load_Frame_BOB16(a,B,7,0,2),e.BOBAPI.Load_Frame_BOB16(a,B,8,1,2),e.BOBAPI.Load_Frame_BOB16(a,B,9,2,2),e.BOBAPI.Load_Frame_BOB16(a,B,10,3,2),e.BOBAPI.Load_Frame_BOB16(a,B,11,0,3),e.BOBAPI.Load_Frame_BOB16(a,B,12,1,3),e.BOBAPI.Load_Frame_BOB16(a,B,13,2,3),e.BOBAPI.Load_Frame_BOB16(a,B,14,3,3),a}exports.SOUND_FILES=F;
},{"./bob":"UKm1"}],"piRQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Thing=void 0;var t=require("./bob"),i=require("./data");function h(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function e(t,i){for(var h=0;h<i.length;h++){var e=i[h];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function s(t,i,h){return i&&e(t.prototype,i),h&&e(t,h),t}var n=function(){function e(t,s,n,a){h(this,e),this.health=100,this.alive=!0,this.angle=180,this.speed=0,this.vx=0,this.vy=0,this.alpha=100,this.currentRoom=0,this.animationCounter=0,this.animationFlipper=0,this.animationSpeed=0,this.startTime=0,this.velocity=0,this.currentFrame=0,this.movingX=!1,this.movingY=!1,this.height=40,this.width=40,this.state=i.CONSTANTS.ThingState.NORMAL,this.x=t,this.y=s,this.bob=n,this.currentLevel=a}return s(e,[{key:"draw",value:function(){}},{key:"getComponents",value:function(){this.vx=this.velocity*Math.sin(3.14159*this.angle/180),this.vy=-this.velocity*Math.cos(3.14159*this.angle/180)}},{key:"checkCollision",value:function(t){if(this.state==i.CONSTANTS.ThingState.FALLING||t.state==i.CONSTANTS.ThingState.FALLING)return 0;var h,e,s=0;return h=this.x+this.width-1,e=this.y,t.x<=h&&h<=t.x+t.width-1&&t.y<=e&&e<=t.y+t.height-1&&s++,h=this.x,e=this.y,t.x<=h&&h<=t.x+t.width-1&&t.y<=e&&e<=t.y+t.height-1&&s++,h=this.x+this.width-1,e=this.y+this.height-1,t.x<=h&&h<=t.x+t.width-1&&t.y<=e&&e<=t.y+t.height-1&&s++,h=this.x,e=this.y+this.height-1,t.x<=h&&h<=t.x+t.width-1&&t.y<=e&&e<=t.y+t.height-1&&s++,s>0?s:(h=t.x+t.width-1,e=t.y,this.x<=h&&h<=this.x+this.width-1&&this.y<=e&&e<=this.y+this.height-1&&s++,h=t.x,e=t.y,this.x<=h&&h<=this.x+this.width-1&&this.y<=e&&e<=this.y+this.height-1&&s++,h=t.x+t.width-1,e=t.y+t.height-1,this.x<=h&&h<=this.x+this.width-1&&this.y<=e&&e<=this.y+this.height-1&&s++,h=t.x,e=t.y+t.height-1,this.x<=h&&h<=this.x+this.width-1&&this.y<=e&&e<=this.y+this.height-1&&s++,s)}},{key:"defaultDraw",value:function(){this.bob.x=this.bob.x+(320-this.currentLevel.player.x),this.bob.y=this.bob.y+(240-this.currentLevel.player.y),t.BOBAPI.Draw_BOB16(this.bob)}},{key:"processAnimation",value:function(){}},{key:"handleCollision",value:function(t){}},{key:"moveToEdgeX",value:function(t,i){t.x<i.x?t.x=i.x-t.width:t.x=i.x+i.width}},{key:"moveToEdgeY",value:function(t,i){t.y<i.y?t.y=i.y-t.height:t.y=i.y+i.height}},{key:"round",value:function(t){return Math.round(t)}},{key:"hurt",value:function(t){this.health-=t,this.health<=0&&(this.alive=!1)}},{key:"getAngle",value:function(t,i){var h=this.x,e=this.y;return h<t&&e>i&&(this.angle=45),h<t&&e<i&&(this.angle=135),h>t&&e<i&&(this.angle=225),h>t&&e>i&&(this.angle=315),Math.abs(h-t)<=5&&e<i&&(this.angle=180),Math.abs(h-t)<=5&&e>i&&(this.angle=0),Math.abs(e-i)<=5&&h<t&&(this.angle=90),Math.abs(e-i)<=5&&h>t&&(this.angle=270),this.alpha=this.angle,this.angle}},{key:"update",value:function(){}},{key:"defaultMove",value:function(){}},{key:"save",value:function(t){}},{key:"load",value:function(t){}},{key:"drop",value:function(){}},{key:"getRoom",value:function(){}}]),e}();exports.Thing=n;
},{"./bob":"UKm1","./data":"aZjg"}],"xLgV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.jump_if_not_equal_instr=exports.jump_if_equal_instr=exports.jump_instr=exports.lights_instr=exports.restore_health_instr=exports.win_game_instr=exports.toggle_state_instr=exports.text_box_instr=exports.teleport_instr=exports.play_music_instr=exports.play_sound_instr=exports.load_level_instr=exports.set_state_temp_instr=exports.set_state_instr=exports.instr=exports.Tile=void 0;var t=require("./bob"),e=require("./thing"),i=require("./data");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=T();return function(){var i,r=h(t);if(e){var s=h(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return u(this,i)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var y=function(r){l(o,e.Thing);var n=p(o);function o(t,e,r,a,l){var p;return s(this,o),(p=n.call(this,t,e,a,l)).tileID=r,p.type_id=i.CONSTANTS.GameType.TILE,p.height=i.CONSTANTS.TileHeight,p.width=i.CONSTANTS.TileWidth,p.tileID<104&&(p.tileType=i.CONSTANTS.TileType.Wall),p.tileID>=104&&p.tileID<132&&(p.tileType=i.CONSTANTS.TileType.Floor),(p.tileID>=132&&p.tileID<136||138==p.tileID)&&(p.tileType=i.CONSTANTS.TileType.Hole),137==p.tileID&&(p.tileType=i.CONSTANTS.TileType.Spike,p.state=i.CONSTANTS.TileState.Up),136==p.tileID&&(p.tileType=i.CONSTANTS.TileType.Spike),p.state=i.CONSTANTS.TileState.Down,p.scriptLoaded=!1,p.scriptNeedsReset=!1,p.script=[],p}return a(o,[{key:"draw",value:function(){this.processAnimation(),this.defaultDraw()}},{key:"processAnimation",value:function(){this.currentFrame=this.tileID,this.bob.curr_frame=this.currentFrame,this.bob.x=this.x,this.bob.y=this.y}},{key:"handleCollision",value:function(t){t.type_id==i.CONSTANTS.GameType.PLAYER&&1==this.scriptLoaded&&0==this.scriptNeedsReset&&this.processScript(t),this.scriptNeedsReset||this.defaultHandleCollision(t)}},{key:"defaultHandleCollision",value:function(e){if(e.type_id==i.CONSTANTS.GameType.PLAYER||e.type_id==i.CONSTANTS.GameType.ENEMY)if(this.tileType==i.CONSTANTS.TileType.Wall)e.movingX?this.moveToEdgeX(e,this):this.moveToEdgeY(e,this);else if(this.tileType==i.CONSTANTS.TileType.Hole){if(this.currentLevel.getTileObject(e.x,e.y).tileType==i.CONSTANTS.TileType.Hole&&this.currentLevel.getTileObject(e.x+e.width-1,e.y).tileType==i.CONSTANTS.TileType.Hole&&this.currentLevel.getTileObject(e.x+e.width-1,e.y+e.height-1).tileType==i.CONSTANTS.TileType.Hole&&this.currentLevel.getTileObject(e.x,e.y+e.height-1).tileType==i.CONSTANTS.TileType.Hole)if(e.state=i.CONSTANTS.ThingState.FALLING,e.animationCounter=0,e.type_id==i.CONSTANTS.GameType.PLAYER&&t.BOBAPI.DSound_Play(4),e.type_id==i.CONSTANTS.GameType.ENEMY)e.enemyID==i.CONSTANTS.EnemyType.GreyZombie&&this.getDistance(e)<350&&t.BOBAPI.DSound_Play(9)}else this.tileType==i.CONSTANTS.TileType.Spike&&this.state==i.CONSTANTS.TileState.Up&&e.hurt(1)}},{key:"updateState",value:function(){this.tileType==i.CONSTANTS.TileType.Spike?this.stateChanged&&(this.state==i.CONSTANTS.TileState.On?(this.toggleTime=150,this.stateChangeTimer=this.toggleTime,this.state=i.CONSTANTS.TileState.Up,this.nextState=i.CONSTANTS.TileState.Down):this.state==i.CONSTANTS.TileState.Up?this.tileID=137:this.state==i.CONSTANTS.TileState.Down&&(this.tileID=136),this.stateChanged=!1):this.tileID>=96&&this.tileID<100?this.stateChanged&&this.state==i.CONSTANTS.TileState.Off&&(t.BOBAPI.DSound_Play(7),this.tileID+=4,this.stateChanged=!1,this.tileType=i.CONSTANTS.TileType.Wall):this.tileID>=100&&this.tileID<104&&this.stateChanged&&this.state==i.CONSTANTS.TileState.On&&(t.BOBAPI.DSound_Play(7),this.tileID-=4,this.stateChanged=!1,this.tileType=i.CONSTANTS.TileType.Wall)}},{key:"update",value:function(){if(this.stateChangeTimer>=0&&(this.stateChangeTimer--,-1==this.stateChangeTimer))if(this.toggleTime>0){this.stateChangeTimer=this.toggleTime;var t=this.nextState;this.nextState=this.state,this.state=t,this.stateChanged=!0}else this.state=this.nextState,this.stateChanged=!0;1==this.scriptNeedsReset&&0==this.checkCollision(this.currentLevel.player)&&(this.scriptNeedsReset=!1),this.updateState()}},{key:"processScript",value:function(e){this.scriptNeedsReset=!0;for(var r=0;r<this.numInstructions;r++){var s=this.script[r];switch(s.id){case i.CONSTANTS.ScriptInstrType.SetState:var n=s;this.currentLevel.tileObjects[n.x][n.y].state=n.newState,this.currentLevel.tileObjects[n.x][n.y].nextState=n.newState,this.currentLevel.tileObjects[n.x][n.y].stateChangeTimer=-1,this.currentLevel.tileObjects[n.x][n.y].toggleTime=-1,this.currentLevel.tileObjects[n.x][n.y].stateChanged=!0,this.currentLevel.tileObjects[n.x][n.y].updateState();break;case i.CONSTANTS.ScriptInstrType.SetStateTemp:var a=s;this.currentLevel.tileObjects[a.x][a.y].state=a.newState1,this.currentLevel.tileObjects[a.x][a.y].nextState=a.newState2,this.currentLevel.tileObjects[a.x][a.y].stateChangeTimer=a.time,this.currentLevel.tileObjects[a.x][a.y].toggleTime=-1,this.currentLevel.tileObjects[a.x][a.y].stateChanged=!0,this.currentLevel.tileObjects[a.x][a.y].updateState();break;case i.CONSTANTS.ScriptInstrType.ToggleState:var l=s;this.currentLevel.tileObjects[l.x][l.y].state=l.newState1,this.currentLevel.tileObjects[l.x][l.y].nextState=l.newState2,l.delay>0?this.currentLevel.tileObjects[l.x][l.y].stateChangeTimer=l.delay:this.currentLevel.tileObjects[l.x][l.y].stateChangeTimer=l.time,this.currentLevel.tileObjects[l.x][l.y].toggleTime=l.time,this.currentLevel.tileObjects[l.x][l.y].stateChanged=!0,this.currentLevel.tileObjects[l.x][l.y].updateState();break;case i.CONSTANTS.ScriptInstrType.LoadLevel:var o=s;i.GAME.load_level(o.filename);break;case i.CONSTANTS.ScriptInstrType.PlaySound:var p=s;t.BOBAPI.DSound_Play(p.sound_id);break;case i.CONSTANTS.ScriptInstrType.PlayMusic:var u=s;t.BOBAPI.DMusic_Play(u.music_id),this.currentLevel.songID=u.music_id;break;case i.CONSTANTS.ScriptInstrType.Teleport:var c=s;this.currentLevel.player.x=40*c.tile_x,this.currentLevel.player.y=40*c.tile_y;break;case i.CONSTANTS.ScriptInstrType.TextBox:var T=s;i.GAME.show_text_box(T.text);break;case i.CONSTANTS.ScriptInstrType.Lights:var h=s;i.GAME.set_lights(h.on_or_off);break;case i.CONSTANTS.ScriptInstrType.WinGame:i.GAME.game_win_game();break;case i.CONSTANTS.ScriptInstrType.RestoreHealth:this.currentLevel.player.health=100;break;case i.CONSTANTS.ScriptInstrType.Jump:(r+=s.howFar)<0&&(r=0);break;case i.CONSTANTS.ScriptInstrType.JumpIfEqual:var y=s;this.currentLevel.tileObjects[y.x][y.y].state==y.state&&(r+=y.howFar)<0&&(r=0);break;case i.CONSTANTS.ScriptInstrType.JumpIfNotEqual:var S=s;this.currentLevel.tileObjects[S.x][S.y].state!=S.state&&(r+=S.howFar)<0&&(r=0)}}}},{key:"getDistance",value:function(t){return Math.sqrt(Math.pow(this.currentLevel.player.x-t.x,2)+Math.pow(this.currentLevel.player.y-t.y,2))}}]),o}();exports.Tile=y;var S=function t(){s(this,t)};exports.instr=S;var f=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.set_state_instr=f;var N=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.set_state_temp_instr=N;var v=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.load_level_instr=v;var O=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.play_sound_instr=O;var _=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.play_music_instr=_;var x=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.teleport_instr=x;var d=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.text_box_instr=d;var C=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.toggle_state_instr=C;var b=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.win_game_instr=b;var g=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.restore_health_instr=g;var m=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.lights_instr=m;var A=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.jump_instr=A;var I=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.jump_if_equal_instr=I;var L=function(t){l(i,S);var e=p(i);function i(){return s(this,i),e.apply(this,arguments)}return i}();exports.jump_if_not_equal_instr=L;
},{"./bob":"UKm1","./thing":"piRQ","./data":"aZjg"}],"F5Xm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GameObject=void 0;var e=require("./bob"),t=require("./thing"),i=require("./data");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var i=0;i<t.length;i++){var h=t[i];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(e,h.key,h)}}function n(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=b();return function(){var i,h=a(e);if(t){var o=a(this).constructor;i=Reflect.construct(h,arguments,o)}else i=h.apply(this,arguments);return u(this,i)}}function u(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(h){r(c,t.Thing);var s=l(c);function c(e,t,h,n,r){var l;return o(this,c),(l=s.call(this,e,t,n,r)).type_id=i.CONSTANTS.GameType.OBJECT,l.objectID=h,0<=l.objectID&&l.objectID<=2&&(l.currentFrame=h,0==l.objectID&&(l.objectType=i.CONSTANTS.ObjectType.REDKEY),1==l.objectID&&(l.objectType=i.CONSTANTS.ObjectType.BLUEKEY),2==l.objectID&&(l.objectType=i.CONSTANTS.ObjectType.GREENKEY),l.height=15,l.width=7,l.speed=0,l.x=l.x+18,l.y=l.y+14),3<=l.objectID&&l.objectID<=6&&(l.currentFrame=h,l.objectType=i.CONSTANTS.ObjectType.GREENDOOR,l.height=40,l.width=40),7<=l.objectID&&l.objectID<=10&&(l.currentFrame=h,l.objectType=i.CONSTANTS.ObjectType.BLUEDOOR,l.height=40,l.width=40),11<=l.objectID&&l.objectID<=14&&(l.currentFrame=h,l.objectType=i.CONSTANTS.ObjectType.REDDOOR,l.height=40,l.width=40),l}return n(c,[{key:"draw",value:function(){this.processAnimation(),this.defaultDraw()}},{key:"update",value:function(){this.vx=0,this.vy=0,this.velocity=this.speed,this.getComponents()}},{key:"move",value:function(){this.x=this.x+this.vx,this.movingX=!0,this.movingX=!1,this.y=this.y+this.vy,this.movingY=!0,this.movingY=!1}},{key:"processAnimation",value:function(){0<=this.objectID&&this.objectID<=2&&(this.currentFrame=this.objectID,this.bob.x=this.x-18,this.bob.y=this.y-14),3<=this.objectID&&this.objectID<=14&&(this.currentFrame=this.objectID,this.bob.x=this.x,this.bob.y=this.y),this.bob.curr_frame=this.currentFrame}},{key:"checkCorners",value:function(e){this.x<=0||this.y<=0||this.x+this.width-1>=40*this.currentLevel.width||this.y+this.height-1>=40*this.currentLevel.height||e==i.CONSTANTS.GameType.TILE&&(this.checkCollision(this.currentLevel.getTileObject(this.x,this.y))>0&&(this.currentLevel.getTileObject(this.x,this.y).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x,this.y))),this.checkCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y))>0&&(this.currentLevel.getTileObject(this.x+this.width-1,this.y).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y))),this.checkCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1))>0&&(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1))),this.checkCollision(this.currentLevel.getTileObject(this.x,this.y+this.height-1))>0&&(this.currentLevel.getTileObject(this.x,this.y+this.height-1).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x,this.y+this.height-1))))}},{key:"handleCollision",value:function(t){t.type_id==i.CONSTANTS.GameType.PLAYER&&(this.objectType!=i.CONSTANTS.ObjectType.REDKEY&&this.objectType!=i.CONSTANTS.ObjectType.BLUEKEY&&this.objectType!=i.CONSTANTS.ObjectType.GREENKEY||(this.alive=!1,this.objectType==i.CONSTANTS.ObjectType.REDKEY&&(this.currentLevel.player.hasRedKey=!0),this.objectType==i.CONSTANTS.ObjectType.GREENKEY&&(this.currentLevel.player.hasGreenKey=!0),this.objectType==i.CONSTANTS.ObjectType.BLUEKEY&&(this.currentLevel.player.hasBlueKey=!0),e.BOBAPI.DSound_Play(11)),this.objectType!=i.CONSTANTS.ObjectType.REDDOOR&&this.objectType!=i.CONSTANTS.ObjectType.GREENDOOR&&this.objectType!=i.CONSTANTS.ObjectType.BLUEDOOR||(this.objectType==i.CONSTANTS.ObjectType.REDDOOR&&this.currentLevel.player.hasRedKey&&(this.alive=!1,e.BOBAPI.DSound_Play(6)),this.objectType==i.CONSTANTS.ObjectType.BLUEDOOR&&this.currentLevel.player.hasBlueKey&&(this.alive=!1,e.BOBAPI.DSound_Play(6)),this.objectType==i.CONSTANTS.ObjectType.GREENDOOR&&this.currentLevel.player.hasGreenKey&&(this.alive=!1,e.BOBAPI.DSound_Play(6)),t.movingX?this.moveToEdgeX(t,this):this.moveToEdgeY(t,this))),this.defaultHandleCollision(t)}},{key:"defaultHandleCollision",value:function(e){}}]),c}();exports.GameObject=T;
},{"./bob":"UKm1","./thing":"piRQ","./data":"aZjg"}],"ghiG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Enemy=void 0;var e=require("./bob"),t=require("./thing"),i=require("./data");function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t&&h(e.prototype,t),i&&h(e,i),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=c();return function(){var i,n=S(e);if(t){var s=S(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return T(this,i)}}function T(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(n){r(a,t.Thing);var h=l(a);function a(e,t,n,o,r){var l;return s(this,a),(l=h.call(this,e,t,o,r)).type_id=i.CONSTANTS.GameType.ENEMY,l.enemyID=n,l.enemyID==i.CONSTANTS.EnemyType.GreyZombie&&(l.height=20,l.width=30,l.speed=2,l.animationSpeed=4,l.y=l.y+20,l.AI_mode=i.CONSTANTS.AiMode.DumbWalk),l.enemyID==i.CONSTANTS.EnemyType.RedZombie&&(l.height=20,l.width=30,l.speed=2,l.animationSpeed=2,l.y=l.y+20,l.AI_mode=i.CONSTANTS.AiMode.DumbWalk),l.enemyID==i.CONSTANTS.EnemyType.Sluggo&&(l.height=16,l.width=16,l.speed=.5,l.animationSpeed=3,l.x=l.x+7,l.y=l.y+19,l.AI_mode=i.CONSTANTS.AiMode.DumbWalk),l}return o(a,[{key:"draw",value:function(){this.processAnimation(),this.defaultDraw()}},{key:"update",value:function(){this.state!=i.CONSTANTS.ThingState.FALLING&&(this.vx=0,this.vy=0,this.doAI(),this.getComponents())}},{key:"move",value:function(){if(this.state!=i.CONSTANTS.ThingState.FALLING){this.x=this.x+this.vx,this.movingX=!0,this.checkCorners(i.CONSTANTS.GameType.TILE);for(var e=0;e<this.currentLevel.objectSize;e++)this.checkCollision(this.currentLevel.objectArray[e])>0&&(this.currentLevel.objectArray[e].handleCollision(this),this.handleCollision(this.currentLevel.objectArray[e]));for(var t=0;t<this.currentLevel.enemySize;t++)this.checkCollision(this.currentLevel.enemyArray[t])>0&&(this.currentLevel.enemyArray[t].handleCollision(this),this.handleCollision(this.currentLevel.enemyArray[t]));this.movingX=!1,this.y=this.y+this.vy,this.movingY=!0,this.checkCorners(i.CONSTANTS.GameType.TILE);for(var n=0;n<this.currentLevel.objectSize;n++)this.checkCollision(this.currentLevel.objectArray[n])>0&&(this.currentLevel.objectArray[n].handleCollision(this),this.handleCollision(this.currentLevel.objectArray[n]));for(var s=0;s<this.currentLevel.enemySize;s++)this.checkCollision(this.currentLevel.enemyArray[s])>0&&this.handleCollision(this.currentLevel.enemyArray[s]);this.movingY=!1}}},{key:"processAnimation",value:function(){this.enemyID!=i.CONSTANTS.EnemyType.GreyZombie&&this.enemyID!=i.CONSTANTS.EnemyType.RedZombie||(this.state==i.CONSTANTS.ThingState.FALLING&&(this.animationCounter<15&&(this.currentFrame=12),this.animationCounter>=15&&this.animationCounter<30&&(this.currentFrame=13),this.animationCounter>=30&&this.animationCounter<45&&(this.currentFrame=14),this.animationCounter>=45&&(this.alive=!1)),this.state==i.CONSTANTS.ThingState.NORMAL&&(0==this.velocity&&(this.animationFlipper=0),this.angle>=0&&this.angle<90&&(this.currentFrame=9+this.animationFlipper),this.angle>=90&&this.angle<180&&(this.currentFrame=3+this.animationFlipper),this.angle>=180&&this.angle<270&&(this.currentFrame=0+this.animationFlipper),this.angle>=270&&this.angle<360&&(this.currentFrame=6+this.animationFlipper),this.animationCounter>=this.animationSpeed&&(this.animationFlipper++,this.animationCounter=0,this.animationFlipper>2&&(this.animationFlipper=0))),this.animationCounter++,this.bob.x=this.x,this.bob.y=this.y-20),this.enemyID==i.CONSTANTS.EnemyType.Sluggo&&(this.state==i.CONSTANTS.ThingState.NORMAL&&(0==this.velocity&&(this.animationFlipper=0),this.angle>=0&&this.angle<90&&(this.currentFrame=9+this.animationFlipper),this.angle>=90&&this.angle<180&&(this.currentFrame=3+this.animationFlipper),this.angle>=180&&this.angle<270&&(this.currentFrame=0+this.animationFlipper),this.angle>=270&&this.angle<360&&(this.currentFrame=6+this.animationFlipper),this.animationCounter>=this.animationSpeed&&(this.animationFlipper++,this.animationCounter=0,this.animationFlipper>2&&(this.animationFlipper=0))),this.state==i.CONSTANTS.ThingState.FALLING&&(this.alive=!1),this.animationCounter++,this.bob.x=this.x-7,this.bob.y=this.y-19),this.bob.curr_frame=this.currentFrame}},{key:"checkCorners",value:function(e){this.x<=0||this.y<=0||this.x+this.width-1>=40*this.currentLevel.width||this.y+this.height-1>=40*this.currentLevel.height||e==i.CONSTANTS.GameType.TILE&&(this.checkCollision(this.currentLevel.getTileObject(this.x,this.y))>0&&(this.handleCollision(this.currentLevel.getTileObject(this.x,this.y)),this.currentLevel.getTileObject(this.x,this.y).handleCollision(this)),this.checkCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y))>0&&(this.handleCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y)),this.currentLevel.getTileObject(this.x+this.width-1,this.y).handleCollision(this)),this.checkCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1))>0&&(this.handleCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1)),this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1).handleCollision(this)),this.checkCollision(this.currentLevel.getTileObject(this.x,this.y+this.height-1))>0&&(this.handleCollision(this.currentLevel.getTileObject(this.x,this.y+this.height-1)),this.currentLevel.getTileObject(this.x,this.y+this.height-1).handleCollision(this)))}},{key:"handleCollision",value:function(e){if(this!=e){if(this.enemyID==i.CONSTANTS.EnemyType.GreyZombie)switch(this.AI_mode){case i.CONSTANTS.AiMode.Sleep:e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(25),this.currentLevel.player.bounce(this),this.AI_mode=i.CONSTANTS.AiMode.DumbWalk);break;case i.CONSTANTS.AiMode.DumbWalk:if(e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(25),this.currentLevel.player.bounce(this)),e.type_id==i.CONSTANTS.GameType.TILE)if(e.tileType==i.CONSTANTS.TileType.Wall){this.angle=90;var t=(0,i.GetRandom)(4);0==t&&(this.angle=0),1==t&&(this.angle=90),2==t&&(this.angle=180),3==t&&(this.angle=270)}if(e.type_id==i.CONSTANTS.GameType.OBJECT){var n=e;if(n.objectType==i.CONSTANTS.ObjectType.REDDOOR||n.objectType==i.CONSTANTS.ObjectType.GREENDOOR||n.objectType==i.CONSTANTS.ObjectType.BLUEDOOR){this.angle=90;var s=(0,i.GetRandom)(4);0==s&&(this.angle=0),1==s&&(this.angle=90),2==s&&(this.angle=180),3==s&&(this.angle=270),this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e)}}e.type_id==i.CONSTANTS.GameType.ENEMY&&(this.angle+=180,this.angle>=360&&(this.angle-=360));break;case i.CONSTANTS.AiMode.SeekPlayer:if(e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(25),this.currentLevel.player.bounce(this)),e.type_id==i.CONSTANTS.GameType.OBJECT){var h=e;h.objectType!=i.CONSTANTS.ObjectType.REDDOOR&&h.objectType!=i.CONSTANTS.ObjectType.GREENDOOR&&h.objectType!=i.CONSTANTS.ObjectType.BLUEDOOR||(this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e))}}if(this.enemyID==i.CONSTANTS.EnemyType.RedZombie)switch(this.AI_mode){case i.CONSTANTS.AiMode.Sleep:e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(25),this.currentLevel.player.bounce(this),this.AI_mode=i.CONSTANTS.AiMode.DumbWalk);break;case i.CONSTANTS.AiMode.DumbWalk:if(e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(25),this.currentLevel.player.bounce(this)),e.type_id==i.CONSTANTS.GameType.TILE){var o=e;if(o.tileType==i.CONSTANTS.TileType.Wall||o.tileType==i.CONSTANTS.TileType.Hole){this.angle=90;var r=(0,i.GetRandom)(4);0==r&&(this.angle=0),1==r&&(this.angle=90),2==r&&(this.angle=180),3==r&&(this.angle=270),this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e)}}if(e.type_id==i.CONSTANTS.GameType.OBJECT){var a=e;if(a.objectType==i.CONSTANTS.ObjectType.REDDOOR||a.objectType==i.CONSTANTS.ObjectType.GREENDOOR||a.objectType==i.CONSTANTS.ObjectType.BLUEDOOR){this.angle=90;var l=(0,i.GetRandom)(4);0==l&&(this.angle=0),1==l&&(this.angle=90),2==l&&(this.angle=180),3==l&&(this.angle=270),this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e)}}e.type_id==i.CONSTANTS.GameType.ENEMY&&(this.angle+=180,this.angle>=360&&(this.angle-=360));break;case i.CONSTANTS.AiMode.SeekPlayer:if(e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(25),this.currentLevel.player.bounce(this)),e.type_id==i.CONSTANTS.GameType.TILE)e.tileType==i.CONSTANTS.TileType.Hole&&(this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e));if(e.type_id==i.CONSTANTS.GameType.OBJECT){var T=e;T.objectType!=i.CONSTANTS.ObjectType.REDDOOR&&T.objectType!=i.CONSTANTS.ObjectType.GREENDOOR&&T.objectType!=i.CONSTANTS.ObjectType.BLUEDOOR||(this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e))}}if(this.enemyID==i.CONSTANTS.EnemyType.Sluggo)switch(this.AI_mode){case i.CONSTANTS.AiMode.Sleep:e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(25),this.currentLevel.player.bounce(this),this.AI_mode=i.CONSTANTS.AiMode.DumbWalk);break;case i.CONSTANTS.AiMode.DumbWalk:if(e.type_id==i.CONSTANTS.GameType.PLAYER&&(this.currentLevel.player.hurt(10),this.currentLevel.player.bounce(this)),e.type_id==i.CONSTANTS.GameType.TILE){var y=e;if(y.tileType==i.CONSTANTS.TileType.Wall||y.tileType==i.CONSTANTS.TileType.Hole){this.angle=90;var c=(0,i.GetRandom)(4);0==c&&(this.angle=0),1==c&&(this.angle=90),2==c&&(this.angle=180),3==c&&(this.angle=270),this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e)}}if(e.type_id==i.CONSTANTS.GameType.OBJECT){var S=e;if(S.objectType==i.CONSTANTS.ObjectType.REDDOOR||S.objectType==i.CONSTANTS.ObjectType.GREENDOOR||S.objectType==i.CONSTANTS.ObjectType.BLUEDOOR){this.angle=90;var p=(0,i.GetRandom)(4);0==p&&(this.angle=0),1==p&&(this.angle=90),2==p&&(this.angle=180),3==p&&(this.angle=270),this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e)}}e.type_id==i.CONSTANTS.GameType.ENEMY&&(this.angle+=180,this.angle>=360&&(this.angle-=360))}this.defaultHandleCollision(e)}}},{key:"defaultHandleCollision",value:function(e){e.type_id==i.CONSTANTS.GameType.ENEMY&&(this.movingX?this.moveToEdgeX(this,e):this.moveToEdgeY(this,e))}},{key:"doAI",value:function(){if(this.enemyID==i.CONSTANTS.EnemyType.GreyZombie)switch(this.AI_mode){case i.CONSTANTS.AiMode.Sleep:this.velocity=0,this.animationSpeed=4;break;case i.CONSTANTS.AiMode.DumbWalk:this.velocity=this.speed,this.animationSpeed=4,this.getDistance(this.currentLevel.player)<180&&(this.AI_mode=i.CONSTANTS.AiMode.SeekPlayer,e.BOBAPI.DSound_Play(5));break;case i.CONSTANTS.AiMode.SeekPlayer:this.angle=this.getAngle(this.currentLevel.player.x,this.currentLevel.player.y),this.velocity=this.speed+1,this.animationSpeed=2,this.getDistance(this.currentLevel.player)>300&&(this.AI_mode=i.CONSTANTS.AiMode.DumbWalk,e.BOBAPI.DSound_Play(10))}if(this.enemyID==i.CONSTANTS.EnemyType.RedZombie)switch(this.AI_mode){case i.CONSTANTS.AiMode.Sleep:this.velocity=0,this.animationSpeed=4;break;case i.CONSTANTS.AiMode.DumbWalk:this.velocity=this.speed,this.animationSpeed=4,this.getDistance(this.currentLevel.player)<180&&(this.AI_mode=i.CONSTANTS.AiMode.SeekPlayer,e.BOBAPI.DSound_Play(5));break;case i.CONSTANTS.AiMode.SeekPlayer:this.angle=this.getAngle(this.currentLevel.player.x,this.currentLevel.player.y),this.velocity=this.speed+2,this.animationSpeed=1,this.getDistance(this.currentLevel.player)>300&&(this.AI_mode=i.CONSTANTS.AiMode.DumbWalk,e.BOBAPI.DSound_Play(10))}if(this.enemyID==i.CONSTANTS.EnemyType.Sluggo)switch(this.AI_mode){case i.CONSTANTS.AiMode.Sleep:this.velocity=0,this.animationSpeed=3;break;case i.CONSTANTS.AiMode.DumbWalk:this.velocity=this.speed,this.animationSpeed=3}}},{key:"hurt",value:function(e){this.health-=e,this.health<=0&&(this.alive=!1)}},{key:"getDistance",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}}]),a}();exports.Enemy=p;
},{"./bob":"UKm1","./thing":"piRQ","./data":"aZjg"}],"CtI3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Level=void 0;var e=require("./tile"),t=require("./gameobject"),r=require("./enemy"),i=require("./data");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}var u=function(){function s(t,r,n,u,o){a(this,s),this.songID=-1,this.player=o,o.currentLevel=this,this.objectset=n,this.tileMap=[],this.tileObjects=[],this.objectArray=[],this.objectSize=0,this.enemyArray=[],this.enemySize=0;var h=t.split(/\r?\n/),c=h[0].split(/\s/);this.width=Number(c[0]),this.height=Number(c[1]);for(var l=0;l<this.height;l++){for(var S=[],m=[],b=0;b<this.width;b++)S.push(null),m.push(null);this.tileMap.push(S),this.tileObjects.push(m)}for(l=0;l<this.height;l++){var y=h[l+1].split(/\s/);for(S=[],m=[],b=0;b<this.width;b++){var p=y[b],N=Number(p.substring(0,3));this.tileMap[b][l]=N,this.tileObjects[b][l]=new e.Tile(b*i.CONSTANTS.TileWidth,l*i.CONSTANTS.TileHeight,N,r,this);var T=p.charCodeAt(3)-"a".charCodeAt(0);T>=0&&T<u&&this.createObject(b*i.CONSTANTS.TileWidth,l*i.CONSTANTS.TileHeight,T);var v=p.charCodeAt(4)-"a".charCodeAt(0);(v>=0&&v<2||3==v)&&this.createEnemy(b*i.CONSTANTS.TileWidth,l*i.CONSTANTS.TileHeight,v)}}var f,d=null,A=-1,w=-1,_=!1,j=new e.Tile(-1,-1,this.tileMap[0][0],r,this);for(l=this.height+1;l<h.length;l++){var O=h[l].trim();if(""!=O&&!O.startsWith("//")){var g=O.split(/\s+/);switch(g[0]){case"Immediate":_=!0,A=0,w=0,f=j;continue;case"Script":A=Number(g[1]),w=Number(g[2]),f=this.tileObjects[A][w];continue;case"SetState":var k=new e.set_state_instr;k.id=i.CONSTANTS.ScriptInstrType.SetState,k.x=Number(g[1]),k.y=Number(g[2]),k.newState=Number(g[3]),d=k;break;case"SetStateTemp":var C=new e.set_state_temp_instr;C.id=i.CONSTANTS.ScriptInstrType.SetStateTemp,C.x=Number(g[1]),C.y=Number(g[2]),C.newState1=Number(g[3]),C.newState2=Number(g[4]),d=C;break;case"ToggleState":var I=new e.toggle_state_instr;I.id=i.CONSTANTS.ScriptInstrType.ToggleState,I.x=Number(g[1]),I.y=Number(g[2]),I.newState1=Number(g[3]),I.newState2=Number(g[4]),I.time=Number(g[5]),I.delay=Number(g[6]),d=I;break;case"Teleport":var L=new e.teleport_instr;L.id=i.CONSTANTS.ScriptInstrType.Teleport,L.tile_x=Number(g[1]),L.tile_y=Number(g[2]),d=L;break;case"PlaySound":var x=new e.play_sound_instr;x.id=i.CONSTANTS.ScriptInstrType.PlaySound,x.sound_id=Number(g[1]),d=x;break;case"Jump":var z=new e.jump_instr;z.id=i.CONSTANTS.ScriptInstrType.Jump,z.howFar=Number(g[1]),d=z;break;case"JumpIfEqual":var E=new e.jump_if_equal_instr;E.id=i.CONSTANTS.ScriptInstrType.JumpIfEqual,E.x=Number(g[1]),E.y=Number(g[2]),E.state=Number(g[3]),E.howFar=Number(g[4]),d=E;break;case"JumpIfNotEqual":var M=new e.jump_if_not_equal_instr;M.id=i.CONSTANTS.ScriptInstrType.JumpIfNotEqual,M.x=Number(g[1]),M.y=Number(g[2]),M.state=Number(g[3]),M.howFar=Number(g[4]),d=M;break;case"Lights":var q=new e.lights_instr;q.id=i.CONSTANTS.ScriptInstrType.Lights,q.on_or_off=Boolean(Number(g[1])),d=q;break;case"PlayMusic":var B=new e.play_music_instr;B.id=i.CONSTANTS.ScriptInstrType.PlayMusic,B.music_id=Number(g[1]),d=B;break;case"LoadLevel":var J=new e.load_level_instr;J.id=i.CONSTANTS.ScriptInstrType.LoadLevel,J.filename=g[1],d=J;break;case"TextBox":var P=new e.text_box_instr;P.id=i.CONSTANTS.ScriptInstrType.TextBox,P.text=O.substr(g[0].length+1),d=P;break;case"WinGame":var W=new e.win_game_instr;W.id=i.CONSTANTS.ScriptInstrType.WinGame,d=W;break;case"RestoreHealth":var H=new e.restore_health_instr;H.id=i.CONSTANTS.ScriptInstrType.RestoreHealth,d=H;break;case"End":f.scriptLoaded=!0,f.numInstructions=f.script.length,_&&(f.processScript(f),_=!1),A=-1,w=-1,f=null,d=null;continue}f.script.push(d)}}}return n(s,[{key:"getTile",value:function(e,t){var r=Math.floor(e/40),i=Math.floor(t/40);return this.tileMap[r][i]}},{key:"getTileObject",value:function(e,t){var r=Math.floor(e/40),i=Math.floor(t/40);return this.tileObjects[r][i]}},{key:"createObject",value:function(e,r,i){var a=new t.GameObject(e,r,i,this.objectset,this);this.objectArray.push(a),this.objectSize=this.objectArray.length}},{key:"createEnemy",value:function(e,t,a){var s;0==a&&(s=new r.Enemy(e,t,a,i.ALL_BOBS.GreyZombie,this)),1==a&&(s=new r.Enemy(e,t,a,i.ALL_BOBS.RedZombie,this)),3==a&&(s=new r.Enemy(e,t,a,i.ALL_BOBS.Sluggo,this)),this.enemyArray.push(s),this.enemySize=this.enemyArray.length}},{key:"updateObjectList",value:function(){for(var e=0;e<this.objectSize;e++)if(!this.objectArray[e].alive){for(var t=e;t<this.objectSize-1;t++)this.objectArray[t]=this.objectArray[t+1];this.objectSize--}}},{key:"updateEnemyList",value:function(){for(var e=0;e<this.enemySize;e++)if(!this.enemyArray[e].alive){for(var t=e;t<this.enemySize-1;t++)this.enemyArray[t]=this.enemyArray[t+1];this.enemySize--}}},{key:"updateObjects",value:function(){for(var e=0;e<this.objectSize;e++)this.objectArray[e].update()}},{key:"updateEnemies",value:function(){for(var e=0;e<this.enemySize;e++)this.enemyArray[e].update()}},{key:"moveObjects",value:function(){for(var e=0;e<this.objectSize;e++)this.objectArray[e].move()}},{key:"moveEnemies",value:function(){for(var e=0;e<this.enemySize;e++)this.enemyArray[e].move()}},{key:"drawObjects",value:function(){for(var e=0;e<this.objectSize;e++)this.objectArray[e].draw()}},{key:"drawEnemies",value:function(){for(var e=0;e<this.enemySize;e++)this.enemyArray[e].draw()}}]),s}();exports.Level=u;
},{"./tile":"xLgV","./gameobject":"F5Xm","./enemy":"ghiG","./data":"aZjg"}],"dxMG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var t=require("./thing"),e=require("./bob"),i=require("./data");function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function r(t,e,i){return e&&s(t.prototype,e),i&&s(t,i),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=y();return function(){var i,n=v(t);if(e){var h=v(this).constructor;i=Reflect.construct(n,arguments,h)}else i=n.apply(this,arguments);return c(this,i)}}function c(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var T=function(n){o(l,t.Thing);var s=a(l);function l(t,e,n,r){var o;return h(this,l),(o=s.call(this,t,e,n,r)).hurtDelay=new Date,o.type_id=i.CONSTANTS.GameType.PLAYER,o.height=20,o.width=26,o.speed=4,o.animationSpeed=2,o.hasRedKey=!1,o.hasGreenKey=!1,o.hasBlueKey=!1,o}return r(l,[{key:"draw",value:function(){this.processAnimation(),e.BOBAPI.Draw_BOB16(this.bob)}},{key:"update",value:function(){this.state!=i.CONSTANTS.ThingState.FALLING&&(this.vx=0,this.vy=0,this.velocity=0,i.INPUTCONTROLLER.Key_Down&&(this.angle=180,this.velocity=this.speed),i.INPUTCONTROLLER.Key_Up&&(this.angle=0,this.velocity=this.speed),i.INPUTCONTROLLER.Key_Left&&(i.INPUTCONTROLLER.Key_Up?this.angle=315:i.INPUTCONTROLLER.Key_Down?this.angle=225:this.angle=270,this.velocity=this.speed),i.INPUTCONTROLLER.Key_Right&&(i.INPUTCONTROLLER.Key_Up?this.angle=45:i.INPUTCONTROLLER.Key_Down?this.angle=135:this.angle=90,this.velocity=this.speed),"1"==i.INPUTCONTROLLER.KEY_PRESS&&(this.hasRedKey=!0,this.hasGreenKey=!0,this.hasBlueKey=!0),"2"==i.INPUTCONTROLLER.KEY_PRESS&&(i.GAME.load_level("levels\\mikeslevel.txt"),this.x=520,this.y=1040),"3"==i.INPUTCONTROLLER.KEY_PRESS&&(i.GAME.load_level("levels\\juanlevel.txt"),this.x=480,this.y=440),"4"==i.INPUTCONTROLLER.KEY_PRESS&&(i.GAME.load_level("levels\\neallevel.txt"),this.x=3800,this.y=3800),"5"==i.INPUTCONTROLLER.KEY_PRESS&&(this.health=1e7),"6"==i.INPUTCONTROLLER.KEY_PRESS&&(this.speed=15),"7"==i.INPUTCONTROLLER.KEY_PRESS&&(this.speed=4),this.getComponents())}},{key:"move",value:function(){if(this.state!=i.CONSTANTS.ThingState.FALLING){this.x=this.x+this.round(this.vx),this.movingX=!0,this.checkCorners(i.CONSTANTS.GameType.TILE);for(var t=0;t<this.currentLevel.objectSize;t++)this.checkCollision(this.currentLevel.objectArray[t])>0&&(this.currentLevel.objectArray[t].handleCollision(this),this.handleCollision(this.currentLevel.objectArray[t]));for(var e=0;e<this.currentLevel.enemySize;e++)this.checkCollision(this.currentLevel.enemyArray[e])>0&&(this.currentLevel.enemyArray[e].handleCollision(this),this.handleCollision(this.currentLevel.enemyArray[e]));this.movingX=!1,this.y=this.y+this.round(this.vy),this.movingY=!0,this.checkCorners(i.CONSTANTS.GameType.TILE);for(var n=0;n<this.currentLevel.objectSize;n++)this.checkCollision(this.currentLevel.objectArray[n])>0&&(this.currentLevel.objectArray[n].handleCollision(this),this.handleCollision(this.currentLevel.objectArray[n]));for(var h=0;h<this.currentLevel.enemySize;h++)this.checkCollision(this.currentLevel.enemyArray[h])>0&&(this.currentLevel.enemyArray[h].handleCollision(this),this.handleCollision(this.currentLevel.enemyArray[h]));this.movingY=!1}}},{key:"processAnimation",value:function(){this.state==i.CONSTANTS.ThingState.FALLING&&(this.animationCounter<15&&(this.currentFrame=12),this.animationCounter>=15&&this.animationCounter<30&&(this.currentFrame=13),this.animationCounter>=30&&this.animationCounter<45&&(this.currentFrame=14),this.animationCounter>=45&&(this.alive=!1)),this.state==i.CONSTANTS.ThingState.NORMAL&&(0==this.velocity&&(this.animationFlipper=0),this.angle>=0&&this.angle<90&&(this.currentFrame=9+this.animationFlipper),this.angle>=90&&this.angle<180&&(this.currentFrame=3+this.animationFlipper),this.angle>=180&&this.angle<270&&(this.currentFrame=0+this.animationFlipper),this.angle>=270&&this.angle<360&&(this.currentFrame=6+this.animationFlipper),this.animationCounter==this.animationSpeed&&(this.animationFlipper++,this.animationCounter=0,this.animationFlipper>2&&(this.animationFlipper=0))),this.animationCounter++,this.bob.curr_frame=this.currentFrame,this.bob.x=320,this.bob.y=220}},{key:"checkCorners",value:function(t){this.x<=0||this.y<=0||this.x+this.width-1>=40*this.currentLevel.width||this.y+this.height-1>=40*this.currentLevel.height||t==i.CONSTANTS.GameType.TILE&&(this.checkCollision(this.currentLevel.getTileObject(this.x,this.y))>0&&(this.currentLevel.getTileObject(this.x,this.y).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x,this.y))),this.checkCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y))>0&&(this.currentLevel.getTileObject(this.x+this.width-1,this.y).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y))),this.checkCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1))>0&&(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x+this.width-1,this.y+this.height-1))),this.checkCollision(this.currentLevel.getTileObject(this.x,this.y+this.height-1))>0&&(this.currentLevel.getTileObject(this.x,this.y+this.height-1).handleCollision(this),this.handleCollision(this.currentLevel.getTileObject(this.x,this.y+this.height-1))))}},{key:"hurt",value:function(t){(new Date).getTime()-this.hurtDelay.getTime()>100&&(e.BOBAPI.DSound_Play(1),this.hurtDelay=new Date),this.health-=t}},{key:"bounce",value:function(t){if(this.state!=i.CONSTANTS.ThingState.FALLING){var e=19,n=19;this.x<t.x&&(e=-19),this.y<t.y&&(n=-19),this.x=this.x+e,this.movingX=!0,this.checkCorners(i.CONSTANTS.GameType.TILE),this.movingX=!1,this.y=this.y+n,this.movingY=!0,this.checkCorners(i.CONSTANTS.GameType.TILE),this.movingY=!1}}}]),l}();exports.Player=T;
},{"./thing":"piRQ","./bob":"UKm1","./data":"aZjg"}],"FAEm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoGarethGame=void 0;var e=require("./data"),t=require("./bob"),a=require("./level"),r=require("./player");function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,a){return t&&S(e.prototype,t),a&&S(e,a),e}var B=function(){function S(t,a){i(this,S),this.boxX=50,this.boxY=50,this.currentFrame=0,this.backColor=0,this.gameState=0,this.win_game=!1,this.lights_on=!0,this.DEBUGMODE=!1,this.ctx=t,this.inputController=a,this.garethBob=e.ALL_BOBS.Gareth,(0,e.setCanvas)(t),(0,e.setGame)(this),(0,e.setInputController)(this.inputController),this.gameState=e.CONSTANTS.GameState.GAME_INTRO}return s(S,[{key:"newGame",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.gameState=e.CONSTANTS.GameState.GAME_RUNNING;var a=new r.Player(e.CONSTANTS.StartX,e.CONSTANTS.StartY,this.garethBob,null);t&&(a.hasRedKey=e.PLAYER.hasRedKey,a.hasBlueKey=e.PLAYER.hasBlueKey,a.hasGreenKey=e.PLAYER.hasGreenKey),(0,e.setPlayer)(a),this.win_game=!1,this.load_level("Levels/mikeslevel.txt")}},{key:"clearScreen",value:function(){this.ctx.fillStyle="#000000",this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}},{key:"Game_Main",value:function(){this.inputController.update(),"q"==e.INPUTCONTROLLER.KEY_PRESS&&location.reload(),"Escape"==e.INPUTCONTROLLER.KEY_PRESS&&(this.stop_all_music(),this.gameState=e.CONSTANTS.GameState.GAME_INTRO),this.gameState==e.CONSTANTS.GameState.GAME_INTRO&&this.game_intro(),this.gameState==e.CONSTANTS.GameState.GAME_PAUSED&&this.game_paused(),this.gameState==e.CONSTANTS.GameState.GAME_HELP&&this.game_help(),this.gameState==e.CONSTANTS.GameState.GAME_ABOUT&&this.game_about(),this.gameState==e.CONSTANTS.GameState.GAME_RUNNING&&this.game_running(),this.gameState==e.CONSTANTS.GameState.GAME_WIN&&this.game_win(),this.gameState==e.CONSTANTS.GameState.GAME_OVER&&this.game_over(),this.gameState==e.CONSTANTS.GameState.GAME_TEXT_BOX&&this.game_text_box()}},{key:"game_running",value:function(){if(this.clearScreen(),this.win_game&&e.PLAYER.state==e.CONSTANTS.ThingState.FALLING&&!e.PLAYER.alive)return this.gameState=e.CONSTANTS.GameState.GAME_WIN,void t.BOBAPI.DMusic_Play(6);if(!e.PLAYER.alive||e.PLAYER.health<=0)return this.gameState=e.CONSTANTS.GameState.GAME_OVER,void t.BOBAPI.DSound_Play(8);"p"==e.INPUTCONTROLLER.KEY_PRESS&&(this.gameState=e.CONSTANTS.GameState.GAME_PAUSED);for(var a=0;a<this.currentLevel.width;a++)for(var r=0;r<this.currentLevel.height;r++)this.currentLevel.tileObjects[a][r].update();e.PLAYER.update(),e.PLAYER.move(),this.currentLevel.updateEnemies(),this.currentLevel.moveEnemies(),this.currentLevel.updateObjects(),this.currentLevel.moveObjects(),this.currentLevel.updateObjectList(),this.currentLevel.updateEnemyList(),this.draw_tiles(),this.currentLevel.drawObjects(),this.currentLevel.drawEnemies(),e.PLAYER.draw(),0==this.lights_on&&t.BOBAPI.Draw_BOB16(e.ALL_BOBS.DarknessOverlay),this.draw_lifebar(),this.show_keys()}},{key:"draw_tiles",value:function(){var t,a;t=Math.floor((e.PLAYER.x-e.PLAYER.x%40)/40)-8,a=Math.floor((e.PLAYER.y-e.PLAYER.y%40)/40)-6,t<0&&(t=0),t>this.currentLevel.width-17&&(t=this.currentLevel.width-17),a<0&&(a=0),a>this.currentLevel.height-13&&(a=this.currentLevel.height-13);for(var r=t;r<t+17;r++)for(var i=a;i<a+13;i++)this.currentLevel.tileObjects[r][i].draw()}},{key:"draw_all_tiles",value:function(){for(var e=0;e<this.currentLevel.width;e++)for(var t=0;t<this.currentLevel.height;t++)this.currentLevel.tileObjects[e][t].draw()}},{key:"show_text_box",value:function(a){t.BOBAPI.DSound_Play(3),this.gameState=e.CONSTANTS.GameState.GAME_TEXT_BOX,this.textBoxText=a}},{key:"show_keys",value:function(){e.ALL_BOBS.KeyOverlay.x=500,e.ALL_BOBS.KeyOverlay.y=18,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.KeyOverlay),e.PLAYER.hasRedKey&&(e.ALL_BOBS.ObjectSet.curr_frame=0,e.ALL_BOBS.ObjectSet.x=533,e.ALL_BOBS.ObjectSet.y=11,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.ObjectSet)),e.PLAYER.hasGreenKey&&(e.ALL_BOBS.ObjectSet.curr_frame=2,e.ALL_BOBS.ObjectSet.x=548,e.ALL_BOBS.ObjectSet.y=11,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.ObjectSet)),e.PLAYER.hasBlueKey&&(e.ALL_BOBS.ObjectSet.curr_frame=1,e.ALL_BOBS.ObjectSet.x=563,e.ALL_BOBS.ObjectSet.y=11,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.ObjectSet))}},{key:"set_lights",value:function(e){this.lights_on=e}},{key:"stop_all_music",value:function(){t.BOBAPI.DMusic_Stop()}},{key:"game_intro",value:function(){e.INPUTCONTROLLER.Key_Start?this.newGame():("h"==e.INPUTCONTROLLER.KEY_PRESS&&(this.gameState=e.CONSTANTS.GameState.GAME_HELP),"a"==e.INPUTCONTROLLER.KEY_PRESS&&(this.gameState=e.CONSTANTS.GameState.GAME_ABOUT),e.ALL_BOBS.GameScreens.curr_frame=0,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.GameScreens))}},{key:"game_about",value:function(){e.ALL_BOBS.GameScreens.curr_frame=3,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.GameScreens)}},{key:"game_help",value:function(){e.ALL_BOBS.GameScreens.curr_frame=4,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.GameScreens)}},{key:"game_paused",value:function(){e.INPUTCONTROLLER.Key_Start?this.gameState=e.CONSTANTS.GameState.GAME_RUNNING:(e.ALL_BOBS.GameScreens.curr_frame=1,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.GameScreens))}},{key:"game_win_game",value:function(){this.win_game=!0,console.log("You win!!")}},{key:"game_over",value:function(){e.ALL_BOBS.GameScreens.curr_frame=2,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.GameScreens),e.INPUTCONTROLLER.Key_Start&&this.newGame(!0)}},{key:"game_win",value:function(){e.ALL_BOBS.GameScreens.curr_frame=5,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.GameScreens),e.INPUTCONTROLLER.Key_Start&&this.newGame()}},{key:"game_text_box",value:function(){if(e.INPUTCONTROLLER.Key_Start)this.gameState=e.CONSTANTS.GameState.GAME_RUNNING;else{this.draw_tiles(),this.currentLevel.drawObjects(),this.currentLevel.drawEnemies(),e.PLAYER.draw(),0==this.lights_on&&t.BOBAPI.Draw_BOB16(e.ALL_BOBS.DarknessOverlay);var a,r,i,S=t.BOBAPI.RGB(255,255,255),s=t.BOBAPI.RGB(255,255,255);r=20,180;var B=(a=100)+(i=e.CONSTANTS.ScreenWidth-220)-2;t.BOBAPI.Draw_Line16(a,r,a+i,r,S),t.BOBAPI.Draw_Line16(a,r,a,200,S),t.BOBAPI.Draw_Line16(a+i,r,a+i,200,S),t.BOBAPI.Draw_Line16(a,200,a+i,200,S);for(var n=101;n<a+i;n++)for(var O=21;O<200;O++)(n+O)%2==0&&t.BOBAPI.Draw_Pixel16(n,O,"blue");t.BOBAPI.DrawText(this.textBoxText,118,38,B-16-102,18,s),t.BOBAPI.DrawText("Press Enter to continue",262,194,B-16-102,18,"black")}}},{key:"draw_lifebar",value:function(){var a,r,i="black";a=100,r=20,t.BOBAPI.Draw_Line16(a,r,201,r,i),t.BOBAPI.Draw_Line16(a,r,a,41,i),t.BOBAPI.Draw_Line16(201,r,201,41,i),t.BOBAPI.Draw_Line16(a,41,201,41,i),e.ALL_BOBS.LifeOverlay.x=30,e.ALL_BOBS.LifeOverlay.y=17,t.BOBAPI.Draw_BOB16(e.ALL_BOBS.LifeOverlay);var S=this.currentLevel.player.health;S>100&&(S=100);for(var s=0;s<S;s++)i=t.BOBAPI.RGB(0,185+s/15,0),t.BOBAPI.Draw_Line16(101+s,21,101+s,40,i)}},{key:"load_level",value:function(t){this.lights_on=!0,"m"!=t[7]&&"M"!=t[7]||(this.currentLevel=new a.Level(e.DATA.levels.MikeLevel,e.ALL_BOBS.MikeLevelTileSet,e.ALL_BOBS.ObjectSet,e.CONSTANTS.NumObjects,e.PLAYER)),"n"!=t[7]&&"N"!=t[7]||(this.currentLevel=new a.Level(e.DATA.levels.NeilLevel,e.ALL_BOBS.NeilLevelTileSet,e.ALL_BOBS.ObjectSet,e.CONSTANTS.NumObjects,e.PLAYER)),"j"!=t[7]&&"J"!=t[7]||(this.currentLevel=new a.Level(e.DATA.levels.Juanlevel,e.ALL_BOBS.JuanLevelTileSet,e.ALL_BOBS.ObjectSet,e.CONSTANTS.NumObjects,e.PLAYER)),this.gameState=e.CONSTANTS.GameState.GAME_RUNNING}}]),S}();exports.NoGarethGame=B;
},{"./data":"aZjg","./bob":"UKm1","./level":"CtI3","./player":"dxMG"}],"zWgV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MyApp=void 0;var e=require("./input_controller"),t=require("./nogarethgame"),n=require("./data"),i=require("./bob");function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}var s=function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function r(e){try{c(i.next(e))}catch(t){a(t)}}function s(e){try{c(i.throw(e))}catch(t){a(t)}}function c(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(r,s)}c((i=i.apply(e,t||[])).next())})},c=function(){function a(){o(this,a),this.message="",this._data=n.DATA,this._bobapi=i.BOBAPI,this.mobileMode=!1,this.firstTimeLoad=!0,this.lastFrameTime=0,this.fps=45,this.bindRivets(),this.canvas=document.getElementById("my-canvas"),this.ctx=this.canvas.getContext("2d"),this.detectMobile(),this.load()}return r(a,[{key:"load",value:function(){return s(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.DATA.LoadAsync();case 2:$("#divLoading").hide(),$("#divMain").show();case 4:case"end":return e.stop()}},e)}))}},{key:"finishedLoading",value:function(){}},{key:"bindRivets",value:function(){rivets.bind($("body"),{data:this})}},{key:"btnClick",value:function(){if(this.firstTimeLoad){if(Tone.context.resume(),i.BOBAPI.LoadAllSounds(),this.mobileMode){$("#mobileDiv").show(),$("#my-canvas").width(window.innerWidth),$("#my-canvas").appendTo("#mobileCanvas"),$("#my-canvas").show(),$("#divMain").hide(),$("#btnHideMenu").show();var n=window.innerWidth/2-35;document.getElementById("menuDiv").style.left=n+"px",this.inputController=new e.InputController("divTouchSurface");try{document.body.scrollTop=0,document.documentElement.scrollTop=0}catch(o){}}else $("#btnFullScreen").show(),$("#my-canvas").show(),this.inputController=new e.InputController("my-canvas");this.inputController.KeyMappings={Mapping_Left:"ArrowLeft",Mapping_Right:"ArrowRight",Mapping_Up:"ArrowUp",Mapping_Down:"ArrowDown",Mapping_Action_1:"a",Mapping_Action_2:"s",Mapping_Action_3:"z",Mapping_Action_4:"x",Mapping_Action_5:"d",Mapping_Action_6:"c",Mapping_Action_7:"f",Mapping_Start:"Enter",Mapping_Select:"Shift"},this.inputController.setupGamePad(),this.nogarethGame=new t.NoGarethGame(this.ctx,this.inputController),window.requestAnimationFrame(this.draw.bind(this)),this.firstTimeLoad=!1}else this.nogarethGame=new t.NoGarethGame(this.ctx,this.inputController),this.mobileMode&&this.btnHideMenu();$("#btnPlayGame").hide()}},{key:"draw",value:function(e){window.requestAnimationFrame(this.draw.bind(this)),e-this.lastFrameTime>=1e3/this.fps&&this.nogarethGame&&(this.nogarethGame.Game_Main(),this.lastFrameTime=performance.now())}},{key:"detectMobile",value:function(){(window.innerWidth<600||navigator.userAgent.toLocaleLowerCase().toLocaleLowerCase().includes("iphone")||navigator.userAgent.toLocaleLowerCase().toLocaleLowerCase().includes("ipad"))&&(this.mobileMode=!0)}},{key:"btnHideMenu",value:function(){$("#divMain").hide(),$("#menuDiv").show()}},{key:"btnFullScreen",value:function(){this.canvas.requestFullscreen()}}]),a}();exports.MyApp=c,window.myApp=new c;
},{"./input_controller":"WmOQ","./nogarethgame":"FAEm","./data":"aZjg","./bob":"UKm1"}]},{},["zWgV"], null)