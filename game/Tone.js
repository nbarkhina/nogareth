parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Avhi":[function(require,module,exports) {
var define;
var t;function e(t,e){if(null==t)return{};var r,o,i=n(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)r=a[o],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(i[r]=t[r])}return i}function n(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=s();return function(){var n,r=c(t);if(e){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e,n,r,o,i,a){try{var u=t[i](a),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(r,o)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(t){h(i,r,o,a,u,"next",t)}function u(t){h(i,r,o,a,u,"throw",t)}a(void 0)})}}function y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=k(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function m(t,e,n){return e&&v(t.prototype,e),n&&v(t,n),t}function g(t){return O(t)||w(t)||k(t)||b()}function b(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function O(t){if(Array.isArray(t))return A(t)}function x(t,e){return S(t)||C(t,e)||k(t,e)||T()}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function k(t,e){if(t){if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(s){o=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}function S(t){if(Array.isArray(t))return t}function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e,n){"object"==("undefined"==typeof exports?"undefined":P(exports))&&"object"==("undefined"==typeof module?"undefined":P(module))?module.exports=n():"function"==typeof t&&t.amd?t([],n):"object"==("undefined"==typeof exports?"undefined":P(exports))?exports.Tone=n():e.Tone=n()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==P(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){!function(t,e,n,r){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,n=n&&n.hasOwnProperty("default")?n.default:n,r=r&&r.hasOwnProperty("default")?r.default:r;var o=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},i=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},a=function(t,e){return{startTime:e,type:"setValue",value:t}},u=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},s=function(t,e,n){var r=n.startTime,o=n.target,i=n.timeConstant;return o+(e-o)*Math.exp((r-t)/i)},c=function(t){return"exponentialRampToValue"===t.type},l=function(t){return"linearRampToValue"===t.type},p=function(t){return c(t)||l(t)},f=function(t){return"setValue"===t.type},h=function(t){return"setValueCurve"===t.type},d=function t(e,n,r,o){var i=e[n];return void 0===i?o:p(i)||f(i)?i.value:h(i)?i.values[i.values.length-1]:s(r,t(e,n-1,i.startTime,o),i)},y=function(t,e,n,r,o){return void 0===n?[r.insertTime,o]:p(n)?[n.endTime,n.value]:f(n)?[n.startTime,n.value]:h(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,d(t,e-1,n.startTime,o)]},_=function(t){return"cancelAndHold"===t.type},v=function(t){return"cancelScheduledValues"===t.type},m=function(t){return _(t)||v(t)?t.cancelTime:c(t)||l(t)?t.endTime:t.startTime},g=function(t,e,n,r){var o=r.endTime,i=r.value;return n===i?i:0<n&&0<i||n<0&&i<0?n*Math.pow(i/n,(t-e)/(o-e)):0},b=function(t,e,n,r){return n+(t-e)/(r.endTime-e)*(r.value-n)},w=function(t){return"setTarget"===t.type},O=function(){function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return r(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=m(t);if(_(t)||v(t)){var n=this._automationEvents.findIndex(function(t){return m(t)>=e}),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),_(t)){var s=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&p(r)){if(w(s))throw new Error("The internal list is malformed.");var f=h(s)?s.startTime+s.duration:m(s),d=h(s)?s.values[s.values.length-1]:s.value,y=c(r)?g(e,f,d,r):b(e,f,d,r),O=c(r)?o(y,e,this._currenTime):i(y,e,this._currenTime);this._automationEvents.push(O)}void 0!==s&&w(s)&&this._automationEvents.push(a(this.getValue(e),e)),void 0!==s&&h(s)&&s.startTime+s.duration>e&&(this._automationEvents[this._automationEvents.length-1]=u(new Float32Array([6,7]),s.startTime,e-s.startTime))}}else{var x=this._automationEvents.findIndex(function(t){return m(t)>e}),T=-1===x?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[x-1];if(void 0!==T&&h(T)&&m(T)+T.duration>e)return!1;var k=c(t)?o(t.value,t.endTime,this._currenTime):l(t)?i(t.value,e,this._currenTime):t;if(-1===x)this._automationEvents.push(k);else{if(h(t)&&e+t.duration>m(this._automationEvents[x]))return!1;this._automationEvents.splice(x,0,k)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return m(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),r=n[0];w(r)&&n.unshift(a(d(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents[this._automationEvents.length-1],r=this._automationEvents.findIndex(function(e){return m(e)>t}),o=this._automationEvents[r],i=m(n)<=t?n:this._automationEvents[r-1];if(void 0!==i&&w(i)&&(void 0===o||!p(o)||o.insertTime>t))return s(t,d(this._automationEvents,r-2,i.startTime,this._defaultValue),i);if(void 0!==i&&f(i)&&(void 0===o||!p(o)))return i.value;if(void 0!==i&&h(i)&&(void 0===o||!p(o)||i.startTime+i.duration>t))return t<i.startTime+i.duration?function(t,e){var n=e.duration,r=e.startTime,o=e.values;return function(t,e){var n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]}(o,(t-r)/n*(o.length-1))}(t,i):i.values[i.values.length-1];if(void 0!==i&&p(i)&&(void 0===o||!p(o)))return i.value;if(void 0!==o&&c(o)){var a=y(this._automationEvents,r-1,i,o,this._defaultValue),u=e(a,2),_=u[0],v=u[1];return g(t,_,v,o)}if(void 0!==o&&l(o)){var O=y(this._automationEvents,r-1,i,o,this._defaultValue),x=e(O,2),T=x[0],k=x[1];return b(t,T,k,o)}return this._defaultValue}}]),t}();t.AutomationEventList=O,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=a,t.createSetValueCurveAutomationEvent=u,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(2),n(6),n(7))},function(t,e){},function(t,e,n){var r=n(3),o=n(4),i=n(5);t.exports=function(t,e){return r(t)||o(t,e)||i()}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,n,o){"use strict";o.r(n);var a={};o.r(a),o.d(a,"assert",function(){return Kn}),o.d(a,"setLogger",function(){return er}),o.d(a,"log",function(){return nr}),o.d(a,"warn",function(){return rr});var s=o(0),c=function(){try{return new DOMException("","AbortError")}catch(t){return t.code=20,t.name="AbortError",t}},l=new WeakSet,h=new WeakSet,v=new WeakMap,b=new WeakMap,w=new WeakMap,O=new WeakMap,T=new WeakMap,k=new WeakMap,A=new WeakMap,C=new WeakSet,S=new WeakMap,j=new WeakMap,E=new WeakMap,D=new WeakSet,M=new WeakMap,R=function(){try{return new DOMException("","InvalidStateError")}catch(t){return t.code=11,t.name="InvalidStateError",t}},I=function(t){var e=A.get(t);if(void 0===e)throw R();return e},V={construct:function(){return V}},N=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,q=function(t,e){for(var n=[],r=t.replace(/^[\s]+/,""),o=r.match(N);null!==o;){var i=o[1].slice(1,-1),a=o[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());n.push(a),o=(r=r.slice(o[0].length).replace(/^[\s]+/,"")).match(N)}return[n.join(";"),r]},F=function(t){if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},B=function(t){if(!function(t){try{new new Proxy(t,V)}catch(t){return!1}return!0}(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=P(t.prototype))throw new TypeError("The given value for processorCtor should have a prototype.");if("function"!=typeof t.prototype.process)throw new TypeError("The given value for processorCtor should have a callable process() function.")},L={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},W=function(t,e){var n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},z=function(t){return W(v,t)},U=function(t,e){return t.context===e};function G(t){return W(b,t)}var Q=function(t){var e=G(t.context);return W(e.nodes,t)},X=function(t){var e=Q(t);if(null===e.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},Y=function(t,e,n){var r=Q(t);return Promise.all(r.activeInputs.map(function(t,r){return Array.from(t).map(function(t){var o=x(t,2),i=o[0],a=o[1];return X(i).render(i,e).then(function(t){return t.connect(n,a,r)})})}).reduce(function(t,e){return[].concat(g(t),g(e))},[]))},Z=function(t){try{t.copyToChannel(new Float32Array(1),0,-1)}catch(t){return!1}return!0},H=function(t){var e=new Float32Array(2);try{t.copyFromChannel(e,0,t.length-1)}catch(t){return!1}return!0},$=function(){try{return new DOMException("","IndexSizeError")}catch(t){return t.code=1,t.name="IndexSizeError",t}},J=function(t){var e;t.getChannelData=(e=t.getChannelData,function(n){try{return e.call(t,n)}catch(t){if(12===t.code)throw $();throw t}})},K={numberOfChannels:1},tt=function(t){return W(S,t)},et=function(t,e){if("active"===e){if(l.has(t))throw new Error("The AudioNode is already stored.");l.add(t)}else{if(!l.has(t))throw new Error("The AudioNode is not stored.");l.delete(t)}tt(t).forEach(function(t){return t(e)})},nt=function(t,e){return"function"==typeof e?function(n){var r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),e.call(t,n)}:e},rt={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},ot=function(t){return W(w,t)};function it(t,e){var n=G(t);return W(n.params,e)}var at=function(t,e,n,r){var o=it(t,e);return Promise.all(Array.from(o.activeInputs).map(function(t){var e=x(t,2),o=e[0],i=e[1];return X(o).render(o,n).then(function(t){return t.connect(r,i)})}))},ut=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ot(n);return at(t,n,e,r)},st=function(t,e,n,r){return function(t,e){var n=it(t,e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer}(t,n).replay(r),at(t,n,e,r)},ct=function(t){return void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t)},lt=function(){function t(e){_(this,t),this._nativeEventTarget=e,this._listeners=new WeakMap}return m(t,[{key:"addEventListener",value:function(t,e,n){var r=this._listeners.get(e);return void 0===r&&(r=nt(this,e),"function"==typeof e&&this._listeners.set(e,r)),this._nativeEventTarget.addEventListener(t,r,n)}},{key:"dispatchEvent",value:function(t){return this._nativeEventTarget.dispatchEvent(t)}},{key:"removeEventListener",value:function(t,e,n){var r=this._listeners.get(e);return this._nativeEventTarget.removeEventListener(t,void 0===r?null:r,n)}}]),t}(),pt=function(t){return"context"in t},ft=function(t){return pt(t[0])},ht=function(t){return"port"in t},dt=function(t,e,n,r){var o=e.inputs;return void 0!==o?(t.connect(o[r],n,0),[o[r],n,0]):(t.connect(e,n,r),[e,n,r])},yt=function(t,e){if(!tt(t).delete(e))throw new Error("Missing the expected event listener")},_t=function(t,e,n,r){var o=e.inputs;void 0===r||void 0===n?t.disconnect(e):void 0!==o?t.disconnect(o[r],n,0):t.disconnect(e,n,r)},vt=function(t,e,n,r){var o,i=y(t);try{for(i.s();!(o=i.n()).done;){if(n(o.value)){if(r)return!1;throw Error("The set contains at least one similar element.")}}}catch(a){i.e(a)}finally{i.f()}return t.add(e),!0},mt=function(t){return l.has(t)},gt=function(t){return!l.has(t)},bt=function(t,e){var n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");var r=x(n,1)[0];return t.delete(r),r},wt=function(t,e){!ht(t)&&e.every(function(t){return 0===t.size})&&et(t,"passive")},Ot=function(t){return new Promise(function(e){var n=t.createScriptProcessor(256,1,1),r=t.createGain(),o=t.createBuffer(1,2,44100),i=o.getChannelData(0);i[0]=1,i[1]=1;var a=t.createBufferSource();a.buffer=o,a.loop=!0,a.connect(n),n.connect(t.destination),a.connect(r),a.disconnect(r),n.onaudioprocess=function(r){var o=r.inputBuffer.getChannelData(0);Array.prototype.some.call(o,function(t){return 1===t})?e(!0):e(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(t.destination)},a.start()})},xt=function(t){return"context"in t},Tt=function(t,e,n,r){var o=x(n,3),i=o[0],a=o[1],u=o[2];vt(t[a],[e,i,u],function(t){return t[0]===e&&t[1]===i},r)},kt=function(t,e,n,r){var o=x(n,2),i=o[0],a=o[1];vt(t,[e,i,a],function(t){return t[0]===e&&t[1]===i},r)},At=function(t,e,n,r){var o=x(n,3),i=o[0],a=o[1],u=o[2],s=t.get(i);void 0===s?t.set(i,new Set([[a,e,u]])):vt(s,[a,e,u],function(t){return t[0]===a&&t[1]===e},r)},Ct=function(t,e,n){var r=x(e,3),o=r[0],i=r[1],a=r[2],u=t.get(o);void 0===u?t.set(o,new Set([[i,a]])):vt(u,[i,a],function(t){return t[0]===i},n)},St=function(t,e,n,r){var o=W(t,e),i=bt(o,function(t){return t[0]===n&&t[1]===r});return 0===o.size&&t.delete(e),i},Pt=function(t,e,n){var r=W(t,e),o=bt(r,function(t){return t[0]===n});return 0===r.size&&t.delete(e),o},jt=function(t,e,n){var r,o=y(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i[0]===e&&i[1]===n)return t.delete(i),i}}catch(a){o.e(a)}finally{o.f()}return null},Et=function(t,e,n,r){var o=x(function(t,e,n,r){var o=Q(e),i=o.activeInputs,a=o.passiveInputs,u=jt(i[r],t,n);return null===u?[St(a,t,n,r)[2],"passive"]:[u[2],"active"]}(t,e,n,r),2),i=o[0],a=o[1];if(null!==i&&(yt(t,i),"active"===a&&_t(z(t),z(e),n,r)),mt(e)){var u=Q(e).activeInputs;wt(e,u)}},Dt=function(t,e,n){var r=x(function(t,e,n){var r=it(t.context,e),o=r.activeInputs,i=r.passiveInputs,a=jt(o,t,n);return null===a?[Pt(i,t,n)[1],"passive"]:[a[2],"active"]}(t,e,n),2),o=r[0],i=r[1];null!==o&&(yt(t,o),"active"===i&&z(t).disconnect(ot(e),n))},Mt=function(){function t(e){_(this,t),this._map=new Map(e)}return m(t,[{key:"entries",value:function(){return this._map.entries()}},{key:"forEach",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach(function(r,o){return t.call(n,r,o,e)})}},{key:"get",value:function(t){return this._map.get(t)}},{key:"has",value:function(t){return this._map.has(t)}},{key:"keys",value:function(){return this._map.keys()}},{key:"values",value:function(){return this._map.values()}},{key:"size",get:function(){return this._map.size}}]),t}(),Rt={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:void 0,parameterData:{},processorOptions:{}},It=function(t){for(var e=[],n=0;n<t;n+=1)e.push(1);return e};function Vt(t,e,n,r,o){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,o);else{var i=t.getChannelData(r);if(0===e[n].byteLength)e[n]=i.slice(o,o+128);else{var a=new Float32Array(i.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(a)}}}var Nt=function(t,e,n,r,o){"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],r,o):0!==e[n].byteLength&&t.getChannelData(r).set(e[n],o)},qt=function(t,e){for(var n=[],r=0;r<t;r+=1){for(var o=[],i="number"==typeof e?e:e[r],a=0;a<i;a+=1)o.push(new Float32Array(128));n.push(o)}return n},Ft=function(){var t=d(regeneratorRuntime.mark(function t(e,n,r,o,i){var a,u,s,c,l,h,d,y,_,v,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.length,u=o.channelCount*o.numberOfInputs,s=o.outputChannelCount.reduce(function(t,e){return t+e},0),c=0===s?null:r.createBuffer(s,a,n.sampleRate),void 0!==i){t.next=3;break}throw new Error("Missing the processor constructor.");case 3:return l=Q(e),t.next=6,function(t,e){var n=W(E,t),r=z(e);return W(n,r)}(r,e);case 6:h=t.sent,d=qt(o.numberOfInputs,o.channelCount),y=qt(o.numberOfOutputs,o.outputChannelCount),_=Array.from(e.parameters.keys()).reduce(function(t,e){return p(p({},t),{},f({},e,new Float32Array(128)))},{}),v=function(t){for(var r=0;r<o.numberOfInputs;r+=1)for(var a=0;a<o.channelCount;a+=1)Vt(n,d[r],a,a,t);void 0!==i.parameterDescriptors&&i.parameterDescriptors.forEach(function(e,r){var o=e.name;Vt(n,_,o,u+r,t)});for(var s=0;s<o.numberOfInputs;s+=1)for(var p=0;p<o.outputChannelCount[s];p+=1)0===y[s][p].byteLength&&(y[s][p]=new Float32Array(128));try{var f=d.map(function(t,e){return 0===l.activeInputs[e].size?[new Float32Array(0)]:t}),v=h.process(f,y,_);if(null!==c)for(var m=0,g=0;m<o.numberOfOutputs;m+=1){for(var b=0;b<o.outputChannelCount[m];b+=1)Nt(c,y[m],b,g+b,t);g+=o.outputChannelCount[m]}if(!v)return"break"}catch(n){return e.dispatchEvent(new ErrorEvent("processorerror",{error:n})),"break"}},m=0;case 12:if(!(m<a)){t.next=19;break}if("break"!==v(m)){t.next=16;break}return t.abrupt("break",19);case 16:m+=128,t.next=12;break;case 19:return t.abrupt("return",c);case 20:case"end":return t.stop()}},t)}));return function(e,n,r,o,i){return t.apply(this,arguments)}}(),Bt={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Lt={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Wt={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},zt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Ut={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Gt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Qt=function(t,e,n){var r=e[n];if(void 0===r)throw t();return r},Xt={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Yt={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Zt=function(){try{return new DOMException("","InvalidAccessError")}catch(t){return t.code=15,t.name="InvalidAccessError",t}},Ht={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},$t=function(t,e,n,r,o,i,a,u,s,c,l){for(var p=c.length,f=u,h=0;h<p;h+=1){for(var d=n[0]*c[h],y=1;y<o;y+=1){var _=f-y&s-1;d+=n[y]*i[_],d-=t[y]*a[_]}for(var v=o;v<r;v+=1)d+=n[v]*i[f-v&s-1];for(var m=o;m<e;m+=1)d-=t[m]*a[f-m&s-1];i[f]=c[h],a[f]=d,f=f+1&s-1,l[h]=d}return f},Jt=function(t){var e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{var n=t.decodeAudioData(e.buffer,function(){});return void 0!==n&&(n.catch(function(){}),!0)}catch(t){}return!1},Kt=function(t,e,n){var r=e[n];void 0!==r&&r!==t[n]&&(t[n]=r)},te=function(t,e){Kt(t,e,"channelCount"),Kt(t,e,"channelCountMode"),Kt(t,e,"channelInterpretation")},ee=function(t){return"function"==typeof t.getFloatTimeDomainData},ne=function(t,e,n){var r=e[n];void 0!==r&&r!==t[n].value&&(t[n].value=r)},re=function(t){var e;t.start=(e=t.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;if("number"==typeof o&&o<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,o)})},oe=function(t){var e;t.stop=(e=t.stop,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},ie=function(t,e){return null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e)))))},ae=function(){var t=d(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,function(t){return new Promise(function(e,n){var r=new MessageChannel,o=r.port1,i=r.port2;o.onmessage=function(t){var n=t.data;o.close(),i.close(),e(n)},o.onmessageerror=function(t){var e=t.data;o.close(),i.close(),n(e)},i.postMessage(t)})}(n);case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}(),ue=function(t,e){return t.connect=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return xt(t)?(e.connect.call(e,t,n,r),t):e.connect.call(e,t,n)},t.disconnect=function(){e.disconnect.apply(e,arguments)},t};function se(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function ce(t,e){for(var n,r,o=[0,0],i=t.length-1;i>=0;i-=1)r=e,(o=[(n=o)[0]*r[0]-n[1]*r[1],n[0]*r[1]+n[1]*r[0]])[0]+=t[i];return o}var le=function(){try{return new DOMException("","NotSupportedError")}catch(t){return t.code=9,t.name="NotSupportedError",t}},pe={numberOfChannels:1},fe={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,type:"sine"},he={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},de={disableNormalization:!1},ye={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},_e=function(){try{return new DOMException("","UnknownError")}catch(t){return t.name="UnknownError",t}},ve={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},me=function(t){return function(e,n){var r=M.get(e);if(void 0!==r)return r;var o=t.get(e);if(void 0!==o)return o;var i=n();return i instanceof Promise?(t.set(e,i),i.then(function(n){return t.delete(e),M.set(e,n),n})):(M.set(e,i),i)}}(new Map),ge="undefined"==typeof window?null:window,be=function(t){return null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null}(ge),we=function(t){return function(e){return null!==t&&e instanceof t}}(be),Oe=function(t){return null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null}(ge),xe=function(t,e,n){return function(r){if("closed"===r.state&&null!==e&&"webkitAudioContext"!==e.name){if(!t(r)){var o=k.get(r);if(void 0!==o)return o;var i=new e;return k.set(r,i),i}var a=k.get(r);if(void 0!==a)return a;if(null!==n){var u=new n(1,1,44100);return k.set(r,u),u}}return null}}(we,Oe,be),Te=function(t){return function(e,n){var r=t(e);return n(null!==r?r:e)}}(xe),ke=function(t,e,n){return function(r,o){var i=n(r,function(t){return t.createAnalyser()});if(te(i,o),!(o.maxDecibels>o.minDecibels))throw e();return Kt(i,o,"fftSize"),Kt(i,o,"maxDecibels"),Kt(i,o,"minDecibels"),Kt(i,o,"smoothingTimeConstant"),t(ee,function(){return ee(i)})||function(t){t.getFloatTimeDomainData=function(e){var n=new Uint8Array(e.length);t.getByteTimeDomainData(n);for(var r=Math.max(n.length,t.fftSize),o=0;o<r;o+=1)e[o]=.0078125*(n[o]-128);return e}}(i),i}}(me,$,Te),Ae=function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=z(r),U(i,o)||(a={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,fftSize:i.fftSize,maxDecibels:i.maxDecibels,minDecibels:i.minDecibels,smoothingTimeConstant:i.smoothingTimeConstant},i=t(o,a)),e.set(o,i),n.next=5,Y(r,o,i);case 5:return n.abrupt("return",i);case 6:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(ke),Ce=function(t){return function(e){return null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode}}(ge),Se=function(t){return function(e){return null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam}}(ge),Pe=function(t,e,n,o,a,s,c,p){return function(f){r(d,lt);var h=i(d);function d(e,n,r,o){var i;_(this,d),(i=h.call(this,r))._context=e,i._nativeAudioNode=r;var a=I(e);return p(a)||!0===t(Ot,function(){return Ot(a)})||function(t){var e,n=new Map;t.connect=function(t){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=xt(e)?t(e,r,o):t(e,r),a=n.get(e);return void 0===a?n.set(e,[{input:o,output:r}]):a.every(function(t){return t.input!==o||t.output!==r})&&a.push({input:o,output:r}),i}}(t.connect.bind(t)),t.disconnect=(e=t.disconnect,function(r,o,i){if(e.apply(t),void 0===r)n.clear();else if("number"==typeof r){var a,u=y(n);try{for(u.s();!(a=u.n()).done;){var s=x(a.value,2),c=s[0],l=s[1].filter(function(t){return t.output!==r});0===l.length?n.delete(c):n.set(c,l)}}catch(v){u.e(v)}finally{u.f()}}else if(n.has(r))if(void 0===o)n.delete(r);else{var p=n.get(r);if(void 0!==p){var f=p.filter(function(t){return t.output!==o&&(t.input!==i||void 0===i)});0===f.length?n.delete(r):n.set(r,f)}}var h,d=y(n);try{var _=function(){var e=x(h.value,2),n=e[0];e[1].forEach(function(e){xt(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)})};for(d.s();!(h=d.n()).done;)_()}catch(v){d.e(v)}finally{d.f()}})}(r),"active"===n&&l.add(u(i)),v.set(u(i),r),S.set(u(i),new Set),function(t,e,n,r){for(var o=[],i=0;i<r.numberOfInputs;i+=1)o.push(new Set);G(t).nodes.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:n})}(e,u(i),o,r),i}return m(d,[{key:"connect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=I(this._context),u=p(i);if(s(t)||c(t))throw n();if(pt(t)){var l=z(t);try{var f,h=dt(this._nativeAudioNode,l,e,r);if(u||gt(this)?(f=this._nativeAudioNode).disconnect.apply(f,g(h)):gt(t)&&et(t,"active"),ht(t)){var d=T.get(l);if(void 0===d){var y=i.createGain();y.connect(h[0],0,h[2]),T.set(l,new Map([[r,y]]))}else if(void 0===d.get(r)){var _=i.createGain();_.connect(h[0],0,h[2]),d.set(r,_)}}}catch(t){if(12===t.code)throw n();throw t}return a(this,t),u?function(t,e,n,r){var o=Q(e).activeInputs,i=Q(t).outputs;vt(i,[e,n,r],function(t){return t[0]===e&&t[1]===n&&t[2]===r},!0)&&Tt(o,t,[n,r,null],!0)}(this,t,e,r):function(t,e,n,r){var o=Q(e),i=o.activeInputs,a=o.passiveInputs,u=Q(t).outputs,s=tt(t),c=function(o){var u=z(e),s=z(t);if("active"===o){var c=St(a,t,n,r);Tt(i,t,c,!1),dt(s,u,n,r),gt(e)&&et(e,"active")}else if("passive"===o){var l=function(t,e,n,r){return bt(i[r],function(t){return t[0]===e&&t[1]===n})}(0,t,n,r);At(a,r,l,!1),_t(s,u,n,r),mt(e)&&wt(e,i)}};vt(u,[e,n,r],function(t){return t[0]===e&&t[1]===n&&t[2]===r},!0)&&(s.add(c),mt(t)?Tt(i,t,[n,r,c],!0):At(a,r,[t,n,c],!0))}(this,t,e,r),t}var v=ot(t);if("playbackRate"===v.name)throw o();try{this._nativeAudioNode.connect(v,e),(u||gt(this))&&this._nativeAudioNode.disconnect(v,e)}catch(t){if(12===t.code)throw n();throw t}a(this,t),u?function(t,e,n){var r=it(t.context,e).activeInputs,o=Q(t).outputs;vt(o,[e,n],function(t){return t[0]===e&&t[1]===n},!0)&&kt(r,t,[n,null],!0)}(this,t,e):function(t,e,n){var r=it(t.context,e),o=r.activeInputs,i=r.passiveInputs,a=Q(t).outputs,u=tt(t),s=function(r){var a=z(t),u=ot(e);if("active"===r){var s=Pt(i,t,n);kt(o,t,s,!1),a.connect(u,n)}else if("passive"===r){var c=function(t,e,n){return bt(o,function(t){return t[0]===e&&t[1]===n})}(0,t,n);Ct(i,c,!1),a.disconnect(u,n)}};vt(a,[e,n],function(t){return t[0]===e&&t[1]===n},!0)&&(u.add(s),mt(t)?kt(o,t,[n,s],!0):Ct(i,[t,n,s],!0))}(this,t,e)}},{key:"disconnect",value:function(t,r,o){if(void 0===t)!function(t){var e,n=Q(t),r=y(n.outputs);try{for(r.s();!(e=r.n()).done;){var o=e.value;ft(o)?Et.apply(void 0,[t].concat(g(o))):Dt.apply(void 0,[t].concat(g(o)))}}catch(i){r.e(i)}finally{r.f()}n.outputs.clear()}(this);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw e();!function(t,e){var n,r=Q(t),o=y(r.outputs);try{for(o.s();!(n=o.n()).done;){var i=n.value;i[1]===e&&(ft(i)?Et.apply(void 0,[t].concat(g(i))):Dt.apply(void 0,[t].concat(g(i))),r.outputs.delete(i))}}catch(a){o.e(a)}finally{o.f()}}(this,t)}else{if(void 0!==r&&(r<0||r>=this.numberOfOutputs))throw e();if(pt(t)&&void 0!==o&&(o<0||o>=t.numberOfInputs))throw e();if(0===function(t,e,n,r){var o=Q(t);return Array.from(o.outputs).filter(function(t){return!(t[0]!==e||void 0!==n&&t[1]!==n||void 0!==r&&t[2]!==r)}).reduce(function(e,n){return ft(n)?Et.apply(void 0,[t].concat(g(n))):Dt.apply(void 0,[t].concat(g(n))),o.outputs.delete(n),e+1},0)}(this,t,r,o))throw n()}}},{key:"channelCount",get:function(){return this._nativeAudioNode.channelCount},set:function(t){this._nativeAudioNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioNode.channelCountMode},set:function(t){this._nativeAudioNode.channelCountMode=t}},{key:"channelInterpretation",get:function(){return this._nativeAudioNode.channelInterpretation},set:function(t){this._nativeAudioNode.channelInterpretation=t}},{key:"context",get:function(){return this._context}},{key:"numberOfInputs",get:function(){return this._nativeAudioNode.numberOfInputs}},{key:"numberOfOutputs",get:function(){return this._nativeAudioNode.numberOfOutputs}}]),d}()}(me,$,Zt,le,function(t,e,n,r){return function o(i,a){var u=pt(a)?a:r(t,a);if("delayTime"in u)return!0;if(i===u)throw e();var s,c=y(n(u).outputs);try{for(c.s();!(s=c.n()).done;){if(o(i,s.value[0]))return!0}}catch(l){c.e(l)}finally{c.f()}return!1}}(O,le,Q,W),Ce,Se,we),je=function(t){return function(e){r(o,t);var n=i(o);function o(t,e,r,i){return _(this,o),n.call(this,t,e,r,i)}return o}()}(Pe),Ee=function(t,e,n,o,a){return function(u){r(c,a);var s=i(c);function c(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;_(this,c);var a=I(e),u=p(p({},L),i),l=n(a,u);return(r=s.call(this,e,"passive",l,o(a)?t():null))._nativeAnalyserNode=l,r}return m(c,[{key:"getByteFrequencyData",value:function(t){this._nativeAnalyserNode.getByteFrequencyData(t)}},{key:"getByteTimeDomainData",value:function(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}},{key:"getFloatFrequencyData",value:function(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}},{key:"getFloatTimeDomainData",value:function(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}},{key:"fftSize",get:function(){return this._nativeAnalyserNode.fftSize},set:function(t){this._nativeAnalyserNode.fftSize=t}},{key:"frequencyBinCount",get:function(){return this._nativeAnalyserNode.frequencyBinCount}},{key:"maxDecibels",get:function(){return this._nativeAnalyserNode.maxDecibels},set:function(t){var n=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=n,e()}},{key:"minDecibels",get:function(){return this._nativeAnalyserNode.minDecibels},set:function(t){var n=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=n,e()}},{key:"smoothingTimeConstant",get:function(){return this._nativeAnalyserNode.smoothingTimeConstant},set:function(t){this._nativeAnalyserNode.smoothingTimeConstant=t}}]),c}()}(Ae,$,ke,we,je),De=function(t){return null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null}(ge),Me=function(t){return function(e){return t[0]=e,t[0]}}(new Uint32Array(1)),Re=function(t,e){return function(n){n.copyFromChannel=function(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(i),u=t(o);if(u>=n.numberOfChannels)throw e();for(var s=n.length,c=n.getChannelData(u),l=r.length,p=a<0?-a:0;p+a<s&&p<l;p+=1)r[p]=c[p+a]},n.copyToChannel=function(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(i),u=t(o);if(u>=n.numberOfChannels)throw e();for(var s=n.length,c=n.getChannelData(u),l=r.length,p=a<0?-a:0;p+a<s&&p<l;p+=1)c[p+a]=r[p]}}}(Me,$),Ie=function(t){return function(e){var n;e.copyFromChannel=(n=e.copyFromChannel,function(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(i),u=t(o);if(a<e.length)return n.call(e,r,u,a)}),e.copyToChannel=function(n){return function(r,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=t(i),u=t(o);if(a<e.length)return n.call(e,r,u,a)}}(e.copyToChannel)}}(Me),Ve=function(t,e){return function(n){var r;n.copyFromChannel=(r=n.copyFromChannel,function(o,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=t(a),s=t(i);if(s>=n.numberOfChannels)throw e();return u<n.length&&n.length-u<o.length?r.call(n,o.subarray(0,n.length-u),s,u):r.call(n,o,s,u)}),n.copyToChannel=function(r){return function(o,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,u=t(a),s=t(i);if(s>=n.numberOfChannels)throw e();return u<n.length&&n.length-u<o.length?r.call(n,o.subarray(0,n.length-u),s,u):r.call(n,o,s,u)}}(n.copyToChannel)}}(Me,$),Ne=function(t,e,n,r,o,i,a,u,s){var c=null;return function(){function l(f){if(_(this,l),null===o)throw new Error("Missing the native OfflineAudioContext constructor.");var h=p(p({},K),f),d=h.length,y=h.numberOfChannels,v=h.sampleRate;null===c&&(c=new o(1,1,44100));var m=null!==r&&e(i,i)?new r({length:d,numberOfChannels:y,sampleRate:v}):c.createBuffer(y,d,v);if(0===m.numberOfChannels)throw n();return"function"!=typeof m.copyFromChannel?(a(m),J(m)):e(H,function(){return H(m)})?e(Z,function(){return Z(m)})||u(m):(s(m),u(m)),t.add(m),m}return m(l,null,[{key:Symbol.hasInstance,value:function(e){return null!==e&&"object"==P(e)&&Object.getPrototypeOf(e)===l.prototype||t.has(e)}}]),l}()}(h,me,le,De,be,function(t){return function(){if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch(t){return!1}return!0}}(De),Re,Ie,Ve),qe=function(t){return function(e){var n=t(e,function(t){return t.createOscillator()});try{n.start(-1)}catch(t){return t instanceof RangeError}return!1}}(Te),Fe=function(t){return function(e){var n=e.createBuffer(1,1,44100),r=t(e,function(t){return t.createBufferSource()});r.buffer=n,r.start(),r.stop();try{return r.stop(),!0}catch(t){return!1}}}(Te),Be=function(t){return function(e){var n=t(e,function(t){return t.createOscillator()});try{n.stop(-1)}catch(t){return t instanceof RangeError}return!1}}(Te),Le=function(t){return function(e,n){var r=t(n,function(t){return t.createGain()});e.connect(r);var o=function(t){return function(){t.call(e,r),e.removeEventListener("ended",o)}}(e.disconnect);e.addEventListener("ended",o),ue(e,r),e.stop=function(t){var n=!1;return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n)try{t.call(e,o)}catch(t){r.gain.setValueAtTime(0,o)}else t.call(e,o),n=!0}}(e.stop)}}(Te),We=function(t,e,n,r,o,i,a,u,s,c){return function(s){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=e(s,function(t){return t.createBufferSource()});return te(p,l),ne(p,l,"playbackRate"),Kt(p,l,"buffer"),Kt(p,l,"loop"),Kt(p,l,"loopEnd"),Kt(p,l,"loopStart"),t(n,function(){return n(s)})||function(t){var e,n;t.start=(e=t.start,n=!1,function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if(n)throw R();e.call(t,r,o,i),n=!0})}(p),t(r,r)||function(t,e){var n,r,o=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY;t.start=(n=t.start,r=t.stop,function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;if(n.call(t,a,u),s>=0&&s<Number.POSITIVE_INFINITY){var c=Math.max(a,e.currentTime),l=s/t.playbackRate.value;o=c+l,r.call(t,Math.min(o,i))}}),t.stop=function(n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i=Math.max(r,e.currentTime),n.call(t,Math.min(o,i))}}(t.stop)}(p,s),t(o,function(){return o(s)})||function(t){t.start=(e=t.start,function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0,i=t.buffer,a=null===i?r:Math.min(i.duration,r);null!==i&&a>i.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,o)});var e}(p),t(i,function(){return i(s)})||re(p),t(a,function(){return a(s)})||c(p,s),t(u,function(){return u(s)})||oe(p),p}}(me,Te,function(t){return function(e){var n=t(e,function(t){return t.createBufferSource()});n.start();try{n.start()}catch(t){return!0}return!1}}(Te),function(t){return function(){if(null===t)return Promise.resolve(!1);var e=new t(1,1,44100),n=e.createBuffer(1,1,e.sampleRate),r=e.createBufferSource();return n.getChannelData(0)[0]=1,r.buffer=n,r.start(0,0,0),r.connect(e.destination),new Promise(function(t){e.oncomplete=function(e){var n=e.renderedBuffer;t(0===n.getChannelData(0)[0])},e.startRendering()})}}(be),function(t){return function(e){var n=t(e,function(t){return t.createBufferSource()}),r=e.createBuffer(1,1,44100);n.buffer=r;try{n.start(0,1)}catch(t){return!1}return!0}}(Te),qe,Fe,Be,0,Le),ze=function(t){return function(){var e=new WeakMap,n=null,r=null;return{set start(t){n=t},set stop(t){r=t},render:function(o,i){var a,u=e.get(i);return void 0!==u?Promise.resolve(u):(a=d(regeneratorRuntime.mark(function o(i,a){var u,s,c,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=z(i),(s=U(u,a))||(l={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value},u=t(a,l),null!==n&&(c=u).start.apply(c,g(n)),null!==r&&u.stop(r)),e.set(a,u),!s){o.next=9;break}return o.next=7,ut(i.context,a,i.playbackRate);case 7:o.next=11;break;case 9:return o.next=11,st(i.context,a,i.playbackRate,u.playbackRate);case 11:return o.next=13,Y(i,a,u);case 13:return o.abrupt("return",u);case 14:case"end":return o.stop()}},o)})),function(t,e){return a.apply(this,arguments)})(o,i)}}}}(We),Ue=function(t,e,n,r,o,i,a,u,c){return function(t,l,p){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,d=new s.AutomationEventList(p.defaultValue),_=l?function(t){return{replay:function(e){var n,r=y(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if("exponentialRampToValue"===o.type){var i=o.endTime,a=o.value;e.exponentialRampToValueAtTime(a,i)}else if("linearRampToValue"===o.type){var u=o.endTime,s=o.value;e.linearRampToValueAtTime(s,u)}else if("setTarget"===o.type){var c=o.startTime,l=o.target,p=o.timeConstant;e.setTargetAtTime(l,c,p)}else if("setValue"===o.type){var f=o.startTime,h=o.value;e.setValueAtTime(h,f)}else{if("setValueCurve"!==o.type)throw new Error("Can't apply an unknown automation.");var d=o.duration,_=o.startTime,v=o.values;e.setValueCurveAtTime(v,_,d)}}}catch(m){r.e(m)}finally{r.f()}}}}(d):null,v={get defaultValue(){return p.defaultValue},get maxValue(){return null===f?p.maxValue:f},get minValue(){return null===h?p.minValue:h},get value(){return p.value},set value(e){p.value=e,v.setValueAtTime(e,t.context.currentTime)},cancelAndHoldAtTime:function(n){if("function"==typeof p.cancelAndHoldAtTime)null===_&&d.flush(t.context.currentTime),d.add(e(n)),p.cancelAndHoldAtTime(n);else{var r=Array.from(d).pop();null===_&&d.flush(t.context.currentTime),d.add(e(n));var o=Array.from(d).pop();p.cancelScheduledValues(n),r!==o&&void 0!==o&&("exponentialRampToValue"===o.type?p.exponentialRampToValueAtTime(o.value,o.endTime):"linearRampToValue"===o.type?p.linearRampToValueAtTime(o.value,o.endTime):"setValue"===o.type?p.setValueAtTime(o.value,o.startTime):"setValueCurve"===o.type&&p.setValueCurveAtTime(o.values,o.startTime,o.duration))}return v},cancelScheduledValues:function(e){return null===_&&d.flush(t.context.currentTime),d.add(n(e)),p.cancelScheduledValues(e),v},exponentialRampToValueAtTime:function(e,n){return null===_&&d.flush(t.context.currentTime),d.add(r(e,n)),p.exponentialRampToValueAtTime(e,n),v},linearRampToValueAtTime:function(e,n){return null===_&&d.flush(t.context.currentTime),d.add(o(e,n)),p.linearRampToValueAtTime(e,n),v},setTargetAtTime:function(e,n,r){return null===_&&d.flush(t.context.currentTime),d.add(i(e,n,r)),p.setTargetAtTime(e,n,r),v},setValueAtTime:function(e,n){return null===_&&d.flush(t.context.currentTime),d.add(a(e,n)),p.setValueAtTime(e,n),v},setValueCurveAtTime:function(e,n,r){if(null!==c&&"webkitAudioContext"===c.name){for(var o=n+r,i=t.context.sampleRate,a=Math.ceil(n*i),s=Math.floor(o*i),l=s-a,f=new Float32Array(l),h=0;h<l;h+=1){var y=(e.length-1)/r*((a+h)/i-n),m=Math.floor(y),g=Math.ceil(y);f[h]=m===g?e[m]:(1-(y-m))*e[m]+(1-(g-y))*e[g]}null===_&&d.flush(t.context.currentTime),d.add(u(f,n,r)),p.setValueCurveAtTime(f,n,r);var b=s/i;b<o&&v.setValueAtTime(f[f.length-1],b),v.setValueAtTime(e[e.length-1],o)}else null===_&&d.flush(t.context.currentTime),d.add(u(e,n,r)),p.setValueCurveAtTime(e,n,r);return v}};return w.set(v,p),O.set(v,t),function(t,e,n){G(t).params.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})}(t.context,v,_),v}}(0,s.createCancelAndHoldAutomationEvent,s.createCancelScheduledValuesAutomationEvent,s.createExponentialRampToValueAutomationEvent,s.createLinearRampToValueAutomationEvent,s.createSetTargetAutomationEvent,s.createSetValueAutomationEvent,s.createSetValueCurveAutomationEvent,Oe),Ge=function(t,e,n,o,a,s){return function(c){r(f,s);var l=i(f);function f(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rt;_(this,f);var s=I(n),c=p(p({},rt),i),h=o(s,c),d=a(s),y=d?t():null;return(r=l.call(this,n,"passive",h,y))._audioBufferSourceNodeRenderer=y,r._isBufferNullified=!1,r._isBufferSet=!1,r._nativeAudioBufferSourceNode=h,r._onended=null,r._playbackRate=e(u(r),d,h.playbackRate,3.4028234663852886e38,-3.4028234663852886e38),r}return m(f,[{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,n,r),null!==this._audioBufferSourceNodeRenderer)this._audioBufferSourceNodeRenderer.start=void 0===r?[e,n]:[e,n,r];else{et(this,"active");this._nativeAudioBufferSourceNode.addEventListener("ended",function e(){t._nativeAudioBufferSourceNode.removeEventListener("ended",e),setTimeout(function(){return et(t,"passive")},1e3)})}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}},{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer},set:function(t){try{this._nativeAudioBufferSourceNode.buffer=t}catch(e){if(null!==t||17!==e.code)throw e;if(null!==this._nativeAudioBufferSourceNode.buffer){for(var r=this._nativeAudioBufferSourceNode.buffer,o=r.numberOfChannels,i=0;i<o;i+=1)r.getChannelData(i).fill(0);this._isBufferNullified=!0}}if(null!==t){if(this._isBufferSet)throw n();this._isBufferSet=!0}}},{key:"onended",get:function(){return this._onended},set:function(t){var e=nt(this,t);this._nativeAudioBufferSourceNode.onended=e;var n=this._nativeAudioBufferSourceNode.onended;this._onended=n===e?t:n}},{key:"loop",get:function(){return this._nativeAudioBufferSourceNode.loop},set:function(t){this._nativeAudioBufferSourceNode.loop=t}},{key:"loopEnd",get:function(){return this._nativeAudioBufferSourceNode.loopEnd},set:function(t){this._nativeAudioBufferSourceNode.loopEnd=t}},{key:"loopStart",get:function(){return this._nativeAudioBufferSourceNode.loopStart},set:function(t){this._nativeAudioBufferSourceNode.loopStart=t}},{key:"playbackRate",get:function(){return this._playbackRate}}]),f}()}(ze,Ue,R,We,we,je),Qe=function(t,e,n,o,a,u){return function(s){r(l,t);var c=i(l);function l(t,n){var r;_(this,l);var o=I(t),i=u(o),s=a(o,n,i),p=i?e():null,f={audioWorkletGlobalScope:null,nodes:new WeakMap,params:new WeakMap};return b.set(t,f),(r=c.call(this,t,"passive",s,p))._isNodeOfNativeOfflineAudioContext=i,r._nativeAudioDestinationNode=s,r}return m(l,[{key:"channelCount",get:function(){return this._nativeAudioDestinationNode.channelCount},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}},{key:"channelCountMode",get:function(){return this._nativeAudioDestinationNode.channelCountMode},set:function(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=t}},{key:"maxChannelCount",get:function(){return this._nativeAudioDestinationNode.maxChannelCount}}]),l}()}(Pe,function(){var t=null;return{render:function(e,n){return null===t&&(t=(r=d(regeneratorRuntime.mark(function t(e,n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.destination,t.next=3,Y(e,n,r);case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}},t)})),function(t,e){return r.apply(this,arguments)})(e,n)),t;var r}}},$,R,function(t,e,n){var r=t.destination;return r.channelCount!==e&&(r.channelCount=e),n&&"explicit"!==r.channelCountMode&&(r.channelCountMode="explicit"),0===r.maxChannelCount&&Object.defineProperty(r,"maxChannelCount",{get:function(){return r.channelCount}}),r},we),Xe=function(t){return function(e,n){var r=t(e,function(t){return t.createBiquadFilter()});return te(r,n),ne(r,n,"Q"),ne(r,n,"detune"),ne(r,n,"frequency"),ne(r,n,"gain"),Kt(r,n,"type"),r}}(Te),Ye=function(t,e,n,o,a,s){return function(c){r(f,s);var l=i(f);function f(n){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bt;_(this,f);var s=I(n),c=p(p({},Bt),i),h=o(s,c),d=a(s);return(r=l.call(this,n,"passive",h,d?e():null))._Q=t(u(r),d,h.Q,3.4028234663852886e38,-3.4028234663852886e38),r._detune=t(u(r),d,h.detune,3.4028234663852886e38,-3.4028234663852886e38),r._frequency=t(u(r),d,h.frequency,3.4028234663852886e38,-3.4028234663852886e38),r._gain=t(u(r),d,h.gain,3.4028234663852886e38,-3.4028234663852886e38),r._nativeBiquadFilterNode=h,r}return m(f,[{key:"getFrequencyResponse",value:function(t,e,r){if(this._nativeBiquadFilterNode.getFrequencyResponse(t,e,r),t.length!==e.length||e.length!==r.length)throw n()}},{key:"Q",get:function(){return this._Q}},{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"gain",get:function(){return this._gain}},{key:"type",get:function(){return this._nativeBiquadFilterNode.type},set:function(t){this._nativeBiquadFilterNode.type=t}}]),f}()}(Ue,function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=z(r),(a=U(i,o))||(u={Q:i.Q.value,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,detune:i.detune.value,frequency:i.frequency.value,gain:i.gain.value,type:i.type},i=t(o,u)),e.set(o,i),!a){n.next=15;break}return n.next=7,ut(r.context,o,r.Q);case 7:return n.next=9,ut(r.context,o,r.detune);case 9:return n.next=11,ut(r.context,o,r.frequency);case 11:return n.next=13,ut(r.context,o,r.gain);case 13:n.next=23;break;case 15:return n.next=17,st(r.context,o,r.Q,i.Q);case 17:return n.next=19,st(r.context,o,r.detune,i.detune);case 19:return n.next=21,st(r.context,o,r.frequency,i.frequency);case 21:return n.next=23,st(r.context,o,r.gain,i.gain);case 23:return n.next=25,Y(r,o,i);case 25:return n.abrupt("return",i);case 26:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(Xe),Zt,Xe,we,je),Ze=function(t,e){return function(n,r){var o=t(n,function(t){return t.createChannelMerger(r.numberOfInputs)});te(o,r),1!==o.channelCount&&"explicit"!==o.channelCountMode&&e(n,o);try{o.channelCount=void 0===r.numberOfInputs?6:r.numberOfInputs,e(n,o)}catch(t){}return o}}(Te,function(t,e){return function(n,r){var o=e(n,function(t){return t.createBufferSource()});r.channelCount=1,r.channelCountMode="explicit";for(var i=r.numberOfInputs,a=0;a<i;a+=1)o.connect(r,0,a);Object.defineProperty(r,"channelCount",{get:function(){return 1},set:function(){throw t()}}),Object.defineProperty(r,"channelCountMode",{get:function(){return"explicit"},set:function(){throw t()}})}}(R,Te)),He=function(t,e,n,o){return function(a){r(s,o);var u=i(s);function s(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;_(this,s);var i=I(r),a=p(p({},Lt),o);return u.call(this,r,"passive",e(i,a),n(i)?t():null)}return s}()}(function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=z(r),U(i,o)||(a={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfInputs:i.numberOfInputs},i=t(o,a)),e.set(o,i),n.next=5,Y(r,o,i);case 5:return n.abrupt("return",i);case 6:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(Ze),Ze,we,je),$e=function(t){return function(e,n){var r=t(e,function(t){return t.createChannelSplitter(n.numberOfOutputs)});return te(r,n),function(t){var e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:function(){return e},set:function(t){if(t!==e)throw R()}}),Object.defineProperty(t,"channelCountMode",{get:function(){return"explicit"},set:function(t){if("explicit"!==t)throw R()}}),Object.defineProperty(t,"channelInterpretation",{get:function(){return"discrete"},set:function(t){if("discrete"!==t)throw R()}})}(r),r}}(Te),Je=function(t,e,n,o){return function(a){r(s,o);var u=i(s);function s(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt;_(this,s);var i=I(r),a=function(t){return p(p({},t),{},{channelCount:t.numberOfOutputs})}(p(p({},Wt),o));return u.call(this,r,"passive",e(i,a),n(i)?t():null)}return s}()}(function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=z(r),U(i,o)||(a={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,numberOfOutputs:i.numberOfOutputs},i=t(o,a)),e.set(o,i),n.next=5,Y(r,o,i);case 5:return n.abrupt("return",i);case 6:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}($e),$e,we,je),Ke=function(t){return function(e,n){var r=t(e,function(t){return t.createGain()});return te(r,n),ne(r,n,"gain"),r}}(Te),tn=function(t,e,n,r,o){return function(i,a){if(void 0===i.createConstantSource)return n(i,a);var u=e(i,function(t){return t.createConstantSource()});return te(u,a),ne(u,a,"offset"),t(r,function(){return r(i)})||re(u),t(o,function(){return o(i)})||oe(u),u}}(me,Te,function(t,n){return function(r,o){var i=o.offset,a=e(o,["offset"]),u=t(r),s=r.createBuffer(1,2,r.sampleRate),c=n(r,p(p({},a),{},{gain:i})),l=s.getChannelData(0);return l[0]=1,l[1]=1,u.buffer=s,u.loop=!0,u.connect(c),ue({get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return u.onended},set onended(t){u.onended=t},addEventListener:function(){return u.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return u.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return u.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.start.call(u,t)},stop:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u.stop.call(u,t)}},c)}}(We,Ke),qe,Be),en=function(t,e,n,o,a){return function(s){r(l,a);var c=i(l);function l(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zt;_(this,l);var s=I(r),f=p(p({},zt),a),h=n(s,f),d=o(s),y=d?e():null;return(i=c.call(this,r,"passive",h,y))._constantSourceNodeRenderer=y,i._nativeConstantSourceNode=h,i._offset=t(u(i),d,h.offset,3.4028234663852886e38,-3.4028234663852886e38),i._onended=null,i}return m(l,[{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer)this._constantSourceNodeRenderer.start=e;else{et(this,"active");this._nativeConstantSourceNode.addEventListener("ended",function e(){t._nativeConstantSourceNode.removeEventListener("ended",e),setTimeout(function(){return et(t,"passive")},1e3)})}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}},{key:"offset",get:function(){return this._offset}},{key:"onended",get:function(){return this._onended},set:function(t){var e=nt(this,t);this._nativeConstantSourceNode.onended=e;var n=this._nativeConstantSourceNode.onended;this._onended=n===e?t:n}}]),l}()}(Ue,function(t){return function(){var e=new WeakMap,n=null,r=null;return{set start(t){n=t},set stop(t){r=t},render:function(o,i){var a,u=e.get(i);return void 0!==u?Promise.resolve(u):(a=d(regeneratorRuntime.mark(function o(i,a){var u,s,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(u=z(i),(s=U(u,a))||(c={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value},u=t(a,c),null!==n&&u.start(n),null!==r&&u.stop(r)),e.set(a,u),!s){o.next=9;break}return o.next=7,ut(i.context,a,i.offset);case 7:o.next=11;break;case 9:return o.next=11,st(i.context,a,i.offset,u.offset);case 11:return o.next=13,Y(i,a,u);case 13:return o.abrupt("return",u);case 14:case"end":return o.stop()}},o)})),function(t,e){return a.apply(this,arguments)})(o,i)}}}}(tn),tn,we,je),nn=function(t,e){return function(n,r){var o=t(n,function(t){return t.createConvolver()});if(te(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),Kt(o,r,"buffer"),2!==r.channelCount)throw e();if(Object.defineProperty(o,"channelCount",{get:function(){return r.channelCount},set:function(t){if(t!==r.channelCount)throw e()}}),"clamped-max"!==r.channelCountMode)throw e();return Object.defineProperty(o,"channelCountMode",{get:function(){return r.channelCountMode},set:function(t){if(t!==r.channelCountMode)throw e()}}),o}}(Te,le),rn=function(t,e,n,o){return function(a){r(s,o);var u=i(s);function s(r){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ut;_(this,s);var a=I(r),c=p(p({},Ut),i),l=e(a,c);return(o=u.call(this,r,"passive",l,n(a)?t():null))._isBufferNullified=!1,o._nativeConvolverNode=l,o}return m(s,[{key:"buffer",get:function(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer},set:function(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){var e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0}else this._isBufferNullified=!1}},{key:"normalize",get:function(){return this._nativeConvolverNode.normalize},set:function(t){this._nativeConvolverNode.normalize=t}}]),s}()}(function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=z(r),U(i,o)||(a={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,disableNormalization:!i.normalize},i=t(o,a)),e.set(o,i),n.next=5,Y(r,o,i);case 5:return n.abrupt("return",i);case 6:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(nn),nn,we,je),on=function(t){return function(e,n){var r=t(e,function(t){return t.createDelay(n.maxDelayTime)});return te(r,n),ne(r,n,"delayTime"),r}}(Te),an=function(t,e,n,o,a){return function(s){r(l,a);var c=i(l);function l(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gt;_(this,l);var s=I(r),f=p(p({},Gt),a),h=n(s,f),d=o(s);return(i=c.call(this,r,"passive",h,d?e(f.maxDelayTime):null))._delayTime=t(u(i),d,h.delayTime,f.maxDelayTime,0),i}return m(l,[{key:"delayTime",get:function(){return this._delayTime}}]),l}()}(Ue,function(t){return function(e){var n=new WeakMap;return{render:function(r,o){var i,a=n.get(o);return void 0!==a?Promise.resolve(a):(i=d(regeneratorRuntime.mark(function r(o,i){var a,u,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=z(o),(u=U(a,i))||(s={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,delayTime:a.delayTime.value,maxDelayTime:e},a=t(i,s)),n.set(i,a),!u){r.next=9;break}return r.next=7,ut(o.context,i,o.delayTime);case 7:r.next=11;break;case 9:return r.next=11,st(o.context,i,o.delayTime,a.delayTime);case 11:return r.next=13,Y(o,i,a);case 13:return r.abrupt("return",a);case 14:case"end":return r.stop()}},r)})),function(t,e){return i.apply(this,arguments)})(r,o)}}}}(on),on,we,je),un=function(t,e){return function(n,r){var o=t(n,function(t){return t.createDynamicsCompressor()});if(te(o,r),r.channelCount>2)throw e();if("max"===r.channelCountMode)throw e();return ne(o,r,"attack"),ne(o,r,"knee"),ne(o,r,"ratio"),ne(o,r,"release"),ne(o,r,"threshold"),o}}(Te,le),sn=function(t,e,n,o,a,s){return function(c){r(f,s);var l=i(f);function f(r){var o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xt;_(this,f);var s=I(r),c=p(p({},Xt),i),h=n(s,c),d=a(s);return(o=l.call(this,r,"passive",h,d?e():null))._attack=t(u(o),d,h.attack,1,0),o._knee=t(u(o),d,h.knee,40,0),o._nativeDynamicsCompressorNode=h,o._ratio=t(u(o),d,h.ratio,20,1),o._release=t(u(o),d,h.release,1,0),o._threshold=t(u(o),d,h.threshold,0,-100),o}return m(f,[{key:"attack",get:function(){return this._attack}},{key:"channelCount",get:function(){return this._nativeDynamicsCompressorNode.channelCount},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,o()}},{key:"channelCountMode",get:function(){return this._nativeDynamicsCompressorNode.channelCountMode},set:function(t){var e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,o()}},{key:"knee",get:function(){return this._knee}},{key:"ratio",get:function(){return this._ratio}},{key:"reduction",get:function(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}},{key:"release",get:function(){return this._release}},{key:"threshold",get:function(){return this._threshold}}]),f}()}(Ue,function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=z(r),(a=U(i,o))||(u={attack:i.attack.value,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,knee:i.knee.value,ratio:i.ratio.value,release:i.release.value,threshold:i.threshold.value},i=t(o,u)),e.set(o,i),!a){n.next=17;break}return n.next=7,ut(r.context,o,r.attack);case 7:return n.next=9,ut(r.context,o,r.knee);case 9:return n.next=11,ut(r.context,o,r.ratio);case 11:return n.next=13,ut(r.context,o,r.release);case 13:return n.next=15,ut(r.context,o,r.threshold);case 15:n.next=27;break;case 17:return n.next=19,st(r.context,o,r.attack,i.attack);case 19:return n.next=21,st(r.context,o,r.knee,i.knee);case 21:return n.next=23,st(r.context,o,r.ratio,i.ratio);case 23:return n.next=25,st(r.context,o,r.release,i.release);case 25:return n.next=27,st(r.context,o,r.threshold,i.threshold);case 27:return n.next=29,Y(r,o,i);case 29:return n.abrupt("return",i);case 30:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(un),un,le,we,je),cn=function(t,e,n,o,a){return function(s){r(l,a);var c=i(l);function l(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yt;_(this,l);var s=I(r),f=p(p({},Yt),a),h=n(s,f),d=o(s);return(i=c.call(this,r,"passive",h,d?e():null))._gain=t(u(i),d,h.gain,3.4028234663852886e38,-3.4028234663852886e38),i}return m(l,[{key:"gain",get:function(){return this._gain}}]),l}()}(Ue,function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=z(r),(a=U(i,o))||(u={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:i.gain.value},i=t(o,u)),e.set(o,i),!a){n.next=9;break}return n.next=7,ut(r.context,o,r.gain);case 7:n.next=11;break;case 9:return n.next=11,st(r.context,o,r.gain,i.gain);case 11:return n.next=13,Y(r,o,i);case 13:return n.abrupt("return",i);case 14:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(Ke),Ke,we,je),ln=function(t){return function(e,n,r,o){return t(e,function(t){return t.createScriptProcessor(n,r,o)})}}(Te),pn=function(t,e,n,r){return function(o,i,a){var u=a.channelCount,s=a.channelCountMode,c=a.channelInterpretation,l=a.feedback,p=a.feedforward,f=ie(i,o.sampleRate),h=l.length,d=p.length,y=Math.min(h,d);if(0===l.length||l.length>20)throw r();if(0===l[0])throw e();if(0===p.length||p.length>20)throw r();if(0===p[0])throw e();if(1!==l[0]){for(var _=0;_<d;_+=1)p[_]/=l[0];for(var v=1;v<h;v+=1)l[v]/=l[0]}var m=n(o,f,u,u);m.channelCount=u,m.channelCountMode=s,m.channelInterpretation=c;for(var g=[],b=[],w=[],O=0;O<u;O+=1){g.push(0);var x=new Float32Array(32),T=new Float32Array(32);x.fill(0),T.fill(0),b.push(x),w.push(T)}m.onaudioprocess=function(t){for(var e=t.inputBuffer,n=t.outputBuffer,r=e.numberOfChannels,o=0;o<r;o+=1){var i=e.getChannelData(o),a=n.getChannelData(o);g[o]=$t(l,h,p,d,y,b[o],w[o],g[o],32,i,a)}};var k=o.sampleRate/2;return ue({get bufferSize(){return f},get channelCount(){return m.channelCount},set channelCount(t){m.channelCount=t},get channelCountMode(){return m.channelCountMode},set channelCountMode(t){m.channelCountMode=t},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(t){m.channelInterpretation=t},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener:function(){return m.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return m.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse:function(e,n,r){if(e.length!==n.length||n.length!==r.length)throw t();for(var o=e.length,i=0;i<o;i+=1){var a=-Math.PI*(e[i]/k),u=[Math.cos(a),Math.sin(a)],s=se(ce(p,u),ce(l,u));n[i]=Math.sqrt(s[0]*s[0]+s[1]*s[1]),r[i]=Math.atan2(s[1],s[0])}},removeEventListener:function(){return m.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},m)}}(Zt,R,ln,le),fn=function(t,e,n,r){return function(o){return t(Jt,function(){return Jt(o)})?Promise.resolve(t(r,r)).then(function(t){if(!t){var e=n(o,512,0,1);o.oncomplete=function(){e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=function(){return o.currentTime},e.connect(o.destination)}return o.startRendering()}):new Promise(function(t){var n=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=function(e){n.disconnect(),t(e.renderedBuffer)},n.connect(o.destination),o.startRendering()})}}(me,Ke,ln,function(t,e){return function(){if(null===e)return Promise.resolve(!1);var n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(function(t){n.oncomplete=function(){r.disconnect(),t(0!==n.currentTime)},n.startRendering()})}}(Ke,be)),hn=function(t,e,n,r){return function(o,i){var a=new WeakMap,u=function(){var u=d(regeneratorRuntime.mark(function u(s,c){var l,p,f,h,d;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(l=z(s),p=null,f=U(l,c),void 0===c.createIIRFilter?p=t(c):f||(l=e(c,function(t){return t.createIIRFilter(i,o)})),a.set(c,null===p?l:p),null===p){u.next=12;break}if(null!==n){u.next=5;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 5:return h=new n(s.context.destination.channelCount,s.context.length,c.sampleRate),u.next=8,Y(s,h,h.destination);case 8:return u.next=10,r(h);case 10:return d=u.sent,u.abrupt("return",(p.buffer=function(t,e,n,r){var o=n.length,i=r.length,a=Math.min(o,i);if(1!==n[0]){for(var u=0;u<o;u+=1)r[u]/=n[0];for(var s=1;s<i;s+=1)n[s]/=n[0]}for(var c=new Float32Array(32),l=new Float32Array(32),p=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels,h=0;h<f;h+=1){var d=t.getChannelData(h),y=p.getChannelData(h);c.fill(0),l.fill(0),$t(n,o,r,i,a,c,l,0,32,d,y)}return p}(d,c,o,i),p.start(0),p));case 12:return u.next=14,Y(s,c,l);case 14:return u.abrupt("return",l);case 15:case"end":return u.stop()}},u)}));return function(t,e){return u.apply(this,arguments)}}();return{render:function(t,e){var n=a.get(e);return void 0!==n?Promise.resolve(n):u(t,e)}}}}(We,Te,be,fn),dn=function(t,e,n,o){return function(a){r(s,o);var u=i(s);function s(r,o){var i;_(this,s);var a=I(r),c=n(a),l=p(p({},Ht),o),f=t(a,c?null:r.baseLatency,l);return i=u.call(this,r,"passive",f,c?e(l.feedback,l.feedforward):null),function(t){var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,function(n,r,o){if(n.length!==r.length||r.length!==o.length)throw Zt();return e.call(t,n,r,o)})}(f),i._nativeIIRFilterNode=f,i}return m(s,[{key:"getFrequencyResponse",value:function(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}}]),s}()}(function(t,e){return function(n,r,o){if(void 0===n.createIIRFilter)return e(n,r,o);var i=t(n,function(t){return t.createIIRFilter(o.feedforward,o.feedback)});return te(i,o),i}}(Te,pn),hn,we,je),yn=function(t,e){return function(n){r(a,lt);var o=i(a);function a(n,r){var i;_(this,a),(i=o.call(this,n))._nativeContext=n,A.set(u(i),n);var s=n.sampleRate;return Object.defineProperty(n,"sampleRate",{get:function(){return s}}),i._destination=new t(u(i),r),i._listener=e(u(i),n),i._onstatechange=null,i}return m(a,[{key:"currentTime",get:function(){return this._nativeContext.currentTime}},{key:"destination",get:function(){return this._destination}},{key:"listener",get:function(){return this._listener}},{key:"onstatechange",get:function(){return this._onstatechange},set:function(t){var e=nt(this,t);this._nativeContext.onstatechange=e;var n=this._nativeContext.onstatechange;this._onstatechange=n===e?t:n}},{key:"sampleRate",get:function(){return this._nativeContext.sampleRate}},{key:"state",get:function(){return this._nativeContext.state}}]),a}()}(Qe,function(t,e,n,r,o){return function(i,a){var u=a.listener,s=void 0===u.forwardX?function(){var s=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),c=o(a),l=r(a,256,9,0),p=function(e,r){var o=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});return o.connect(s,0,e),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:function(){return r}}),t({context:i},c,o.offset,3.4028234663852886e38,-3.4028234663852886e38)},f=[0,0,-1,0,1,0],h=[0,0,0];return l.onaudioprocess=function(t){var e=t.inputBuffer,n=[e.getChannelData(0)[0],e.getChannelData(1)[0],e.getChannelData(2)[0],e.getChannelData(3)[0],e.getChannelData(4)[0],e.getChannelData(5)[0]];n.some(function(t,e){return t!==f[e]})&&(u.setOrientation.apply(u,n),f=n);var r=[e.getChannelData(6)[0],e.getChannelData(7)[0],e.getChannelData(8)[0]];r.some(function(t,e){return t!==h[e]})&&(u.setPosition.apply(u,r),h=r)},s.connect(l),{forwardX:p(0,0),forwardY:p(1,0),forwardZ:p(2,-1),positionX:p(6,0),positionY:p(7,0),positionZ:p(8,0),upX:p(3,0),upY:p(4,1),upZ:p(5,0)}}():u,c=s.forwardX,l=s.forwardY,p=s.forwardZ,f=s.positionX,h=s.positionY,d=s.positionZ,y=s.upX,_=s.upY,v=s.upZ;return{get forwardX(){return c},get forwardY(){return l},get forwardZ(){return p},get positionX(){return f},get positionY(){return h},get positionZ(){return d},get upX(){return y},get upY(){return _},get upZ(){return v}}}}(Ue,Ze,tn,ln,we)),_n=function(t,e,n,r,o,i){return function(a,u){var s=e(a,function(t){return t.createOscillator()});return te(s,u),ne(s,u,"detune"),ne(s,u,"frequency"),void 0!==u.periodicWave?s.setPeriodicWave(u.periodicWave):Kt(s,u,"type"),t(n,function(){return n(a)})||re(s),t(r,function(){return r(a)})||i(s,a),t(o,function(){return o(a)})||oe(s),s}}(me,Te,qe,Fe,Be,Le),vn=function(t){return function(){var e=new WeakMap,n=null,r=null,o=null;return{set periodicWave(t){n=t},set start(t){r=t},set stop(t){o=t},render:function(i,a){var u,s=e.get(a);return void 0!==s?Promise.resolve(s):(u=d(regeneratorRuntime.mark(function i(a,u){var s,c,l;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s=z(a),(c=U(s,u))||(l={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,detune:s.detune.value,frequency:s.frequency.value,periodicWave:null===n?void 0:n,type:s.type},s=t(u,l),null!==r&&s.start(r),null!==o&&s.stop(o)),e.set(u,s),!c){i.next=11;break}return i.next=7,ut(a.context,u,a.detune);case 7:return i.next=9,ut(a.context,u,a.frequency);case 9:i.next=15;break;case 11:return i.next=13,st(a.context,u,a.detune,s.detune);case 13:return i.next=15,st(a.context,u,a.frequency,s.frequency);case 15:return i.next=17,Y(a,u,s);case 17:return i.abrupt("return",s);case 18:case"end":return i.stop()}},i)})),function(t,e){return u.apply(this,arguments)})(i,a)}}}}(_n),mn=function(t,e,n,o,a,s){return function(c){r(f,s);var l=i(f);function f(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;_(this,f);var s=I(e),c=p(p({},fe),i),h=n(s,c),d=a(s),y=d?o():null,v=e.sampleRate/2;return(r=l.call(this,e,"passive",h,y))._detune=t(u(r),d,h.detune,153600,-153600),r._frequency=t(u(r),d,h.frequency,v,-v),r._nativeOscillatorNode=h,r._onended=null,r._oscillatorNodeRenderer=y,null!==r._oscillatorNodeRenderer&&void 0!==c.periodicWave&&(r._oscillatorNodeRenderer.periodicWave=c.periodicWave),r}return m(f,[{key:"setPeriodicWave",value:function(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer)this._oscillatorNodeRenderer.start=e;else{et(this,"active");this._nativeOscillatorNode.addEventListener("ended",function e(){t._nativeOscillatorNode.removeEventListener("ended",e),setTimeout(function(){return et(t,"passive")},1e3)})}}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}},{key:"detune",get:function(){return this._detune}},{key:"frequency",get:function(){return this._frequency}},{key:"onended",get:function(){return this._onended},set:function(t){var e=nt(this,t);this._nativeOscillatorNode.onended=e;var n=this._nativeOscillatorNode.onended;this._onended=n===e?t:n}},{key:"type",get:function(){return this._nativeOscillatorNode.type},set:function(t){if(this._nativeOscillatorNode.type=t,"custom"===t)throw e();null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}}]),f}()}(Ue,R,_n,vn,we,je),gn=function(t,n,r){return function(o,i){var a=i.curve,u=i.oversample,s=e(i,["curve","oversample"]),c=n(o,function(t){return t.createWaveShaper()}),l=n(o,function(t){return t.createWaveShaper()});te(c,s),te(l,s);var f=r(o,p(p({},s),{},{gain:1})),h=r(o,p(p({},s),{},{gain:-1})),d=r(o,p(p({},s),{},{gain:1})),y=r(o,p(p({},s),{},{gain:-1}));f.connect(c),c.connect(d),f.connect(h),h.connect(l),l.connect(y),y.connect(d);var _=null,v={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){f.channelCount=t,h.channelCount=t,c.channelCount=t,d.channelCount=t,l.channelCount=t,y.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){f.channelCountMode=t,h.channelCountMode=t,c.channelCountMode=t,d.channelCountMode=t,l.channelCountMode=t,y.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){f.channelInterpretation=t,h.channelInterpretation=t,c.channelInterpretation=t,d.channelInterpretation=t,l.channelInterpretation=t,y.channelInterpretation=t},get context(){return c.context},get curve(){return _},set curve(e){if(null!==a&&a.length<2)throw t();if(null===e)c.curve=e,l.curve=e;else{var n=e.length,r=new Float32Array(n+2-n%2),o=new Float32Array(n+2-n%2);r[0]=e[0],o[0]=-e[n-1];for(var i=Math.ceil((n+1)/2),u=(n+1)/2-1,s=1;s<i;s+=1){var p=s/i*u,f=Math.floor(p),h=Math.ceil(p);r[s]=f===h?e[f]:(1-(p-f))*e[f]+(1-(h-p))*e[h],o[s]=f===h?-e[n-1-f]:-(1-(p-f))*e[n-1-f]-(1-(h-p))*e[n-1-h]}r[i]=n%2==1?e[i-1]:(e[i-2]+e[i-1])/2,c.curve=r,l.curve=o}_=e},get inputs(){return[f]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(t){c.oversample=t,l.oversample=t},addEventListener:function(){return f.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return f.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return f.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};return a!==v.curve&&(v.curve=a),u!==v.oversample&&(v.oversample=u),ue(v,d)}}(R,Te,Ke),bn=function(t,e,n){return function(r,o){var i=e(r,function(t){return t.createWaveShaper()});try{return i.curve=new Float32Array([1]),n(r,o)}catch(t){}te(i,o);var a=o.curve;if(null!==a&&a.length<2)throw t();return Kt(i,o,"curve"),Kt(i,o,"oversample"),i}}(R,Te,gn),wn=function(t,e){return function(n,r){var o=t(n,function(t){return t.createPanner()});return void 0===o.orientationX?e(n,r):(te(o,r),ne(o,r,"orientationX"),ne(o,r,"orientationY"),ne(o,r,"orientationZ"),ne(o,r,"positionX"),ne(o,r,"positionY"),ne(o,r,"positionZ"),Kt(o,r,"coneInnerAngle"),Kt(o,r,"coneOuterAngle"),Kt(o,r,"coneOuterGain"),Kt(o,r,"distanceModel"),Kt(o,r,"maxDistance"),Kt(o,r,"panningModel"),Kt(o,r,"refDistance"),Kt(o,r,"rolloffFactor"),o)}}(Te,function(t,n,r,o,i,a,u){return function(s,c){var l=c.coneInnerAngle,f=c.coneOuterAngle,h=c.coneOuterGain,d=c.distanceModel,y=c.maxDistance,_=c.orientationX,v=c.orientationY,m=c.orientationZ,g=c.panningModel,b=c.positionX,w=c.positionY,O=c.positionZ,x=c.refDistance,T=c.rolloffFactor,k=e(c,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]),A=n(s,function(t){return t.createPanner()});if(k.channelCount>2)throw u();if("max"===k.channelCountMode)throw u();te(A,k);var C={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},S=r(s,p(p({},C),{},{channelInterpretation:"speakers",numberOfInputs:6})),P=o(s,p(p({},k),{},{gain:1})),j=o(s,p(p({},C),{},{gain:1})),E=o(s,p(p({},C),{},{gain:0})),D=o(s,p(p({},C),{},{gain:0})),M=o(s,p(p({},C),{},{gain:0})),R=o(s,p(p({},C),{},{gain:0})),I=o(s,p(p({},C),{},{gain:0})),V=i(s,256,6,0),N=a(s,p(p({},C),{},{curve:new Float32Array([1,1]),oversample:"none"})),q=[1,0,0],F=[0,0,0];V.onaudioprocess=function(t){var e=t.inputBuffer,n=[e.getChannelData(0)[0],e.getChannelData(1)[0],e.getChannelData(2)[0]];n.some(function(t,e){return t!==q[e]})&&(A.setOrientation.apply(A,n),q=n);var r=[e.getChannelData(6)[0],e.getChannelData(7)[0],e.getChannelData(8)[0]];r.some(function(t,e){return t!==F[e]})&&(A.setPosition.apply(A,r),F=r)},P.connect(A),dt(P,N,0,0),N.connect(j),N.connect(E),N.connect(D),N.connect(M),N.connect(R),N.connect(I),j.connect(S),E.connect(S),D.connect(S),M.connect(S),R.connect(S),I.connect(S),S.connect(V),Object.defineProperty(E.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(D.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(M.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(R.gain,"defaultValue",{get:function(){return 0}}),Object.defineProperty(I.gain,"defaultValue",{get:function(){return 0}});var B={get bufferSize(){},get channelCount(){return A.channelCount},set channelCount(t){if(t>2)throw u();P.channelCount=t,A.channelCount=t},get channelCountMode(){return A.channelCountMode},set channelCountMode(t){if("max"===t)throw u();P.channelCountMode=t,A.channelCountMode=t},get channelInterpretation(){return A.channelInterpretation},set channelInterpretation(t){P.channelInterpretation=t,A.channelInterpretation=t},get coneInnerAngle(){return A.coneInnerAngle},set coneInnerAngle(t){A.coneInnerAngle=t},get coneOuterAngle(){return A.coneOuterAngle},set coneOuterAngle(t){A.coneOuterAngle=t},get coneOuterGain(){return A.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();A.coneOuterGain=e},get context(){return A.context},get distanceModel(){return A.distanceModel},set distanceModel(t){A.distanceModel=t},get inputs(){return[P]},get maxDistance(){return A.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;A.maxDistance=t},get numberOfInputs(){return A.numberOfInputs},get numberOfOutputs(){return A.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return E.gain},get orientationZ(){return D.gain},get panningModel(){return A.panningModel},set panningModel(t){if(A.panningModel=t,A.panningModel!==t&&"HRTF"===t)throw u()},get positionX(){return M.gain},get positionY(){return R.gain},get positionZ(){return I.gain},get refDistance(){return A.refDistance},set refDistance(t){if(t<0)throw new RangeError;A.refDistance=t},get rolloffFactor(){return A.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;A.rolloffFactor=t},addEventListener:function(){return P.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return P.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return P.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};return l!==B.coneInnerAngle&&(B.coneInnerAngle=l),f!==B.coneOuterAngle&&(B.coneOuterAngle=f),h!==B.coneOuterGain&&(B.coneOuterGain=h),d!==B.distanceModel&&(B.distanceModel=d),y!==B.maxDistance&&(B.maxDistance=y),_!==B.orientationX.value&&(B.orientationX.value=_),v!==B.orientationY.value&&(B.orientationY.value=v),m!==B.orientationZ.value&&(B.orientationZ.value=m),g!==B.panningModel&&(B.panningModel=g),b!==B.positionX.value&&(B.positionX.value=b),w!==B.positionY.value&&(B.positionY.value=w),O!==B.positionZ.value&&(B.positionZ.value=O),x!==B.refDistance&&(B.refDistance=x),T!==B.rolloffFactor&&(B.rolloffFactor=T),ue(B,A)}}(R,Te,Ze,Ke,ln,bn,le)),On=function(t,e,n,o,a){return function(s){r(l,a);var c=i(l);function l(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he;_(this,l);var s=I(r),f=p(p({},he),a),h=e(s,f),d=o(s);return(i=c.call(this,r,"passive",h,d?n():null))._nativePannerNode=h,i._orientationX=t(u(i),d,h.orientationX,3.4028234663852886e38,-3.4028234663852886e38),i._orientationY=t(u(i),d,h.orientationY,3.4028234663852886e38,-3.4028234663852886e38),i._orientationZ=t(u(i),d,h.orientationZ,3.4028234663852886e38,-3.4028234663852886e38),i._positionX=t(u(i),d,h.positionX,3.4028234663852886e38,-3.4028234663852886e38),i._positionY=t(u(i),d,h.positionY,3.4028234663852886e38,-3.4028234663852886e38),i._positionZ=t(u(i),d,h.positionZ,3.4028234663852886e38,-3.4028234663852886e38),i}return m(l,[{key:"coneInnerAngle",get:function(){return this._nativePannerNode.coneInnerAngle},set:function(t){this._nativePannerNode.coneInnerAngle=t}},{key:"coneOuterAngle",get:function(){return this._nativePannerNode.coneOuterAngle},set:function(t){this._nativePannerNode.coneOuterAngle=t}},{key:"coneOuterGain",get:function(){return this._nativePannerNode.coneOuterGain},set:function(t){this._nativePannerNode.coneOuterGain=t}},{key:"distanceModel",get:function(){return this._nativePannerNode.distanceModel},set:function(t){this._nativePannerNode.distanceModel=t}},{key:"maxDistance",get:function(){return this._nativePannerNode.maxDistance},set:function(t){this._nativePannerNode.maxDistance=t}},{key:"orientationX",get:function(){return this._orientationX}},{key:"orientationY",get:function(){return this._orientationY}},{key:"orientationZ",get:function(){return this._orientationZ}},{key:"panningModel",get:function(){return this._nativePannerNode.panningModel},set:function(t){this._nativePannerNode.panningModel=t}},{key:"positionX",get:function(){return this._positionX}},{key:"positionY",get:function(){return this._positionY}},{key:"positionZ",get:function(){return this._positionZ}},{key:"refDistance",get:function(){return this._nativePannerNode.refDistance},set:function(t){this._nativePannerNode.refDistance=t}},{key:"rolloffFactor",get:function(){return this._nativePannerNode.rolloffFactor},set:function(t){this._nativePannerNode.rolloffFactor=t}}]),l}()}(Ue,wn,function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=z(r),(a=U(i,o))||(u={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,orientationX:i.orientationX.value,orientationY:i.orientationY.value,orientationZ:i.orientationZ.value,panningModel:i.panningModel,positionX:i.positionX.value,positionY:i.positionY.value,positionZ:i.positionZ.value,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor},i=t(o,u)),e.set(o,i),!a){n.next=19;break}return n.next=7,ut(r.context,o,r.orientationX);case 7:return n.next=9,ut(r.context,o,r.orientationY);case 9:return n.next=11,ut(r.context,o,r.orientationZ);case 11:return n.next=13,ut(r.context,o,r.positionX);case 13:return n.next=15,ut(r.context,o,r.positionY);case 15:return n.next=17,ut(r.context,o,r.positionZ);case 17:n.next=31;break;case 19:return n.next=21,st(r.context,o,r.orientationX,i.orientationX);case 21:return n.next=23,st(r.context,o,r.orientationY,i.orientationY);case 23:return n.next=25,st(r.context,o,r.orientationZ,i.orientationZ);case 25:return n.next=27,st(r.context,o,r.positionX,i.positionX);case 27:return n.next=29,st(r.context,o,r.positionY,i.positionY);case 29:return n.next=31,st(r.context,o,r.positionZ,i.positionZ);case 31:if(void 0===i.inputs){n.next=36;break}return n.next=34,Y(r,o,i.inputs[0]);case 34:n.next=38;break;case 36:return n.next=38,Y(r,o,i);case 38:return n.abrupt("return",i);case 39:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(wn),we,je),xn=function(t,e){return function(){function n(r,o){_(this,n);var i=I(r),a=p(p({},de),o),u=t(i,a);return e.add(u),u}return m(n,null,[{key:Symbol.hasInstance,value:function(t){return null!==t&&"object"==P(t)&&Object.getPrototypeOf(t)===n.prototype||e.has(t)}}]),n}()}(function(t){return function(e,n){var r=n.disableNormalization,o=n.imag,i=n.real,a=t(e),u=new Float32Array(o),s=new Float32Array(i);return null!==a?a.createPeriodicWave(s,u,{disableNormalization:r}):e.createPeriodicWave(s,u,{disableNormalization:r})}}(xe),D),Tn=function(t,e,n){return function(r,o){return t(r,function(t){var i=o.channelCountMode;if("clamped-max"===i)throw n();if(void 0===r.createStereoPanner)return e(r,o);var a=t.createStereoPanner();return te(a,o),ne(a,o,"pan"),Object.defineProperty(a,"channelCountMode",{get:function(){return i},set:function(t){if(t!==i)throw n()}}),a})}}(Te,function(t,n,r,o,i){var a=new Float32Array([1,1]),u=Math.PI/2,s={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c=p(p({},s),{},{oversample:"none"}),l=function(t,e,l,f,h){if(1===e)return function(t,e,n,i){for(var l=new Float32Array(16385),f=new Float32Array(16385),h=0;h<16385;h+=1){var d=h/16384*u;l[h]=Math.cos(d),f[h]=Math.sin(d)}var y=r(t,p(p({},s),{},{gain:0})),_=o(t,p(p({},c),{},{curve:l})),v=o(t,p(p({},c),{},{curve:a})),m=r(t,p(p({},s),{},{gain:0})),g=o(t,p(p({},c),{},{curve:f}));return e.connect(y),e.connect(v.inputs[0]),e.connect(m),v.connect(n),n.connect(_.inputs[0]),n.connect(g.inputs[0]),_.connect(y.gain),g.connect(m.gain),y.connect(i,0,0),m.connect(i,0,1),[y,m]}(t,l,f,h);if(2===e)return function(t,e,i,l){for(var f=new Float32Array(16385),h=new Float32Array(16385),d=new Float32Array(16385),y=new Float32Array(16385),_=Math.floor(8192.5),v=0;v<16385;v+=1)if(v>_){var m=(v-_)/(16384-_)*u;f[v]=Math.cos(m),h[v]=Math.sin(m),d[v]=0,y[v]=1}else{var g=v/(16384-_)*u;f[v]=1,h[v]=0,d[v]=Math.cos(g),y[v]=Math.sin(g)}var b=n(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),w=r(t,p(p({},s),{},{gain:0})),O=o(t,p(p({},c),{},{curve:f})),x=r(t,p(p({},s),{},{gain:0})),T=o(t,p(p({},c),{},{curve:h})),k=o(t,p(p({},c),{},{curve:a})),A=r(t,p(p({},s),{},{gain:0})),C=o(t,p(p({},c),{},{curve:d})),S=r(t,p(p({},s),{},{gain:0})),P=o(t,p(p({},c),{},{curve:y}));return e.connect(b),e.connect(k.inputs[0]),b.connect(w,1),b.connect(x,1),b.connect(A,1),b.connect(S,1),k.connect(i),i.connect(O.inputs[0]),i.connect(T.inputs[0]),i.connect(C.inputs[0]),i.connect(P.inputs[0]),O.connect(w.gain),T.connect(x.gain),C.connect(A.gain),P.connect(S.gain),w.connect(l,0,0),A.connect(l,0,0),x.connect(l,0,1),S.connect(l,0,1),[w,A,x,S]}(t,l,f,h);throw i()};return function(n,o){var a=o.channelCount,u=o.channelCountMode,s=o.pan,c=e(o,["channelCount","channelCountMode","pan"]);if("max"===u)throw i();var f=t(n,p(p({},c),{},{channelCount:1,channelCountMode:u,numberOfInputs:2})),h=r(n,p(p({},c),{},{channelCount:a,channelCountMode:u,gain:1})),d=r(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s}),y=l(n,a,h,d,f);return Object.defineProperty(d.gain,"defaultValue",{get:function(){return 0}}),ue({get bufferSize(){},get channelCount(){return h.channelCount},set channelCount(t){h.channelCount!==t&&(h.disconnect(),y.forEach(function(t){return t.disconnect()}),y=l(n,t,h,d,f)),h.channelCount=t},get channelCountMode(){return h.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();h.channelCountMode=t},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get pan(){return d.gain},addEventListener:function(){return h.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent:function(){return h.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return h.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},f)}}(Ze,$e,Ke,bn,le),le),kn=function(t,e,n,o,a){return function(s){r(l,a);var c=i(l);function l(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ye;_(this,l);var s=I(r),f=p(p({},ye),a),h=e(s,f),d=o(s);return(i=c.call(this,r,"passive",h,d?n():null))._pan=t(u(i),d,h.pan,1,-1),i}return m(l,[{key:"pan",get:function(){return this._pan}}]),l}()}(Ue,Tn,function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=z(r),(a=U(i,o))||(u={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,pan:i.pan.value},i=t(o,u)),e.set(o,i),!a){n.next=9;break}return n.next=7,ut(r.context,o,r.pan);case 7:n.next=11;break;case 9:return n.next=11,st(r.context,o,r.pan,i.pan);case 11:if(void 0===i.inputs){n.next=16;break}return n.next=14,Y(r,o,i.inputs[0]);case 14:n.next=18;break;case 16:return n.next=18,Y(r,o,i);case 18:return n.abrupt("return",i);case 19:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(Tn),we,je),An=function(t){return function(){var e=new WeakMap;return{render:function(n,r){var o,i=e.get(r);return void 0!==i?Promise.resolve(i):(o=d(regeneratorRuntime.mark(function n(r,o){var i,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=z(r),U(i,o)||(a={channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,curve:i.curve,oversample:i.oversample},i=t(o,a)),e.set(o,i),void 0===i.inputs){n.next=8;break}return n.next=6,Y(r,o,i.inputs[0]);case 6:n.next=10;break;case 8:return n.next=10,Y(r,o,i);case 10:return n.abrupt("return",i);case 11:case"end":return n.stop()}},n)})),function(t,e){return o.apply(this,arguments)})(n,r)}}}}(bn),Cn=function(t,e,n,o,a){return function(u){r(c,a);var s=i(c);function c(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve;_(this,c);var a=I(t),u=p(p({},ve),i),l=e(a,u);return(r=s.call(this,t,"passive",l,o(a)?n():null))._isCurveNullified=!1,r._nativeWaveShaperNode=l,r}return m(c,[{key:"curve",get:function(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve},set:function(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}},{key:"oversample",get:function(){return this._nativeWaveShaperNode.oversample},set:function(t){this._nativeWaveShaperNode.oversample=t}}]),c}()}(R,bn,An,we,je),Sn=null!==ge&&ge.isSecureContext,Pn=function(t){return function(e,n){Object.defineProperties(t,{currentFrame:{configurable:!0,get:function(){return Math.round(e.currentTime*e.sampleRate)}},currentTime:{configurable:!0,get:function(){return e.currentTime}}});try{return n()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}}}(ge),jn=Sn?function(t,e,n,r,o,i,a){return function(u,s){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"},l=I(u),p=new URL(s,location.href).toString();if(void 0!==l.audioWorklet)return r(s).then(function(t){var e=x(q(t,p),2),n=e[0],r=e[1],i=new Blob(["".concat(n,";(registerProcessor=>{").concat(r,"\n})((n,p)=>registerProcessor(n,class extends p{constructor(o){const{hasNoOutput,...q}=o.parameterData;if(hasNoOutput===1){super({...o,numberOfOutputs:0,outputChannelCount:[],parameterData:q});this._h=true}else{super(o);this._h=false}}process(i,o,p){return super.process(i,(this._h)?[]:o,p)}}))")],{type:"application/javascript; charset=utf-8"}),a=URL.createObjectURL(i),u=o(l);return(null!==u?u:l).audioWorklet.addModule(a,c).then(function(){return URL.revokeObjectURL(a)}).catch(function(t){throw URL.revokeObjectURL(a),t})});var f=a.get(u);if(void 0!==f&&f.has(s))return Promise.resolve();var h=i.get(u);if(void 0!==h){var d=h.get(s);if(void 0!==d)return d}var y=r(s).then(function(t){var e=x(q(t,p),2),n=e[0],r=e[1];return function(t){return new Promise(function(e,n){var r=document.head;if(null===r)n(new SyntaxError);else{var o=document.createElement("script"),i=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(i),u=window.onerror,s=function(){window.onerror=u,URL.revokeObjectURL(a)};window.onerror=function(t,e,r,o,i){return e===a||e===location.href&&1===r&&1===o?(s(),n(i),!1):null!==u?u(t,e,r,o,i):void 0},o.onerror=function(){s(),n(new SyntaxError)},o.onload=function(){s(),e()},o.src=a,o.type="module",r.appendChild(o)}})}("".concat(n,";((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{").concat(r,"\n})})(window,'_AWGS')"))}).then(function(){var t=window._AWGS.pop();if(void 0===t)throw new SyntaxError;n(l,function(){return t(function(){return function t(){_(this,t)}}(),void 0,function(t,n){if(""===t.trim())throw e();var r=j.get(l);if(void 0!==r){if(r.has(t))throw e();B(n),F(n.parameterDescriptors),r.set(t,n)}else B(n),F(n.parameterDescriptors),j.set(l,new Map([[t,n]]))},l.sampleRate,void 0,void 0)})}).catch(function(e){if("SyntaxError"===e.name)throw t();throw e});return void 0===h?i.set(u,new Map([[s,y]])):h.set(s,y),y.then(function(){var t=a.get(u);void 0===t?a.set(u,new Set([s])):t.add(s)}).catch(function(){}).then(function(){var t=i.get(u);void 0!==t&&t.delete(s)}),y}}(c,le,Pn,function(t){return function(){var e=d(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(n);case 3:if(!(r=e.sent).ok){e.next=6;break}return e.abrupt("return",r.text());case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:throw t();case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()}(c),xe,new WeakMap,new WeakMap):void 0,En=function(t){return function(e){return null!==t&&e instanceof t}}(Oe),Dn=function(t,e,n,o,a,s,c,l,f,h,d,y,v,g,b,w,O,x,T,k){return function(A){r(S,b);var C=i(S);function S(e,n){var r;return _(this,S),(r=C.call(this,e,n))._nativeContext=e,r._audioWorklet=void 0===t?void 0:{addModule:function(e,n){return t(u(r),e,n)}},r}return m(S,[{key:"createAnalyser",value:function(){return new e(this)}},{key:"createBiquadFilter",value:function(){return new a(this)}},{key:"createBuffer",value:function(t,e,r){return new n({length:e,numberOfChannels:t,sampleRate:r})}},{key:"createBufferSource",value:function(){return new o(this)}},{key:"createChannelMerger",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new s(this,{numberOfInputs:t})}},{key:"createChannelSplitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return new c(this,{numberOfOutputs:t})}},{key:"createConstantSource",value:function(){return new l(this)}},{key:"createConvolver",value:function(){return new f(this)}},{key:"createDelay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new d(this,{maxDelayTime:t})}},{key:"createDynamicsCompressor",value:function(){return new y(this)}},{key:"createGain",value:function(){return new v(this)}},{key:"createIIRFilter",value:function(t,e){return new g(this,{feedback:e,feedforward:t})}},{key:"createOscillator",value:function(){return new w(this)}},{key:"createPanner",value:function(){return new O(this)}},{key:"createPeriodicWave",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1};return new x(this,p(p({},n),{},{imag:e,real:t}))}},{key:"createStereoPanner",value:function(){return new T(this)}},{key:"createWaveShaper",value:function(){return new k(this)}},{key:"decodeAudioData",value:function(t,e,n){return h(this._nativeContext,t).then(function(t){return"function"==typeof e&&e(t),t}).catch(function(t){throw"function"==typeof n&&n(t),t})}},{key:"audioWorklet",get:function(){return this._audioWorklet}}]),S}()}(jn,Ee,Ne,Ge,Ye,He,Je,en,rn,function(t,e,n,r,o,i,a,u,s,c,l,p,f){return function(n,r){var h=i(n)?n:I(n);if(C.has(r)){var d=function(){try{return new DOMException("","DataCloneError")}catch(t){return t.code=25,t.name="DataCloneError",t}}();return Promise.reject(d)}try{C.add(r)}catch(t){}return e(c,function(){return c(h)})?("closed"===h.state&&null!==o&&a(h)?new o(1,1,h.sampleRate):h).decodeAudioData(r).catch(function(t){if(t instanceof DOMException&&"NotSupportedError"===t.name)throw new TypeError;throw t}).then(function(n){return e(s,function(){return s(n)})?e(u,function(){return u(n)})||p(n):(f(n),p(n)),t.add(n),n}):new Promise(function(e,n){var o=function(){try{t=r,(new MessageChannel).port1.postMessage(t,[t])}catch(t){}var t},i=function(t){n(t),o()};try{h.decodeAudioData(r,function(n){"function"!=typeof n.copyFromChannel&&(l(n),J(n)),t.add(n),o(),e(n)},function(t){i(null===t?function(){try{return new DOMException("","EncodingError")}catch(t){return t.code=0,t.name="EncodingError",t}}():t)})}catch(t){i(t)}})}}(h,me,0,0,be,function(t,e){return function(n){return t(n)||e(n)}}(En,we),we,Z,H,Jt,Re,Ie,Ve),an,sn,cn,dn,yn,mn,On,xn,kn,Cn),Mn=function(t,e,n,o){return function(a){r(s,o);var u=i(s);function s(r,o){var i;_(this,s);var a=I(r);if(n(a))throw e();var c=t(a,o);return(i=u.call(this,r,"active",c,null))._mediaElement=o.mediaElement,i._nativeMediaElementAudioSourceNode=c,i}return m(s,[{key:"mediaElement",get:function(){return void 0===this._nativeMediaElementAudioSourceNode.mediaElement?this._mediaElement:this._nativeMediaElementAudioSourceNode.mediaElement}}]),s}()}(function(t){return function(e,n){return t(e,function(t){return t.createMediaElementSource(n.mediaElement)})}}(Te),le,we,je),Rn=function(t,e,n,o){return function(a){r(s,o);var u=i(s);function s(r,o){var i;_(this,s);var a=I(r);if(n(a))throw e();var c=t(a,o);return(i=u.call(this,r,"active",c,null))._nativeMediaStreamAudioSourceNode=c,i}return m(s,[{key:"mediaStream",get:function(){return this._nativeMediaStreamAudioSourceNode.mediaStream}}]),s}()}(function(t,e){return function(n,r){var o=r.mediaStream,i=o.getAudioTracks(),a=e(n,function(t){var e=i.sort(function(t,e){return t.id<e.id?-1:t.id>e.id?1:0}).slice(0,1);return t.createMediaStreamSource(new MediaStream(e))});if(0===i.length)throw t();return Object.defineProperty(a,"mediaStream",{value:o}),a}}(R,Te),le,we,je),In=function(t,e,n,o){return function(a){r(s,o);var u=i(s);function s(r,o){_(this,s);var i=I(r);if(n(i))throw e();return u.call(this,r,"active",t(i,o),null)}return s}()}(function(t,e){return function(n,r){var o=r.mediaStreamTrack;return"function"==typeof n.createMediaStreamTrackSource?e(n,function(t){return t.createMediaStreamTrackSource(o)}):e(n,function(e){var n=new MediaStream([o]),r=e.createMediaStreamSource(n);if("audio"!==o.kind)throw t();return r})}}(R,Te),le,we,je),Vn=function(t,e,n,o,a,u,s,c){return function(l){r(f,t);var p=i(f);function f(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_(this,f),null===c)throw new Error("Missing the native AudioContext constructor.");var r=new c(e);if(null===r)throw o();if(!ct(e.latencyHint))throw new TypeError("The provided value '".concat(e.latencyHint,"' is not a valid enum value of type AudioContextLatencyCategory."));if(void 0!==e.sampleRate&&r.sampleRate!==e.sampleRate)throw n();t=p.call(this,r,r.destination.channelCount);var i=e.latencyHint,a=r.sampleRate;if(t._baseLatency="number"==typeof r.baseLatency?r.baseLatency:"balanced"===i?512/a:"interactive"===i||void 0===i?256/a:"playback"===i?1024/a:128*Math.max(2,Math.min(128,Math.round(i*a/128)))/a,t._nativeAudioContext=r,t._state=null,"running"===r.state){t._state="suspended";r.addEventListener("statechange",function e(){"suspended"===t._state&&(t._state=null),r.removeEventListener("statechange",e)})}return t}return m(f,[{key:"close",value:function(){return"closed"===this.state?this._nativeAudioContext.close().then(function(){throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}},{key:"createMediaElementSource",value:function(t){return new a(this,{mediaElement:t})}},{key:"createMediaStreamSource",value:function(t){return new u(this,{mediaStream:t})}},{key:"createMediaStreamTrackSource",value:function(t){return new s(this,{mediaStreamTrack:t})}},{key:"resume",value:function(){var t=this;return"suspended"===this._state?new Promise(function(e,n){t._nativeAudioContext.addEventListener("statechange",function r(){t._nativeAudioContext.removeEventListener("statechange",r),"running"===t._nativeAudioContext.state?e():t.resume().then(e,n)})}):this._nativeAudioContext.resume().catch(function(t){if(void 0===t||15===t.code)throw e();throw t})}},{key:"suspend",value:function(){return this._nativeAudioContext.suspend().catch(function(t){if(void 0===t)throw e();throw t})}},{key:"baseLatency",get:function(){return this._baseLatency}},{key:"state",get:function(){return null!==this._state?this._state:this._nativeAudioContext.state}}]),f}()}(Dn,R,le,_e,Mn,Rn,In,Oe),Nn=function(t){return function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e[r];if(void 0===i)throw t();return xt(n)?i.connect(n,0,o):i.connect(n,0)}}($),qn=function(t){return function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?e.forEach(function(t){return t.disconnect()}):"number"==typeof n?Qt(t,e,n).disconnect():xt(n)?void 0===r?e.forEach(function(t){return t.disconnect(n)}):void 0===o?Qt(t,e,r).disconnect(n,0):Qt(t,e,r).disconnect(n,0,o):void 0===r?e.forEach(function(t){return t.disconnect(n)}):Qt(t,e,r).disconnect(n,0)}}($),Fn=function(t,e,n,r,o,i,a,u,s,c,l){return function(h,d,_,v){if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw s();if(void 0!==v.outputChannelCount){if(v.outputChannelCount.length!==v.numberOfOutputs)throw e();if(v.outputChannelCount.some(function(t){return t<1}))throw s()}if("explicit"!==v.channelCountMode)throw s();var m=v.channelCount*v.numberOfInputs,g=v.outputChannelCount.reduce(function(t,e){return t+e},0),b=void 0===_.parameterDescriptors?0:_.parameterDescriptors.length;if(m+b>6||g>6)throw s();for(var w=new MessageChannel,O=[],x=[],k=0;k<v.numberOfInputs;k+=1)O.push(a(h,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),x.push(o(h,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));var A=[];if(void 0!==_.parameterDescriptors){var C,S=y(_.parameterDescriptors);try{var j=function(){var t=C.value,e=t.defaultValue,n=t.maxValue,r=t.minValue,o=t.name,a=i(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[o]?v.parameterData[o]:void 0===e?0:e});Object.defineProperties(a.offset,{defaultValue:{get:function(){return void 0===e?0:e}},maxValue:{get:function(){return void 0===n?3.4028234663852886e38:n}},minValue:{get:function(){return void 0===r?-3.4028234663852886e38:r}}}),A.push(a)};for(S.s();!(C=S.n()).done;)j()}catch(nt){S.e(nt)}finally{S.f()}}for(var D=r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,m+b)}),M=ie(d,h.sampleRate),R=u(h,M,m+b,Math.max(1,g)),I=o(h,{channelCount:Math.max(1,g),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,g)}),V=[],N=0;N<v.numberOfOutputs;N+=1)V.push(r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v.outputChannelCount[N]}));for(var q=0;q<v.numberOfInputs;q+=1){O[q].connect(x[q]);for(var F=0;F<v.channelCount;F+=1)x[q].connect(D,F,q*v.channelCount+F)}var B=new Mt(void 0===_.parameterDescriptors?[]:_.parameterDescriptors.map(function(t,e){var n=t.name,r=A[e];return r.connect(D,0,m+e),r.start(0),[n,r.offset]}));D.connect(R),v.numberOfOutputs>0&&R.connect(I);for(var L=0,W=0;L<v.numberOfOutputs;L+=1){for(var z=V[L],U=0;U<v.outputChannelCount[L];U+=1)I.connect(z,W+U,U);W+=v.outputChannelCount[L]}var G=v.channelInterpretation,Q=null,X=0===v.numberOfOutputs?[R]:V,Y={get bufferSize(){return M},get channelCount(){return v.channelCount},set channelCount(t){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return G},set channelInterpretation(t){var e,n=y(O);try{for(n.s();!(e=n.n()).done;){e.value.channelInterpretation=t}}catch(nt){n.e(nt)}finally{n.f()}G=t},get context(){return R.context},get inputs(){return O},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return Q},set onprocessorerror(t){"function"==typeof Q&&Y.removeEventListener("processorerror",Q),"function"==typeof(Q="function"==typeof t?t:null)&&Y.addEventListener("processorerror",Q)},get parameters(){return B},get port(){return w.port2},addEventListener:function(){return R.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:t.bind(null,X),disconnect:c.bind(null,X),dispatchEvent:function(){return R.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener:function(){return R.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},Z=new Map;w.port1.addEventListener=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("message"===n[0]){var o="function"==typeof n[1]?n[1]:"object"==P(n[1])&&null!==n[1]&&"function"==typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==o){var i=Z.get(n[1]);void 0!==i?n[1]=i:(n[1]=function(t){l(h,function(){return o(t)})},Z.set(o,n[1]))}}return t.call(w.port1,n[0],n[1],n[2])}}(w.port1.addEventListener),w.port1.removeEventListener=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("message"===n[0]){var o=Z.get(n[1]);void 0!==o&&(Z.delete(n[1]),n[1]=o)}return t.call(w.port1,n[0],n[1],n[2])}}(w.port1.removeEventListener);var H=null;Object.defineProperty(w.port1,"onmessage",{get:function(){return H},set:function(t){"function"==typeof H&&w.port1.removeEventListener("message",H),"function"==typeof(H="function"==typeof t?t:null)&&(w.port1.addEventListener("message",H),w.port1.start())}}),_.prototype.port=w.port1;var $=null;(function(t,e,n,r){var o=E.get(t);void 0===o&&(o=new WeakMap,E.set(t,o));var i=ae(n,r);return o.set(e,i),i})(h,Y,_,v).then(function(t){return $=t});var J=qt(v.numberOfInputs,v.channelCount),K=qt(v.numberOfOutputs,v.outputChannelCount),tt=void 0===_.parameterDescriptors?[]:_.parameterDescriptors.reduce(function(t,e){var n=e.name;return p(p({},t),{},f({},n,new Float32Array(128)))},{}),et=!0;return R.onaudioprocess=function(t){var e=t.inputBuffer,n=t.outputBuffer;if(null!==$)for(var r=function(t){for(var r=0;r<v.numberOfInputs;r+=1)for(var o=0;o<v.channelCount;o+=1)Vt(e,J[r],o,o,t);void 0!==_.parameterDescriptors&&_.parameterDescriptors.forEach(function(n,r){var o=n.name;Vt(e,tt,o,m+r,t)});for(var i=0;i<v.numberOfInputs;i+=1)for(var a=0;a<v.outputChannelCount[i];a+=1)0===K[i][a].byteLength&&(K[i][a]=new Float32Array(128));try{var u=J.map(function(t,e){var n=T.get(Y);return void 0===n||void 0===n.get(e)?[new Float32Array(0)]:t}),s=l(h,function(){return $.process(u,K,tt)});et=s;for(var c=0,p=0;c<v.numberOfOutputs;c+=1){for(var f=0;f<v.outputChannelCount[c];f+=1)Nt(n,K[c],f,p+f,t);p+=v.outputChannelCount[c]}}catch(e){et=!1,Y.dispatchEvent(new ErrorEvent("processorerror",{error:e}))}if(!et)return R.onaudioprocess=null,"break"},o=0;o<M;o+=128){if("break"===r(o))break}},Y}}(Nn,$,R,Ze,$e,tn,Ke,ln,le,qn,Pn),Bn=function(t,e,n,r,o){return function(i,a,u,s,c,l){if(null!==u)try{var f=e(i,function(t){return o(t)&&0!==l.numberOfInputs&&0===l.numberOfOutputs?new u(t,s,p(p({},l),{},{numberOfOutputs:1,outputChannelCount:[1],parameterData:p(p({},l.parameterData),{},{hasNoOutput:1})})):new u(t,s,l)}),h=new Map,d=null;return Object.defineProperties(f,{channelCount:{get:function(){return l.channelCount},set:function(){throw t()}},channelCountMode:{get:function(){return"explicit"},set:function(){throw t()}},onprocessorerror:{get:function(){return d},set:function(t){"function"==typeof d&&f.removeEventListener("processorerror",d),"function"==typeof(d="function"==typeof t?t:null)&&f.addEventListener("processorerror",d)}}}),f.addEventListener=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("processorerror"===n[0]){var o="function"==typeof n[1]?n[1]:"object"==P(n[1])&&null!==n[1]&&"function"==typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==o){var i=h.get(n[1]);void 0!==i?n[1]=i:(n[1]=function(t){o(new ErrorEvent(n[0],p(p({},t),{},{error:new Error})))},h.set(o,n[1]))}}return t.call(f,n[0],n[1],n[2])}}(f.addEventListener),f.removeEventListener=function(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if("processorerror"===n[0]){var o=h.get(n[1]);void 0!==o&&(h.delete(n[1]),n[1]=o)}return t.call(f,n[0],n[1],n[2])}}(f.removeEventListener),f}catch(t){if(11===t.code)throw r();throw t}if(void 0===c)throw r();return function(t){var e=(new MessageChannel).port1;try{e.postMessage(t)}finally{e.close()}}(l),n(i,a,c,l)}}(R,Te,Fn,le,we),Ln=function(t){return null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null}(ge),Wn=function(t,e,n,r,o,i,a,u,s,c){return function(l,p,f){var h=new WeakMap;return{render:function(_,v){var m,g=h.get(v);if(void 0!==g){var b=Array.isArray(g)?g[2]:g;return Promise.resolve(b)}return(m=d(regeneratorRuntime.mark(function _(v,m){var g,b,w,O,T,k,A,C,S,P,j,E,D,M,R,I,V,N,q,F,B,L,W,G,Q,X,Z,H,$,J,K,tt,et,nt,rt,ot,it,at;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(g=z(v),b=null,w=U(g,m),null===u){for(O=p.outputChannelCount.reduce(function(t,e){return t+e},0),T=r(m,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),k=[],A=0;A<v.numberOfOutputs;A+=1)k.push(n(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:p.outputChannelCount[A]}));C=0===p.numberOfOutputs?[T]:k,(S=i(m,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})).connect=t.bind(null,C),S.disconnect=a.bind(null,C),b=[T,k,S]}else w||(g=new u(m,l));if(h.set(m,null===b?g:b),null===b){_.next=19;break}if(P=x(b,3),j=P[0],E=P[1],D=P[2],void 0!==f){_.next=7;break}throw new Error("Missing the processor constructor.");case 7:if(null!==s){_.next=9;break}throw new Error("Missing the native OfflineAudioContext constructor.");case 9:for(M=v.channelCount*v.numberOfInputs,R=void 0===f.parameterDescriptors?0:f.parameterDescriptors.length,I=new s(M+R,128*Math.ceil(v.context.length/128),m.sampleRate),V=[],N=[],q=0;q<p.numberOfInputs;q+=1)V.push(i(I,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),N.push(r(I,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));return _.next=13,Promise.all(Array.from(v.parameters.values()).map(function(){var t=d(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value}),t.next=3,st(v.context,I,e,n.offset);case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()));case 13:for(F=_.sent,B=n(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,M+R)}),L=0;L<p.numberOfInputs;L+=1)for(V[L].connect(N[L]),W=0;W<p.channelCount;W+=1)N[L].connect(B,W,L*p.channelCount+W);G=y(F.entries());try{for(G.s();!(Q=G.n()).done;)X=x(Q.value,2),Z=X[0],(H=X[1]).connect(B,0,M+Z),H.start(0)}catch(ct){G.e(ct)}finally{G.f()}return _.abrupt("return",(B.connect(I.destination),Promise.all(V.map(function(t){return Y(v,I,t)})).then(function(){return c(I)}).then(function(){var t=d(regeneratorRuntime.mark(function t(n){var r,o,i,a,u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e(m),t.next=3,Ft(v,n,m,p,f);case 3:for(null!==(o=t.sent)&&(r.buffer=o,r.start(0)),r.connect(j),i=0,a=0;i<v.numberOfOutputs;i+=1){for(u=E[i],s=0;s<p.outputChannelCount[i];s+=1)j.connect(u,a+s,s);a+=p.outputChannelCount[i]}return t.abrupt("return",D);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())));case 19:if(!w){_.next=39;break}$=y(v.parameters.entries()),_.prev=21,$.s();case 23:if((J=$.n()).done){_.next=29;break}return K=x(J.value,2),tt=K[0],et=K[1],_.next=27,ut(v.context,m,et,g.parameters.get(tt));case 27:_.next=23;break;case 29:_.next=34;break;case 31:_.prev=31,_.t0=_.catch(21),$.e(_.t0);case 34:return _.prev=34,$.f(),_.finish(34);case 37:_.next=56;break;case 39:nt=y(v.parameters.entries()),_.prev=40,nt.s();case 42:if((rt=nt.n()).done){_.next=48;break}return ot=x(rt.value,2),it=ot[0],at=ot[1],_.next=46,st(v.context,m,at,g.parameters.get(it));case 46:_.next=42;break;case 48:_.next=53;break;case 50:_.prev=50,_.t1=_.catch(40),nt.e(_.t1);case 53:return _.prev=53,nt.f(),_.finish(53);case 56:return _.next=58,Y(v,m,g);case 58:return _.abrupt("return",g);case 59:case"end":return _.stop()}},_,null,[[21,31,34,37],[40,50,53,56]])})),function(t,e){return m.apply(this,arguments)})(_,v)}}}}(Nn,We,Ze,$e,tn,Ke,qn,Ln,be,fn),zn=Sn?function(t,e,n,o,a,s,c){return function(l){r(h,c);var f=i(h);function h(r,i){var c,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rt;_(this,h);var d=I(r),y=a(d),v=function(t){return p(p({},t),{},{outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:It(t.numberOfOutputs)})}(p(p({},Rt),l)),m=j.get(d),g=void 0===m?void 0:m.get(i),b=n(d,y?null:r.baseLatency,s,i,g,v);c=f.call(this,r,"active",b,y?e(i,v,g):null);var w=[];if(b.parameters.forEach(function(e,n){var r=t(u(c),y,e);w.push([n,r])}),c._nativeAudioWorkletNode=b,c._numberOfOutputs=0===l.numberOfOutputs?0:c._nativeAudioWorkletNode.numberOfOutputs,c._onprocessorerror=null,c._parameters=new Mt(w),"closed"!==r.state){var O=new o(r,{gain:0});try{c.connect(O).connect(r.destination)}catch(t){if("IndexSizeError"!==t.name)throw t}}return c}return m(h,[{key:"numberOfOutputs",get:function(){return this._numberOfOutputs}},{key:"onprocessorerror",get:function(){return this._onprocessorerror},set:function(t){var e=nt(this,t);this._nativeAudioWorkletNode.onprocessorerror=e;var n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=n===e?t:n}},{key:"parameters",get:function(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}},{key:"port",get:function(){return this._nativeAudioWorkletNode.port}}]),h}()}(Ue,Wn,Bn,cn,we,Ln,je):void 0,Un=(function(t,e,n,r,o){}(R,le,_e,yn,Oe),function(t,e){return function(n,r,o){if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,o)}catch(e){if("IndexSizeError"===e.name||"SyntaxError"===e.name)throw t();throw e}}}(le,be)),Gn=function(t,e,n,r,o,i,a,u){return function(s,c){return X(s).render(s,c).then(function(){return n(c)}).then(function(n){return"function"!=typeof n.copyFromChannel?(i(n),J(n)):e(o,function(){return o(n)})?e(r,function(){return r(n)})||a(n):(u(n),a(n)),t.add(n),n})}}(h,me,fn,Z,H,Re,Ie,Ve),Qn=(function(t,e,n,r,o){}(me,R,Un,yn,Gn),function(t,e,n,o,a){return function(u){r(c,t);var s=i(c);function c(t,n,r){var i,a;if(_(this,c),"number"==typeof t&&void 0!==n&&void 0!==r)a={length:n,numberOfChannels:t,sampleRate:r};else{if("object"!=P(t))throw new Error("The given parameters are not valid.");a=t}var u=p(p({},pe),a),l=u.length,f=u.numberOfChannels,h=u.sampleRate,d=o(f,l,h);return e(Jt,function(){return Jt(d)})||d.addEventListener("statechange",function(){var t=0;return function e(n){"running"===i._state&&(t>0?(d.removeEventListener("statechange",e),n.stopImmediatePropagation(),i._waitForThePromiseToSettle(n)):t+=1)}}()),(i=s.call(this,d,f))._length=l,i._nativeOfflineAudioContext=d,i._state=null,i}return m(c,[{key:"startRendering",value:function(){var t=this;return"running"===this._state?Promise.reject(n()):(this._state="running",a(this.destination,this._nativeOfflineAudioContext).then(function(e){return t._state=null,e}).catch(function(e){throw t._state=null,e}))}},{key:"_waitForThePromiseToSettle",value:function(t){var e=this;null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(function(){return e._waitForThePromiseToSettle(t)})}},{key:"length",get:function(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}},{key:"state",get:function(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}}]),c}()}(Dn,me,R,Un,Gn)),Xn=function(t,e){return function(n){var r=t.get(n);return e(r)||e(n)}}(A,En),Yn=function(t,e){return function(n){return t.has(n)||e(n)}}(v,Ce),Zn=function(t,e){return function(n){return t.has(n)||e(n)}}(w,Se),Hn=function(t,e){return function(n){var r=t.get(n);return e(r)||e(n)}}(A,we),$n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Jn=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat($n(arguments[e]));return t};function Kn(t,e){if(!t)throw new Error(e)}var tr=console;function er(t){tr=t}function nr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];tr.log.apply(tr,Jn(t))}function rr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];tr.warn.apply(tr,Jn(t))}function or(t){return void 0===t}function ir(t){return!or(t)}function ar(t){return"function"==typeof t}function ur(t){return"number"==typeof t}function sr(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function cr(t){return"boolean"==typeof t}function lr(t){return Array.isArray(t)}function pr(t){return"string"==typeof t}function fr(t){return pr(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}var hr,dr="object"==("undefined"==typeof self?"undefined":P(self))?self:null,yr=dr&&(dr.hasOwnProperty("AudioContext")||dr.hasOwnProperty("webkitAudioContext"));dr&&dr.TONE_AUDIO_CONTEXT&&(hr=dr.TONE_AUDIO_CONTEXT);var _r=function(){function t(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}return t.prototype._createWorker=function(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  "+(1e3*this._updateInterval).toFixed(1)+";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t"],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n},t.prototype._createTimeout=function(){var t=this;this._timeout=setTimeout(function(){t._createTimeout(),t._callback()},1e3*this._updateInterval)},t.prototype._createClock=function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()},t.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)},Object.defineProperty(t.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._disposeClock()},t}();function vr(t){return Zn(t)}function mr(t){return Yn(t)}function gr(t){return Hn(t)}function br(t){return Xn(t)}function wr(t){return t instanceof AudioBuffer}var Or=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},xr=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Or(arguments[e]));return t};function Tr(t,e){return"value"===t||vr(e)||mr(e)||wr(e)}function kr(t){for(var e,n,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(!r.length)return t;var i=r.shift();if(sr(t)&&sr(i))for(var a in i)Tr(a,i[a])?t[a]=i[a]:sr(i[a])?(t[a]||Object.assign(t,((e={})[a]={},e)),kr(t[a],i[a])):Object.assign(t,((n={})[a]=i[a],n));return kr.apply(void 0,xr([t],r))}function Ar(t,e,n,r){var o;void 0===n&&(n=[]);var i={},a=Array.from(e);if(sr(a[0])&&r&&!Reflect.has(a[0],r)&&(Object.keys(a[0]).some(function(e){return Reflect.has(t,e)})||(kr(i,((o={})[r]=a[0],o)),n.splice(n.indexOf(r),1),a.shift())),1===a.length&&sr(a[0]))kr(i,a[0]);else for(var u=0;u<n.length;u++)ir(a[u])&&(i[n[u]]=a[u]);return kr(t,i)}function Cr(t,e){return or(t)?e:t}function Sr(t,e){return e.forEach(function(e){Reflect.has(t,e)&&delete t[e]}),t}var Pr,jr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Er=function(){function t(){this.debug=!1,this._wasDisposed=!1}return t.getDefaults=function(){return{}},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];(this.debug||dr&&this.toString()===dr.TONE_DEBUG_CLASS)&&nr.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jr(arguments[e]));return t}([this],t))},t.prototype.assert=function(t,e){Kn(t,e)},t.prototype.dispose=function(){return this._wasDisposed=!0,this},Object.defineProperty(t.prototype,"disposed",{get:function(){return this._wasDisposed},enumerable:!0,configurable:!0}),t.prototype.toString=function(){return this.name},t.version="14.4.6",t}(),Dr=(Pr=function(t,e){return(Pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Pr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Mr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Rr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Emitter",e}return Dr(e,t),e.prototype.on=function(t,e){var n=this;return t.split(/\W+/).forEach(function(t){or(n._events)&&(n._events={}),n._events.hasOwnProperty(t)||(n._events[t]=[]),n._events[t].push(e)}),this},e.prototype.once=function(t,e){var n=this;return this.on(t,function r(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];e.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Mr(arguments[e]));return t}(o)),n.off(t,r)}),this},e.prototype.off=function(t,e){var n=this;return t.split(/\W+/).forEach(function(r){if(or(n._events)&&(n._events={}),n._events.hasOwnProperty(t))if(or(e))n._events[t]=[];else for(var o=n._events[t],i=0;i<o.length;i++)o[i]===e&&o.splice(i,1)}),this},e.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(this._events&&this._events.hasOwnProperty(t))for(var r=this._events[t].slice(0),o=0,i=r.length;o<i;o++)r[o].apply(this,e);return this},e.mixin=function(t){["on","once","off","emit"].forEach(function(n){var r=Object.getOwnPropertyDescriptor(e.prototype,n);Object.defineProperty(t.prototype,n,r)})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=void 0,this},e}(Er),Ir=1e-6;function Vr(t,e){return t>e+Ir}function Nr(t,e){return t+Ir<e}function qr(t,e){return Math.abs(t-e)<Ir}var Fr,Br=(Fr=function(t,e){return(Fr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Fr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Lr=function(t){function e(){var n=t.call(this)||this;n.name="Timeline",n._timeline=[],n._epsilon=1e-6;var r=Ar(e.getDefaults(),arguments,["memory"]);return n.memory=r.memory,n.increasing=r.increasing,n}return Br(e,t),e.getDefaults=function(){return{memory:1/0,increasing:!1}},Object.defineProperty(e.prototype,"length",{get:function(){return this._timeline.length},enumerable:!0,configurable:!0}),e.prototype.add=function(t){if(this.assert(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){var e=this._timeline[this.length-1];this.assert(e.time<=t.time,"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{var n=this._search(t.time);this._timeline.splice(n+1,0,t)}if(this.length>this.memory){var r=this.length-this.memory;this._timeline.splice(0,r)}return this},e.prototype.remove=function(t){var e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this},e.prototype.get=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return-1!==n?this._timeline[n]:null},e.prototype.peek=function(){return this._timeline[0]},e.prototype.shift=function(){return this._timeline.shift()},e.prototype.getAfter=function(t,e){void 0===e&&(e="time");var n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null},e.prototype.getBefore=function(t){var e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];var n=this._search(t);return n-1>=0?this._timeline[n-1]:null},e.prototype.cancel=function(t){if(this._timeline.length>1){var e=this._search(t);if(e>=0)if(this._timeline[e].time===t){for(var n=e;n>=0&&this._timeline[n].time===t;n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=t&&(this._timeline=[]);return this},e.prototype.cancelBefore=function(t){var e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this},e.prototype.previousEvent=function(t){var e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null},e.prototype._eq=function(t,e){return Math.abs(t-e)<this._epsilon},e.prototype._gt=function(t,e){return t>e+this._epsilon},e.prototype._lt=function(t,e){return t<e+this._epsilon},e.prototype._search=function(t,e){if(void 0===e&&(e="time"),0===this._timeline.length)return-1;var n=0,r=this._timeline.length,o=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;n<o;){var i=Math.floor(n+(o-n)/2),a=this._timeline[i],u=this._timeline[i+1];if(qr(a[e],t)){for(var s=i;s<this._timeline.length;s++)qr(this._timeline[s][e],t)&&(i=s);return i}if(Nr(a[e],t)&&Vr(u[e],t))return i;Vr(a[e],t)?o=i:n=i+1}return-1},e.prototype._iterate=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this._timeline.length-1),this._timeline.slice(e,n+1).forEach(t)},e.prototype.forEach=function(t){return this._iterate(t),this},e.prototype.forEachBefore=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(e,0,n),this},e.prototype.forEachAfter=function(t,e){var n=this._search(t);return this._iterate(e,n+1),this},e.prototype.forEachBetween=function(t,e,n){var r=this._search(t),o=this._search(e);return-1!==r&&-1!==o?(this._timeline[r].time!==t&&(r+=1),this._timeline[o].time===e&&(o-=1),this._iterate(n,r,o)):-1===r&&this._iterate(n,0,o),this},e.prototype.forEachFrom=function(t,e){for(var n=this._search(t);n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this},e.prototype.forEachAtTime=function(t,e){var n=this._search(t);return-1!==n&&this._iterate(function(n){n.time===t&&e(n)},0,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=[],this},e}(Er),Wr=[];function zr(t){Wr.push(t)}var Ur=[];function Gr(t){Ur.push(t)}var Qr,Xr,Yr=(Xr=function(t,e){return(Xr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Xr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zr=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},Hr=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},$r=function(t){function e(){var n=t.call(this)||this;n.name="Context",n._constants=new Map,n._timeouts=new Lr,n._timeoutIds=0,n._initialized=!1,n._workletModules=new Map;var r=Ar(e.getDefaults(),arguments,["context"]);return n._context=r.context,n._latencyHint=r.latencyHint,n.lookAhead=r.lookAhead,n._ticker=new _r(n.emit.bind(n,"tick"),r.clockSource,r.updateInterval),n.on("tick",n._timeoutLoop.bind(n)),n._context.onstatechange=function(){n.emit("statechange",n.state)},n}return Yr(e,t),e.getDefaults=function(){return{clockSource:"worker",context:(!hr&&yr&&(t=new Vn,hr=t,dr&&(dr.TONE_AUDIO_CONTEXT=hr)),hr),latencyHint:"interactive",lookAhead:.1,updateInterval:.03};var t},e.prototype.initialize=function(){var t;return this._initialized||(t=this,Wr.forEach(function(e){return e(t)}),this._initialized=!0),this},e.prototype.createAnalyser=function(){return this._context.createAnalyser()},e.prototype.createOscillator=function(){return this._context.createOscillator()},e.prototype.createBufferSource=function(){return this._context.createBufferSource()},e.prototype.createBiquadFilter=function(){return this._context.createBiquadFilter()},e.prototype.createBuffer=function(t,e,n){return this._context.createBuffer(t,e,n)},e.prototype.createChannelMerger=function(t){return this._context.createChannelMerger(t)},e.prototype.createChannelSplitter=function(t){return this._context.createChannelSplitter(t)},e.prototype.createConstantSource=function(){return this._context.createConstantSource()},e.prototype.createConvolver=function(){return this._context.createConvolver()},e.prototype.createDelay=function(t){return this._context.createDelay(t)},e.prototype.createDynamicsCompressor=function(){return this._context.createDynamicsCompressor()},e.prototype.createGain=function(){return this._context.createGain()},e.prototype.createIIRFilter=function(t,e){return this._context.createIIRFilter(t,e)},e.prototype.createPanner=function(){return this._context.createPanner()},e.prototype.createPeriodicWave=function(t,e,n){return this._context.createPeriodicWave(t,e,n)},e.prototype.createStereoPanner=function(){return this._context.createStereoPanner()},e.prototype.createWaveShaper=function(){return this._context.createWaveShaper()},e.prototype.createMediaStreamSource=function(t){return this.assert(br(this._context),"Only available on online audio context"),this._context.createMediaStreamSource(t)},e.prototype.decodeAudioData=function(t){return this._context.decodeAudioData(t)},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._context.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._context.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listener",{get:function(){return this._context.listener},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transport",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._transport},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destination",{get:function(){return this.assert(this._initialized,"The context must be initialized before being used by invoking context.initialize()"),this._destination},set:function(t){this.assert(!this._initialized,"The transport cannot be set after initialization."),this._destination=t},enumerable:!0,configurable:!0}),e.prototype.createAudioWorkletNode=function(t,e){return function(t,e,n){return Kn(ir(zn),"This node only works in a secure context (https or localhost)"),new zn(t,e,n)}(this.rawContext,t,e)},e.prototype.addAudioWorkletModule=function(t,e){return Zr(this,void 0,void 0,function(){return Hr(this,function(n){switch(n.label){case 0:return this.assert(ir(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),[4,this._workletModules.get(e)];case 1:return n.sent(),[2]}})})},e.prototype.workletsAreReady=function(){return Zr(this,void 0,void 0,function(){var t;return Hr(this,function(e){switch(e.label){case 0:return t=[],this._workletModules.forEach(function(e){return t.push(e)}),[4,Promise.all(t)];case 1:return e.sent(),[2]}})})},Object.defineProperty(e.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=0;if(this._latencyHint=t,pr(t))switch(t){case"interactive":e=.1;break;case"playback":e=.8;break;case"balanced":e=.25;break;case"fastest":e=.01}this.lookAhead=e,this.updateInterval=e/3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rawContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),e.prototype.now=function(){return this._context.currentTime+this.lookAhead},e.prototype.resume=function(){return"suspended"===this._context.state&&br(this._context)?this._context.resume():Promise.resolve()},e.prototype.close=function(){return Zr(this,void 0,void 0,function(){return Hr(this,function(t){switch(t.label){case 0:return br(this._context)?[4,this._context.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._initialized&&(e=this,Ur.forEach(function(t){return t(e)})),[2]}var e})})},e.prototype.getConstant=function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),r=0;r<n.length;r++)n[r]=t;var o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=e,o.loop=!0,o.start(0),this._constants.set(t,o),o},e.prototype.dispose=function(){var e=this;return t.prototype.dispose.call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(function(t){return e._constants[t].disconnect()}),this},e.prototype._timeoutLoop=function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()},e.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds},e.prototype.clearTimeout=function(t){var e=this;return this._timeouts.forEach(function(n){n.id===t&&e._timeouts.remove(n)}),this},e.prototype.clearInterval=function(t){return this.clearTimeout(t)},e.prototype.setInterval=function(t,e){var n=this,r=++this._timeoutIds;return function o(){var i=n.now();n._timeouts.add({callback:function(){t(),o()},id:r,time:i+e})}(),r},e}(Rr),Jr=(Qr=function(t,e){return(Qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Qr(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Kr=function(t){function e(){var e,n,r,o=t.call(this,{clockSource:"offline",context:gr(arguments[0])?arguments[0]:(e=arguments[0],n=arguments[1]*arguments[2],r=arguments[2],new Qn(e,n,r)),lookAhead:0,updateInterval:gr(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})||this;return o.name="OfflineContext",o._currentTime=0,o._duration=gr(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],o}return Jr(e,t),e.prototype.now=function(){return this._currentTime},Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!0,configurable:!0}),e.prototype._renderClock=function(){for(;this._duration-this._currentTime>=0;)this.emit("tick"),this._currentTime+=128/this.sampleRate},e.prototype.render=function(){return t=this,e=void 0,r=function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(t){switch(t.label){case 0:return[4,this.workletsAreReady()];case 1:return t.sent(),this._renderClock(),[2,this._context.startRendering()]}})},new((n=void 0)||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())});var t,e,n,r},e.prototype.close=function(){return Promise.resolve()},e}($r),to={destination:{},transport:{}},eo=to;function no(){return eo===to&&yr&&ro(new $r),eo}function ro(t){(eo=br(t)?new $r(t):gr(t)?new Kr(t):t).initialize()}function oo(){return eo.resume()}if(dr&&!dr.TONE_SILENCE_LOGGING);function io(t){return Math.pow(10,t/20)}function ao(t){return Math.log(t)/Math.LN10*20}function uo(t){return Math.pow(2,t/12)}var so=440;function co(t){return Math.round(function(t){return 69+12*Math.log2(t/so)}(t))}function lo(t){return so*Math.pow(2,(t-69)/12)}var po,fo,ho=(fo=function(t,e){return(fo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}fo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),yo=function(t){function e(e,n,r){var o=t.call(this)||this;return o.defaultUnits="s",o._val=n,o._units=r,o.context=e,o._expressions=o._getExpressions(),o}return ho(e,t),e.prototype._getExpressions=function(){var t=this;return{hz:{method:function(e){return t._frequencyToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(e){return t._ticksToUnits(parseInt(e,10))},regexp:/^(\d+)i$/i},m:{method:function(e){return t._beatsToUnits(parseInt(e,10)*t._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(e,n){var r=parseInt(e,10),o="."===n?1.5:1;return 1===r?t._beatsToUnits(t._getTimeSignature())*o:t._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:function(e){return t._expressions[t.defaultUnits].method.call(t,e)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(e){return t._secondsToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(e){return parseInt(e,10)/t.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(e){var n=parseInt(e,10);return t._beatsToUnits(8/(3*Math.floor(n)))},regexp:/^(\d+)t$/i},tr:{method:function(e,n,r){var o=0;return e&&"0"!==e&&(o+=t._beatsToUnits(t._getTimeSignature()*parseFloat(e))),n&&"0"!==n&&(o+=t._beatsToUnits(parseFloat(n))),r&&"0"!==r&&(o+=t._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}},e.prototype.valueOf=function(){if(this._val instanceof e&&this.fromType(this._val),or(this._val))return this._noArg();if(pr(this._val)&&or(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(sr(this._val)){var n=0;for(var r in this._val)if(ir(this._val[r])){var o=this._val[r];n+=new this.constructor(this.context,r).valueOf()*o}return n}if(ir(this._units)){var i=this._expressions[this._units],a=this._val.toString().trim().match(i.regexp);return a?i.method.apply(this,a.slice(1)):i.method.call(this,this._val)}return pr(this._val)?parseFloat(this._val):this._val},e.prototype._frequencyToUnits=function(t){return 1/t},e.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},e.prototype._secondsToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return t*this._beatsToUnits(1)/this._getPPQ()},e.prototype._noArg=function(){return this._now()},e.prototype._getBpm=function(){return this.context.transport.bpm.value},e.prototype._getTimeSignature=function(){return this.context.transport.timeSignature},e.prototype._getPPQ=function(){return this.context.transport.PPQ},e.prototype.fromType=function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this},e.prototype.toFrequency=function(){return 1/this.toSeconds()},e.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},e.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},e}(Er),_o=(po=function(t,e){return(po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}po(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),vo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Time",e}return _o(e,t),e.prototype._getExpressions=function(){var n=this;return Object.assign(t.prototype._getExpressions.call(this),{now:{method:function(t){return n._now()+new n.constructor(n.context,t).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(t){var r=new e(n.context,t).valueOf();return n._secondsToUnits(n.context.transport.nextSubdivision(r))},regexp:/^@(.+)/}})},e.prototype.quantize=function(t,e){void 0===e&&(e=1);var n=new this.constructor(this.context,t).valueOf(),r=this.valueOf();return r+(Math.round(r/n)*n-r)*e},e.prototype.toNotation=function(){for(var t=this,n=this.toSeconds(),r=["1m"],o=1;o<9;o++){var i=Math.pow(2,o);r.push(i+"n."),r.push(i+"n"),r.push(i+"t")}r.push("0");var a=r[0],u=new e(this.context,r[0]).toSeconds();return r.forEach(function(r){var o=new e(t.context,r).toSeconds();Math.abs(o-n)<Math.abs(u-n)&&(a=r,u=o)}),a},e.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var n=Math.floor(e/this._getTimeSignature()),r=e%1*4;e=Math.floor(e)%this._getTimeSignature();var o=r.toString();return o.length>3&&(r=parseFloat(parseFloat(o).toFixed(3))),[n,e,r].join(":")},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},e.prototype.toSeconds=function(){return this.valueOf()},e.prototype.toMidi=function(){return co(this.toFrequency())},e.prototype._now=function(){return this.context.now()},e}(yo);function mo(t,e){return new vo(no(),t,e)}var go,bo=(go=function(t,e){return(go=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}go(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),wo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Frequency",e.defaultUnits="hz",e}return bo(e,t),Object.defineProperty(e,"A4",{get:function(){return so},set:function(t){!function(t){so=t}(t)},enumerable:!0,configurable:!0}),e.prototype._getExpressions=function(){return Object.assign({},t.prototype._getExpressions.call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:e.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,n){var r=Oo[t.toLowerCase()]+12*(parseInt(n,10)+1);return"midi"===this.defaultUnits?r:e.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,n){var r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})},e.prototype.transpose=function(t){return new e(this.context,this.valueOf()*uo(t))},e.prototype.harmonize=function(t){var e=this;return t.map(function(t){return e.transpose(t)})},e.prototype.toMidi=function(){return co(this.valueOf())},e.prototype.toNote=function(){var t=this.toFrequency(),n=Math.log2(t/e.A4),r=Math.round(12*n)+57,o=Math.floor(r/12);return o<0&&(r+=-12*o),xo[r%12]+o.toString()},e.prototype.toSeconds=function(){return 1/t.prototype.toSeconds.call(this)},e.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())},e.prototype._noArg=function(){return 0},e.prototype._frequencyToUnits=function(t){return t},e.prototype._ticksToUnits=function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))},e.prototype._beatsToUnits=function(e){return 1/t.prototype._beatsToUnits.call(this,e)},e.prototype._secondsToUnits=function(t){return 1/t},e.mtof=function(t){return lo(t)},e.ftom=function(t){return co(t)},e}(vo),Oo={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},xo=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function To(t,e){return new wo(no(),t,e)}var ko,Ao=(ko=function(t,e){return(ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ko(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Co=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="TransportTime",e}return Ao(e,t),e.prototype._now=function(){return this.context.transport.seconds},e}(vo);function So(t,e){return new Co(no(),t,e)}var Po,jo,Eo,Do=(Eo=function(t,e){return(Eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Eo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Mo=function(t){function e(){var n=t.call(this)||this,r=Ar(e.getDefaults(),arguments,["context"]);return n.defaultContext?n.context=n.defaultContext:n.context=r.context,n}return Do(e,t),e.getDefaults=function(){return{context:no()}},e.prototype.now=function(){return this.context.currentTime+this.context.lookAhead},e.prototype.immediate=function(){return this.context.currentTime},Object.defineProperty(e.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate},enumerable:!0,configurable:!0}),e.prototype.toSeconds=function(t){return new vo(this.context,t).toSeconds()},e.prototype.toFrequency=function(t){return new wo(this.context,t).toFrequency()},e.prototype.toTicks=function(t){return new Co(this.context,t).toTicks()},e.prototype._getPartialProperties=function(t){var e=this.get();return Object.keys(e).forEach(function(n){or(t[n])&&delete e[n]}),e},e.prototype.get=function(){var t=this,n=this.constructor.getDefaults();return Object.keys(n).forEach(function(r){if(Reflect.has(t,r)){var o=t[r];ir(o)&&ir(o.value)&&ir(o.setValueAtTime)?n[r]=o.value:o instanceof e?n[r]=o._getPartialProperties(n[r]):lr(o)||ur(o)||pr(o)||cr(o)?n[r]=o:delete n[r]}}),n},e.prototype.set=function(t){var n=this;return Object.keys(t).forEach(function(r){Reflect.has(n,r)&&ir(n[r])&&(n[r]&&ir(n[r].value)&&ir(n[r].setValueAtTime)?n[r].value!==t[r]&&(n[r].value=t[r]):n[r]instanceof e?n[r].set(t[r]):n[r]=t[r])}),this},e}(Er),Ro=(jo=function(t,e){return(jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}jo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Io=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["param","units","convert"]))||this;n.name="Param",n.overridden=!1,n._minOutput=1e-7;var r=Ar(e.getDefaults(),arguments,["param","units","convert"]);for(n.assert(ir(r.param)&&(vr(r.param)||r.param instanceof e),"param must be an AudioParam");!vr(r.param);)r.param=r.param._param;return n._swappable=!!ir(r.swappable)&&r.swappable,n._swappable?(n.input=n.context.createGain(),n._param=r.param,n.input.connect(n._param)):n._param=n.input=r.param,n._events=new Lr(1e3),n._initialValue=n._param.defaultValue,n.units=r.units,n.convert=r.convert,n._minValue=r.minValue,n._maxValue=r.maxValue,ir(r.value)&&r.value!==n._toType(n._initialValue)&&n.setValueAtTime(r.value,0),n}return Ro(e,t),e.getDefaults=function(){return Object.assign(Mo.getDefaults(),{convert:!0,units:"number"})},Object.defineProperty(e.prototype,"value",{get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this._initialValue=this._fromType(t),this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return ir(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return ir(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue},enumerable:!0,configurable:!0}),e.prototype._is=function(t,e){return this.units===e},e.prototype._fromType=function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?io(t):this._is(t,"frequency")?this.toFrequency(t):this._is(t,"normalRange")?Math.min(Math.max(t,0),1):this._is(t,"audioRange")?Math.min(Math.max(t,-1),1):this._is(t,"positive")?Math.max(t,0):(this._is(t,"number"),t):t},e.prototype._toType=function(t){return this.convert&&"decibels"===this.units?ao(t):t},e.prototype.setValueAtTime=function(t,e){var n=this.toSeconds(e),r=this._fromType(t);return this.assert(isFinite(r)&&isFinite(n),"Invalid argument(s) to setValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this},e.prototype.getValueAtTime=function(t){var e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),r=this._events.get(e),o=this._initialValue;if(null===r)o=this._initialValue;else if("setTargetAtTime"!==r.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)o=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){var i=r.value;"setTargetAtTime"===r.type&&(i=null===(a=this._events.getBefore(r.time))?this._initialValue:a.value),o="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,i,n.time,n.value,e):this._exponentialInterpolate(r.time,i,n.time,n.value,e)}else o=r.value;else{var a,u;u=null===(a=this._events.getBefore(r.time))?this._initialValue:a.value,"setTargetAtTime"===r.type&&(o=this._exponentialApproach(r.time,u,r.value,r.constant,e))}return this._toType(o)},e.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this},e.prototype.linearRampToValueAtTime=function(t,e){var n=this._fromType(t),r=this.toSeconds(e);return this.assert(isFinite(n)&&isFinite(r),"Invalid argument(s) to linearRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(n,r),this},e.prototype.exponentialRampToValueAtTime=function(t,e){var n=this._fromType(t);n=Math.max(this._minOutput,n);var r=this.toSeconds(e);return this.assert(isFinite(n)&&isFinite(r),"Invalid argument(s) to exponentialRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(n,r),this},e.prototype.exponentialRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.linearRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this},e.prototype.targetRampTo=function(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);var r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this},e.prototype.setTargetAtTime=function(t,e,n){var r=this._fromType(t);this.assert(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");var o=this.toSeconds(e);return this.assert(isFinite(r)&&isFinite(o),"Invalid argument(s) to setTargetAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({constant:n,time:o,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,o,n),this._param.setTargetAtTime(r,o,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,r){void 0===r&&(r=1),n=this.toSeconds(n),e=this.toSeconds(e);var o=this._fromType(t[0])*r;this.setValueAtTime(this._toType(o),e);for(var i=n/(t.length-1),a=1;a<t.length;a++){var u=this._fromType(t[a])*r;this.linearRampToValueAtTime(this._toType(u),e+a*i)}return this},e.prototype.cancelScheduledValues=function(t){var e=this.toSeconds(t);return this.assert(isFinite(e),"Invalid argument to cancelScheduledValues: "+JSON.stringify(t)),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this},e.prototype.cancelAndHoldAtTime=function(t){var e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));this.assert(isFinite(e),"Invalid argument to cancelAndHoldAtTime: "+JSON.stringify(t)),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n),this._param.cancelScheduledValues(e);var r=this._events.get(e),o=this._events.getAfter(e);return r&&r.time===e?o?this._events.cancel(o.time):this._events.cancel(e+this.sampleTime):o&&(this._events.cancel(o.time),"linearRampToValueAtTime"===o.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===o.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this},e.prototype.rampTo=function(t,e,n){return void 0===e&&(e=.1),"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this},e.prototype.apply=function(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var n=this._events.get(e);if(n&&"setTargetAtTime"===n.type)for(var r=this._events.getAfter(n.time),o=r?r.time:e+2,i=(o-e)/10,a=e;a<o;a+=i)t.linearRampToValueAtTime(this.getValueAtTime(a),a);return this._events.forEachAfter(this.context.currentTime,function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this},e.prototype.setParam=function(t){this.assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events.dispose(),this},Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this._toType(this._param.defaultValue)},enumerable:!0,configurable:!0}),e.prototype._exponentialApproach=function(t,e,n,r,o){return n+(e-n)*Math.exp(-(o-t)/r)},e.prototype._linearInterpolate=function(t,e,n,r,o){return e+(o-t)/(n-t)*(r-e)},e.prototype._exponentialInterpolate=function(t,e,n,r,o){return e*Math.pow(r/e,(o-t)/(n-t))},e}(Mo),Vo=(Po=function(t,e){return(Po=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Po(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),No=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},qo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="AudioNode",e._internalChannels=[],e}return Vo(e,t),Object.defineProperty(e.prototype,"numberOfInputs",{get:function(){return ir(this.input)?vr(this.input)||this.input instanceof Io?1:this.input.numberOfInputs:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfOutputs",{get:function(){return ir(this.output)?this.output.numberOfOutputs:0},enumerable:!0,configurable:!0}),e.prototype._isAudioNode=function(t){return ir(t)&&(t instanceof e||mr(t))},e.prototype._getInternalNodes=function(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t},e.prototype._setChannelProperties=function(t){this._getInternalNodes().forEach(function(e){e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation})},e.prototype._getChannelProperties=function(){var t=this._getInternalNodes();this.assert(t.length>0,"ToneAudioNode does not have any internal nodes");var e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}},Object.defineProperty(e.prototype,"channelCount",{get:function(){return this._getChannelProperties().channelCount},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelCountMode",{get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"channelInterpretation",{get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))},enumerable:!0,configurable:!0}),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Bo(this,t,e,n),this},e.prototype.toDestination=function(){return this.connect(this.context.destination),this},e.prototype.toMaster=function(){return rr("toMaster() has been renamed toDestination()"),this.toDestination()},e.prototype.disconnect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),Lo(this,t,e,n),this},e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Fo.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(No(arguments[e]));return t}([this],t)),this},e.prototype.fan=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.forEach(function(e){return t.connect(e)}),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),ir(this.input)&&(this.input instanceof e?this.input.dispose():mr(this.input)&&this.input.disconnect()),ir(this.output)&&(this.output instanceof e?this.output.dispose():mr(this.output)&&this.output.disconnect()),this._internalChannels=[],this},e}(Mo);function Fo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();t.reduce(function(t,e){return t instanceof qo?t.connect(e):mr(t)&&Bo(t,e),e},n)}function Bo(t,e,n,r){for(void 0===n&&(n=0),void 0===r&&(r=0),Kn(ir(t),"Cannot connect from undefined node"),Kn(ir(e),"Cannot connect to undefined node"),(e instanceof qo||mr(e))&&Kn(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Kn(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof qo||e instanceof Io;)ir(e.input)&&(e=e.input);for(;t instanceof qo;)ir(t.output)&&(t=t.output);vr(e)?t.connect(e,n):t.connect(e,n,r)}function Lo(t,e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=0),ir(e))for(;e instanceof qo;)e.input&&(e=e.input);for(;!mr(t);)ir(t.output)&&(t=t.output);vr(e)?t.disconnect(e,n):mr(e)?t.disconnect(e,n,r):t.disconnect()}function Wo(t,e){lr(e)?e.forEach(function(e){return Wo(t,e)}):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function zo(t,e){lr(e)?e.forEach(function(e){return zo(t,e)}):Object.defineProperty(t,e,{writable:!0})}var Uo,Go,Qo=function(){},Xo=(Go=function(t,e){return(Go=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Go(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Yo=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["gain","units"]))||this;n.name="Gain",n._gainNode=n.context.createGain(),n.input=n._gainNode,n.output=n._gainNode;var r=Ar(e.getDefaults(),arguments,["gain","units"]);return n.gain=new Io({context:n.context,convert:r.convert,param:n._gainNode.gain,units:r.units,value:r.gain}),Wo(n,"gain"),n}return Xo(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{convert:!0,gain:1,units:"gain"})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.disconnect(),this.gain.dispose(),this},e}(qo),Zo=(Uo=function(t,e){return(Uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Uo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ho=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},$o=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Jo=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},Ko=function(t){function e(){var n=t.call(this)||this;n.name="ToneAudioBuffer",n.onload=Qo;var r=Ar(e.getDefaults(),arguments,["url","onload","onerror"]);return n.reverse=r.reverse,n.onload=r.onload,r.url&&wr(r.url)||r.url instanceof e?n.set(r.url):pr(r.url)&&n.load(r.url).catch(r.onerror),n}return Zo(e,t),e.getDefaults=function(){return{onerror:Qo,onload:Qo,reverse:!1}},Object.defineProperty(e.prototype,"sampleRate",{get:function(){return this._buffer?this._buffer.sampleRate:no().sampleRate},enumerable:!0,configurable:!0}),e.prototype.set=function(t){var n=this;return t instanceof e?t.loaded?this._buffer=t.get():t.onload=function(){n.set(t),n.onload(n)}:this._buffer=t,this._reversed&&this._reverse(),this},e.prototype.get=function(){return this._buffer},e.prototype.load=function(t){return Ho(this,void 0,void 0,function(){var n,r,o,i;return $o(this,function(a){switch(a.label){case 0:n=e.load(t),e.downloads.push(n),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n];case 2:return r=a.sent(),this.set(r),this.onload(this),[3,4];case 3:throw o=a.sent(),i=e.downloads.indexOf(n),e.downloads.splice(i,1),o;case 4:return[2,this]}})})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=void 0,this},e.prototype.fromArray=function(t){for(var e=lr(t)&&t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,o=no(),i=o.createBuffer(n,r,o.sampleRate),a=e||1!==n?t:[t],u=0;u<n;u++)i.copyToChannel(a[u],u);return this._buffer=i,this},e.prototype.toMono=function(t){if(ur(t))this.fromArray(this.toArray(t));else{for(var e=new Float32Array(this.length),n=this.numberOfChannels,r=0;r<n;r++)for(var o=this.toArray(r),i=0;i<o.length;i++)e[i]+=o[i];e=e.map(function(t){return t/n}),this.fromArray(e)}return this},e.prototype.toArray=function(t){if(ur(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);for(var e=[],n=0;n<this.numberOfChannels;n++)e[n]=this.getChannelData(n);return e},e.prototype.getChannelData=function(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)},e.prototype.slice=function(t,n){void 0===n&&(n=this.duration);var r=Math.floor(t*this.sampleRate),o=Math.floor(n*this.sampleRate);this.assert(r<o,"The start time must be less than the end time");for(var i=o-r,a=no().createBuffer(this.numberOfChannels,i,this.sampleRate),u=0;u<this.numberOfChannels;u++)a.copyToChannel(this.getChannelData(u).subarray(r,o),u);return new e(a)},e.prototype._reverse=function(){if(this.loaded)for(var t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this},Object.defineProperty(e.prototype,"loaded",{get:function(){return this.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reversed},set:function(t){this._reversed!==t&&(this._reversed=t,this._reverse())},enumerable:!0,configurable:!0}),e.fromArray=function(t){return(new e).fromArray(t)},e.fromUrl=function(t){return Ho(this,void 0,void 0,function(){return $o(this,function(n){switch(n.label){case 0:return[4,(new e).load(t)];case 1:return[2,n.sent()]}})})},e.load=function(t){return Ho(this,void 0,void 0,function(){var n,r,o,i,a,u,s,c,l,p;return $o(this,function(f){switch(f.label){case 0:if(n=t.match(/\[(.+\|?)+\]$/)){r=n[1].split("|"),o=r[0];try{for(i=Jo(r),a=i.next();!a.done;a=i.next())if(u=a.value,e.supportsType(u)){o=u;break}}catch(t){l={error:t}}finally{try{a&&!a.done&&(p=i.return)&&p.call(i)}finally{if(l)throw l.error}}t=t.replace(n[0],o)}return[4,fetch(e.baseUrl+t)];case 1:if(!(s=f.sent()).ok)throw new Error("could not load url: "+t);return[4,s.arrayBuffer()];case 2:return c=f.sent(),[4,no().decodeAudioData(c)];case 3:return[2,f.sent()]}})})},e.supportsType=function(t){var e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)},e.loaded=function(){return Ho(this,void 0,void 0,function(){var t,n,r,o,i;return $o(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),t=Jo(e.downloads),n=t.next(),a.label=1;case 1:return n.done?[3,4]:[4,n.value];case 2:a.sent(),a.label=3;case 3:return n=t.next(),[3,1];case 4:return[3,7];case 5:return r=a.sent(),o={error:r},[3,7];case 6:try{n&&!n.done&&(i=t.return)&&i.call(t)}finally{if(o)throw o.error}return[7];case 7:return[2]}})})},e.baseUrl="",e.downloads=[],e}(Er),ti=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})},ei=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};function ni(t,e,n,r){return void 0===n&&(n=2),void 0===r&&(r=no().sampleRate),ti(this,void 0,void 0,function(){var o,i,a,u;return ei(this,function(s){switch(s.label){case 0:return o=no(),ro(i=new Kr(n,e,r)),[4,t(i)];case 1:return s.sent(),a=i.render(),ro(o),[4,a];case 2:return u=s.sent(),[2,new Ko(u)]}})})}var ri,oi,ii,ai,ui,si,ci=(si=function(t,e){return(si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}si(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),li=function(t){function e(){var n=t.call(this)||this;n.name="ToneAudioBuffers",n._buffers=new Map,n._loadingCount=0;var r=Ar(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return n.baseUrl=r.baseUrl,Object.keys(r.urls).forEach(function(t){n._loadingCount++;var e=r.urls[t];n.add(t,e,n._bufferLoaded.bind(n,r.onload))}),n}return ci(e,t),e.getDefaults=function(){return{baseUrl:"",onerror:Qo,onload:Qo,urls:{}}},e.prototype.has=function(t){return this._buffers.has(t.toString())},e.prototype.get=function(t){return this.assert(this.has(t),"ToneAudioBuffers has no buffer named: "+t),this._buffers.get(t.toString())},e.prototype._bufferLoaded=function(t){this._loadingCount--,0===this._loadingCount&&t&&t()},Object.defineProperty(e.prototype,"loaded",{get:function(){return Array.from(this._buffers).every(function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2);return e[0],e[1].loaded})},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e,n){return void 0===n&&(n=Qo),pr(e)?this._buffers.set(t.toString(),new Ko(this.baseUrl+e,n)):this._buffers.set(t.toString(),new Ko(e,n)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffers.forEach(function(t){return t.dispose()}),this._buffers.clear(),this},e}(Er),pi=(ui=function(t,e){return(ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ui(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),fi=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["delayTime","maxDelay"]))||this;n.name="Delay";var r=Ar(e.getDefaults(),arguments,["delayTime","maxDelay"]),o=n.toSeconds(r.maxDelay);return n.maxDelay=Math.max(o,n.toSeconds(r.delayTime)),n._delayNode=n.input=n.output=n.context.createDelay(o),n.delayTime=new Io({context:n.context,param:n._delayNode.delayTime,units:"time",value:r.delayTime}),Wo(n,"delayTime"),n}return pi(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{delayTime:0,maxDelay:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this},e}(qo),hi=(ai=function(t,e){return(ai=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ai(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),di=function(t){function e(e){void 0===e&&(e="stopped");var n=t.call(this)||this;return n.name="StateTimeline",n._initial=e,n}return hi(e,t),e.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},e.prototype.setStateAtTime=function(t,e,n){return this.add(Object.assign({},n,{state:t,time:e})),this},e.prototype.getLastState=function(t,e){for(var n=this._search(e);n>=0;n--){var r=this._timeline[n];if(r.state===t)return r}},e.prototype.getNextState=function(t,e){var n=this._search(e);if(-1!==n)for(var r=n;r<this._timeline.length;r++){var o=this._timeline[r];if(o.state===t)return o}},e}(Lr),yi=(ii=function(t,e){return(ii=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ii(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_i=function(t){function e(e){var n=t.call(this,e)||this;return n.onended=Qo,n._startTime=-1,n._stopTime=-1,n._timeout=-1,n.output=new Yo({context:n.context,gain:0}),n._gainNode=n.output,n.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},n._fadeIn=e.fadeIn,n._fadeOut=e.fadeOut,n._curve=e.curve,n.onended=e.onended,n}return yi(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Qo})},e.prototype._startGain=function(t,e){void 0===e&&(e=1),this.assert(-1===this._startTime,"Source cannot be started more than once");var n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this},e.prototype.stop=function(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this},e.prototype._stopGain=function(t){var e=this;this.assert(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var n=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+n,this._stopTime=Math.max(this._stopTime,this.context.currentTime),n>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,n,t):this._gainNode.gain.targetRampTo(0,n,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){var t="exponential"===e._curve?2*n:0;e._stopSource(e.now()+t),e._onended()},this._stopTime-this.context.now()),this},e.prototype._onended=function(){var t=this;this.onended!==Qo&&(this.onended(this),this.onended=Qo,setTimeout(function(){return t.dispose()},1e3))},Object.defineProperty(e.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.cancelStop=function(){return this.log("cancelStop"),this.assert(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.disconnect(),this},e}(qo),vi=(oi=function(t,e){return(oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}oi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),mi=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["offset"]))||this;n.name="ToneConstantSource",n._source=n.context.createConstantSource();var r=Ar(e.getDefaults(),arguments,["offset"]);return Bo(n._source,n._gainNode),n.offset=new Io({context:n.context,convert:r.convert,param:n._source.offset,units:r.units,value:r.offset}),n}return vi(e,t),e.getDefaults=function(){return Object.assign(_i.getDefaults(),{convert:!0,offset:1,units:"number"})},e.prototype.start=function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this},e.prototype._stopSource=function(t){this._source.stop(t)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this},e}(_i),gi=(ri=function(t,e){return(ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ri(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),bi=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["value","units"]))||this;n.name="Signal",n.override=!0;var r=Ar(e.getDefaults(),arguments,["value","units"]);return n.output=n._constantSource=new mi({context:n.context,convert:r.convert,offset:r.value,units:r.units}),n._constantSource.start(0),n.input=n._param=n._constantSource.offset,n}return gi(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{convert:!0,units:"number",value:0})},e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),wi(this,t,e,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._constantSource.dispose(),this},e.prototype.setValueAtTime=function(t,e){return this._param.setValueAtTime(t,e),this},e.prototype.getValueAtTime=function(t){return this._param.getValueAtTime(t)},e.prototype.setRampPoint=function(t){return this._param.setRampPoint(t),this},e.prototype.linearRampToValueAtTime=function(t,e){return this._param.linearRampToValueAtTime(t,e),this},e.prototype.exponentialRampToValueAtTime=function(t,e){return this._param.exponentialRampToValueAtTime(t,e),this},e.prototype.exponentialRampTo=function(t,e,n){return this._param.exponentialRampTo(t,e,n),this},e.prototype.linearRampTo=function(t,e,n){return this._param.linearRampTo(t,e,n),this},e.prototype.targetRampTo=function(t,e,n){return this._param.targetRampTo(t,e,n),this},e.prototype.exponentialApproachValueAtTime=function(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this},e.prototype.setTargetAtTime=function(t,e,n){return this._param.setTargetAtTime(t,e,n),this},e.prototype.setValueCurveAtTime=function(t,e,n,r){return this._param.setValueCurveAtTime(t,e,n,r),this},e.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(t),this},e.prototype.cancelAndHoldAtTime=function(t){return this._param.cancelAndHoldAtTime(t),this},e.prototype.rampTo=function(t,e,n){return this._param.rampTo(t,e,n),this},Object.defineProperty(e.prototype,"value",{get:function(){return this._param.value},set:function(t){this._param.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convert",{get:function(){return this._param.convert},set:function(t){this._param.convert=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"units",{get:function(){return this._param.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overridden",{get:function(){return this._param.overridden},set:function(t){this._param.overridden=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxValue",{get:function(){return this._param.maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minValue",{get:function(){return this._param.minValue},enumerable:!0,configurable:!0}),e.prototype.apply=function(t){return this._param.apply(t),this},e}(qo);function wi(t,e,n,r){(e instanceof Io||vr(e)||e instanceof bi&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof bi&&(e.overridden=!0)),Bo(t,e,n,r)}var Oi,xi,Ti,ki,Ai=(ki=function(t,e){return(ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ki(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ci=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["value"]))||this;n.name="TickParam",n._events=new Lr(1/0),n._multiplier=1;var r=Ar(e.getDefaults(),arguments,["value"]);return n._multiplier=r.multiplier,n._events.cancel(0),n._events.add({ticks:0,time:0,type:"setValueAtTime",value:n._fromType(r.value)}),n.setValueAtTime(r.value,0),n}return Ai(e,t),e.getDefaults=function(){return Object.assign(Io.getDefaults(),{multiplier:1,units:"hertz",value:1})},e.prototype.setTargetAtTime=function(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);for(var r=this._fromType(t),o=this._events.get(e),i=Math.round(Math.max(1/n,1)),a=0;a<=i;a++){var u=n*a+e,s=this._exponentialApproach(o.time,o.value,r,n,u);this.linearRampToValueAtTime(this._toType(s),u)}return this},e.prototype.setValueAtTime=function(e,n){var r=this.toSeconds(n);t.prototype.setValueAtTime.call(this,e,n);var o=this._events.get(r),i=this._events.previousEvent(o),a=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(a,0),this},e.prototype.linearRampToValueAtTime=function(e,n){var r=this.toSeconds(n);t.prototype.linearRampToValueAtTime.call(this,e,n);var o=this._events.get(r),i=this._events.previousEvent(o),a=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(a,0),this},e.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e);for(var n=this._fromType(t),r=this._events.get(e),o=Math.round(Math.max(10*(e-r.time),1)),i=(e-r.time)/o,a=0;a<=o;a++){var u=i*a+r.time,s=this._exponentialInterpolate(r.time,r.value,e,n,u);this.linearRampToValueAtTime(this._toType(s),u)}return this},e.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(or(t.ticks)){var n=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(n,t.time)}var r=this._fromType(this.getValueAtTime(t.time)),o=this._fromType(this.getValueAtTime(e)),i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(o=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(r+o)+t.ticks},e.prototype.getTicksAtTime=function(t){var e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)},e.prototype.getDurationOfTicks=function(t,e){var n=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-n},e.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){var r=this._fromType(this.getValueAtTime(e.time)),o=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-e.time),i=Math.sqrt(Math.pow(r,2)-2*o*(e.ticks-t)),a=(-r+i)/o;return(a>0?a:(-r-i)/o)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},e.prototype.ticksToTime=function(t,e){return this.getDurationOfTicks(t,e)},e.prototype.timeToTicks=function(t,e){var n=this.toSeconds(e),r=this.toSeconds(t),o=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-o},e.prototype._fromType=function(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):t.prototype._fromType.call(this,e)},e.prototype._toType=function(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:t.prototype._toType.call(this,e)},Object.defineProperty(e.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.value=e},enumerable:!0,configurable:!0}),e}(Io),Si=(Ti=function(t,e){return(Ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ti(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Pi=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["value"]))||this;n.name="TickSignal";var r=Ar(e.getDefaults(),arguments,["value"]);return n.input=n._param=new Ci({context:n.context,convert:r.convert,multiplier:r.multiplier,param:n._constantSource.offset,units:r.units,value:r.value}),n}return Si(e,t),e.getDefaults=function(){return Object.assign(bi.getDefaults(),{multiplier:1,units:"hertz",value:1})},e.prototype.ticksToTime=function(t,e){return this._param.ticksToTime(t,e)},e.prototype.timeToTicks=function(t,e){return this._param.timeToTicks(t,e)},e.prototype.getTimeOfTick=function(t){return this._param.getTimeOfTick(t)},e.prototype.getDurationOfTicks=function(t,e){return this._param.getDurationOfTicks(t,e)},e.prototype.getTicksAtTime=function(t){return this._param.getTicksAtTime(t)},Object.defineProperty(e.prototype,"multiplier",{get:function(){return this._param.multiplier},set:function(t){this._param.multiplier=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this},e}(bi),ji=(xi=function(t,e){return(xi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}xi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ei=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency"]))||this;n.name="TickSource",n._state=new di,n._tickOffset=new Lr;var r=Ar(e.getDefaults(),arguments,["frequency"]);return n.frequency=new Pi({context:n.context,units:r.units,value:r.frequency}),Wo(n,"frequency"),n._state.setStateAtTime("stopped",0),n.setTicksAtTime(0,0),n}return ji(e,t),e.getDefaults=function(){return Object.assign({frequency:1,units:"hertz"},Mo.getDefaults())},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),ir(e)&&this.setTicksAtTime(e,n)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var n=this._state.get(e);n&&n.time>0&&(this._tickOffset.cancel(n.time),this._state.cancel(n.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this},e.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},e.prototype.getTicksAtTime=function(t){var e=this,n=this.toSeconds(t),r=this._state.getLastState("stopped",n);if(!r)return 0;var o={state:"paused",time:n};this._state.add(o);var i=r,a=0;return this._state.forEachBetween(r.time,n+this.sampleTime,function(t){var n=i.time,r=e._tickOffset.get(t.time);r&&r.time>=i.time&&(a=r.ticks,n=r.time),"started"===i.state&&"started"!==t.state&&(a+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(n)),i=t}),this._state.remove(o),a},Object.defineProperty(e.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){var e=this;t=this.toSeconds(t);var n=this._state.getLastState("stopped",t);if(!n)return 0;var r={state:"paused",time:t};this._state.add(r);var o=n,i=0;return this._state.forEachBetween(n.time,t+this.sampleTime,function(t){var n=o.time,r=e._tickOffset.get(t.time);r&&r.time>=o.time&&(i=r.seconds,n=r.time),"started"===o.state&&"started"!==t.state&&(i+=t.time-n),o=t}),this._state.remove(r),i},e.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this},e.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},e.prototype.getTimeOfTick=function(t,e){void 0===e&&(e=this.now());var n=this._tickOffset.get(e),r=this._state.get(e),o=Math.max(n.time,r.time),i=this.frequency.getTicksAtTime(o)+t-n.ticks;return this.frequency.getTimeOfTick(i)},e.prototype.forEachTickBetween=function(t,e,n){var r=this,o=this.toSeconds(t),i=this.toSeconds(e),a=this._state.get(o);this._state.forEachBetween(o,i,function(t){a&&"started"===a.state&&"started"!==t.state&&r.forEachTickBetween(Math.max(a.time,o),t.time-r.sampleTime,n),a=t});var u=null;if(a&&"started"===a.state&&this._state){var s=Math.max(a.time,o),c=this.frequency.getTicksAtTime(s),l=(c-this.frequency.getTicksAtTime(a.time))%1;0!==l&&(l=1-l);for(var p=this.frequency.getTimeOfTick(c+l);p<i&&this._state;){try{n(p,Math.round(this.getTicksAtTime(p)))}catch(t){u=t;break}this._state&&(p+=this.frequency.getDurationOfTicks(1,p))}}if(u)throw u;return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this},e}(Mo),Di=(Oi=function(t,e){return(Oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Oi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Mi=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["callback","frequency"]))||this;n.name="Clock",n.callback=Qo,n._lastUpdate=0,n._state=new di("stopped"),n._boundLoop=n._loop.bind(n);var r=Ar(e.getDefaults(),arguments,["callback","frequency"]);return n.callback=r.callback,n._tickSource=new Ei({context:n.context,frequency:r.frequency,units:r.units}),n._lastUpdate=0,n.frequency=n._tickSource.frequency,Wo(n,"frequency"),n._state.setStateAtTime("stopped",0),n.context.on("tick",n._boundLoop),n}return Di(e,t),e.getDefaults=function(){return Object.assign(Mo.getDefaults(),{callback:Qo,frequency:1,units:"hertz"})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this},e.prototype.stop=function(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this},e.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this},Object.defineProperty(e.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t},enumerable:!0,configurable:!0}),e.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},e.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},e.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},e.prototype.nextTickTime=function(t,e){var n=this.toSeconds(e),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+t,n)},e.prototype._loop=function(){var t=this,e=this._lastUpdate,n=this.now();this._lastUpdate=n,this.log("loop",e,n),e!==n&&(this._state.forEachBetween(e,n,function(e){switch(e.state){case"started":var n=t._tickSource.getTicksAtTime(e.time);t.emit("start",e.time,n);break;case"stopped":0!==e.time&&t.emit("stop",e.time);break;case"paused":t.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,n,function(e,n){t.callback(e,n)}))},e.prototype.getStateAtTime=function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this},e}(Mo);Rr.mixin(Mi);var Ri,Ii=(Ri=function(t,e){return(Ri=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ri(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Vi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Ticks",e.defaultUnits="i",e}return Ii(e,t),e.prototype._now=function(){return this.context.transport.ticks},e.prototype._beatsToUnits=function(t){return this._getPPQ()*t},e.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},e.prototype._ticksToUnits=function(t){return t},e.prototype.toTicks=function(){return this.valueOf()},e.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},e}(Co);function Ni(t,e){return new Vi(no(),t,e)}var qi,Fi=(qi=function(t,e){return(qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}qi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Bi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Midi",e.defaultUnits="midi",e}return Fi(e,t),e.prototype._frequencyToUnits=function(e){return co(t.prototype._frequencyToUnits.call(this,e))},e.prototype._ticksToUnits=function(e){return co(t.prototype._ticksToUnits.call(this,e))},e.prototype._beatsToUnits=function(e){return co(t.prototype._beatsToUnits.call(this,e))},e.prototype._secondsToUnits=function(e){return co(t.prototype._secondsToUnits.call(this,e))},e.prototype.toMidi=function(){return this.valueOf()},e.prototype.toFrequency=function(){return lo(this.toMidi())},e.prototype.transpose=function(t){return new e(this.context,this.toMidi()+t)},e}(wo);function Li(t,e){return new Bi(no(),t,e)}var Wi,zi,Ui,Gi,Qi=(Gi=function(t,e){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Gi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Xi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Draw",e.expiration=.25,e.anticipation=.008,e._events=new Lr,e._boundDrawLoop=e._drawLoop.bind(e),e._animationFrame=-1,e}return Qi(e,t),e.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this},e.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},e.prototype._drawLoop=function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this},e}(Mo),Yi=(Ui=function(t,e){return(Ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ui(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="IntervalTimeline",e._root=null,e._length=0,e}return Yi(e,t),e.prototype.add=function(t){this.assert(ir(t.time),"Events must have a time property"),this.assert(ir(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new Hi(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},e.prototype.remove=function(t){var e,n;if(null!==this._root){var r=[];this._root.search(t.time,r);try{for(var o=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(r),i=o.next();!i.done;i=o.next()){var a=i.value;if(a.event===t){this._removeNode(a),this._length--;break}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}return this},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),e.prototype.cancel=function(t){var e=this;return this.forEachFrom(t,function(t){return e.remove(t)}),this},e.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},e.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},e.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e=void 0,n=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()},e.prototype._rotateLeft=function(t){var e=t.parent,n=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)},e.prototype._rotateRight=function(t){var e=t.parent,n=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)},e.prototype._rebalance=function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},e.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var n=e[0],r=1;r<e.length;r++)e[r].low>n.low&&(n=e[r]);return n.event}}return null},e.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){return e.push(t)}),e.forEach(function(e){e.event&&t(e.event)})}return this},e.prototype.forEachAtTime=function(t,e){if(null!==this._root){var n=[];this._root.search(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},e.prototype.forEachFrom=function(t,e){if(null!==this._root){var n=[];this._root.searchAfter(t,n),n.forEach(function(t){t.event&&e(t.event)})}return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),null!==this._root&&this._root.traverse(function(t){return t.dispose()}),this._root=null,this},e}(Er),Hi=function(){function t(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}return t.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},t.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},t.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},t.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},t.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},t.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},t.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},t.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t}(),$i=(zi=function(t,e){return(zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}zi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ji=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["volume"]))||this;n.name="Volume";var r=Ar(e.getDefaults(),arguments,["volume"]);return n.input=n.output=new Yo({context:n.context,gain:r.volume,units:"decibels"}),n.volume=n.output.gain,Wo(n,"volume"),n._unmutedVolume=r.volume,n.mute=r.mute,n}return $i(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.volume.dispose(),this},e}(qo),Ki=(Wi=function(t,e){return(Wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Wi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ta=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ea=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this;n.name="Destination",n.input=new Ji({context:n.context}),n.output=new Yo({context:n.context}),n.volume=n.input.volume;var r=Ar(e.getDefaults(),arguments);return Fo(n.input,n.output,n.context.rawContext.destination),n.mute=r.mute,n}return Ki(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this.input.mute},set:function(t){this.input.mute=t},enumerable:!0,configurable:!0}),e.prototype.chain=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Fo.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(ta(arguments[e]));return t}(t)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.volume.dispose(),this},e}(qo);zr(function(t){t.destination=new ea({context:t})}),Gr(function(t){t.destination.dispose()});var na,ra,oa,ia=(oa=function(t,e){return(oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}oa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),aa=function(t){function e(e){var n=t.call(this)||this;return n.name="TimelineValue",n._timeline=new Lr({memory:10}),n._initialValue=e,n}return ia(e,t),e.prototype.set=function(t,e){return this._timeline.add({value:t,time:e}),this},e.prototype.get=function(t){var e=this._timeline.get(t);return e?e.value:this._initialValue},e}(Er),ua=function(){function t(e,n){this.id=t._eventId++;var r=Object.assign(t.getDefaults(),n);this.transport=e,this.callback=r.callback,this._once=r.once,this.time=r.time}return t.getDefaults=function(){return{callback:Qo,once:!1,time:0}},t.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))},t.prototype.dispose=function(){return this.callback=void 0,this},t._eventId=0,t}(),sa=(ra=function(t,e){return(ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ra(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ca=function(t){function e(n,r){var o=t.call(this,n,r)||this;o._currentId=-1,o._nextId=-1,o._nextTick=o.time,o._boundRestart=o._restart.bind(o);var i=Object.assign(e.getDefaults(),r);return o.duration=new Vi(n.context,i.duration).valueOf(),o._interval=new Vi(n.context,i.interval).valueOf(),o._nextTick=i.time,o.transport.on("start",o._boundRestart),o.transport.on("loopStart",o._boundRestart),o.context=o.transport.context,o._restart(),o}return sa(e,t),e.getDefaults=function(){return Object.assign({},ua.getDefaults(),{duration:1/0,interval:1,once:!1})},e.prototype.invoke=function(e){this._createEvents(e),t.prototype.invoke.call(this,e)},e.prototype._createEvents=function(t){var e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Vi(this.context,this._nextTick).toSeconds()))},e.prototype._restart=function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Vi(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Vi(this.context,this._nextTick).toSeconds())},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this},e}(ua),la=(na=function(t,e){return(na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}na(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),pa=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this;n.name="Transport",n._loop=new aa(!1),n._loopStart=0,n._loopEnd=0,n._scheduledEvents={},n._timeline=new Lr,n._repeatedEvents=new Zi,n._syncedSignals=[],n._swingAmount=0;var r=Ar(e.getDefaults(),arguments);return n._ppq=r.ppq,n._clock=new Mi({callback:n._processTick.bind(n),context:n.context,frequency:0,units:"bpm"}),n._bindClockEvents(),n.bpm=n._clock.frequency,n._clock.frequency.multiplier=r.ppq,n.bpm.value=r.bpm,Wo(n,"bpm"),n._timeSignature=r.timeSignature,n._swingTicks=r.ppq/2,n}return la(e,t),e.getDefaults=function(){return Object.assign(Mo.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})},e.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var n=e%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;t+=new Vi(this.context,2*this._swingTicks/3).toSeconds()*r}this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,function(e){return e.invoke(t)})},e.prototype.schedule=function(t,e){var n=new ua(this,{callback:t,time:new Co(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.scheduleRepeat=function(t,e,n,r){void 0===r&&(r=1/0);var o=new ca(this,{callback:t,duration:new vo(this.context,r).toTicks(),interval:new vo(this.context,e).toTicks(),time:new Co(this.context,n).toTicks()});return this._addEvent(o,this._repeatedEvents)},e.prototype.scheduleOnce=function(t,e){var n=new ua(this,{callback:t,once:!0,time:new Co(this.context,e).toTicks()});return this._addEvent(n,this._timeline)},e.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},e.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},e.prototype.cancel=function(t){var e=this;void 0===t&&(t=0);var n=this.toTicks(t);return this._timeline.forEachFrom(n,function(t){return e.clear(t.id)}),this._repeatedEvents.forEachFrom(n,function(t){return e.clear(t.id)}),this},e.prototype._bindClockEvents=function(){var t=this;this._clock.on("start",function(e,n){n=new Vi(t.context,n).toSeconds(),t.emit("start",e,n)}),this._clock.on("stop",function(e){t.emit("stop",e)}),this._clock.on("pause",function(e){t.emit("pause",e)})},Object.defineProperty(e.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){var n;return ir(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this},e.prototype.stop=function(t){return this._clock.stop(t),this},e.prototype.pause=function(t){return this._clock.pause(t),this},e.prototype.toggle=function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this},Object.defineProperty(e.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){lr(t)&&(t=t[0]/t[1]*4),this._timeSignature=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new vo(this.context,this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new vo(this.context,this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop.get(this.now())},set:function(t){this._loop.set(t,this.now())},enumerable:!0,configurable:!0}),e.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(e.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swingSubdivision",{get:function(){return new Vi(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new Vi(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();"started"===this.state?(this.emit("stop",e),this._clock.setTicksAtTime(t,e),this.emit("start",e,this.seconds)):this._clock.setTicksAtTime(t,e)}},enumerable:!0,configurable:!0}),e.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},e.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(e.prototype,"PPQ",{get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t},enumerable:!0,configurable:!0}),e.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)},e.prototype.syncSignal=function(t,e){if(!e){var n=this.now();if(0!==t.getValueAtTime(n)){var r=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/r}else e=0}var o=new Yo(e);return this.bpm.connect(o),o.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:o,signal:t}),t.value=0,this},e.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._clock.dispose(),zo(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this},e}(Mo);Rr.mixin(pa),zr(function(t){t.transport=new pa({context:t})}),Gr(function(t){t.transport.dispose()});var fa,ha,da,ya,_a,va,ma,ga,ba,wa,Oa,xa,Ta,ka,Aa,Ca,Sa,Pa,ja,Ea,Da,Ma,Ra,Ia,Va,Na,qa,Fa,Ba,La,Wa,za,Ua,Ga,Qa,Xa,Ya,Za,Ha,$a,Ja,Ka,tu,eu,nu,ru,ou,iu,au,uu,su,cu,lu,pu,fu,hu=o(1),du=(fu=function(t,e){return(fu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}fu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),yu=function(t){function e(e){var n=t.call(this,e)||this;return n.input=void 0,n._state=new di("stopped"),n._synced=!1,n._scheduled=[],n._syncedStart=Qo,n._syncedStop=Qo,n._state.memory=100,n._volume=n.output=new Ji({context:n.context,mute:e.mute,volume:e.volume}),n.volume=n._volume.volume,Wo(n,"volume"),n.onstop=e.onstop,n}return du(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{mute:!1,onstop:Qo,volume:0})},Object.defineProperty(e.prototype,"state",{get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),e.prototype._clampToCurrentTime=function(t){return this._synced?t:Math.max(t,this.context.currentTime)},e.prototype.start=function(t,e,n){var r=this,o=or(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(o=this._clampToCurrentTime(o),"started"===this._state.getValueAtTime(o))this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,e,n);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){var i=this._state.get(o);i&&(i.offset=this.toSeconds(Cr(e,0)),i.duration=n?this.toSeconds(n):void 0);var a=this.context.transport.schedule(function(t){r._start(t,e,n)},o);this._scheduled.push(a),"started"===this.context.transport.state&&this._syncedStart(this.now(),this.context.transport.seconds)}else this._start(o,e,n);return this},e.prototype.stop=function(t){var e=or(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this.log("stop",e),this._synced){var n=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(n)}else this._stop(e);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this},e.prototype.sync=function(){var t=this;return this._synced||(this._synced=!0,this._syncedStart=function(e,n){if(n>0){var r=t._state.get(n);if(r&&"started"===r.state&&r.time!==n){var o=n-t.toSeconds(r.time),i=void 0;r.duration&&(i=t.toSeconds(r.duration)-o),t._start(e,t.toSeconds(r.offset)+o,i)}}},this._syncedStop=function(e){var n=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(n)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this},e.prototype.unsync=function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(function(e){return t.context.transport.clear(e)}),this._scheduled=[],this._state.cancel(0),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.onstop=Qo,this.unsync(),this._volume.dispose(),this._state.dispose(),this},e}(qo),_u=(pu=function(t,e){return(pu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}pu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),vu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["buffer","onload"]))||this;n.name="ToneBufferSource",n._source=n.context.createBufferSource(),n._internalChannels=[n._source],n._sourceStarted=!1,n._sourceStopped=!1;var r=Ar(e.getDefaults(),arguments,["buffer","onload"]);return Bo(n._source,n._gainNode),n._source.onended=function(){return n._stopSource()},n.playbackRate=new Io({context:n.context,param:n._source.playbackRate,units:"positive",value:r.playbackRate}),n.loop=r.loop,n.loopStart=r.loopStart,n.loopEnd=r.loopEnd,n._buffer=new Ko(r.buffer,r.onload),n._internalChannels.push(n._source),n}return _u(e,t),e.getDefaults=function(){return Object.assign(_i.getDefaults(),{buffer:new Ko,loop:!1,loopEnd:0,loopStart:0,onload:Qo,playbackRate:1})},Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curve",{get:function(){return this._curve},set:function(t){this._curve=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,n,r){void 0===r&&(r=1),this.assert(this.buffer.loaded,"buffer is either not set or not loaded");var o=this.toSeconds(t);this._startGain(o,r),e=this.loop?Cr(e,this.loopStart):Cr(e,0);var i,a,u=Math.max(this.toSeconds(e),0);if(this.loop){var s=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=s-c;(Vr(i=u,a=s)||qr(i,a))&&(u=(u-c)%l+c)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Nr(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(o,u)),ir(n)){var p=this.toSeconds(n);p=Math.max(p,0),this.stop(o+p)}return this},e.prototype._stopSource=function(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())},Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(t){this._source.loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(t){this._source.loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._source.loop},set:function(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this},e}(_i),mu=(lu=function(t,e){return(lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}lu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),gu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["type"]))||this;n.name="Noise",n._source=null;var r=Ar(e.getDefaults(),arguments,["type"]);return n._playbackRate=r.playbackRate,n.type=r.type,n._fadeIn=r.fadeIn,n._fadeOut=r.fadeOut,n}return mu(e,t),e.getDefaults=function(){return Object.assign(yu.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){if(this.assert(t in wu,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){var e=this.now();this._stop(e),this._start(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)},enumerable:!0,configurable:!0}),e.prototype._start=function(t){var e=this,n=wu[this._type];this._source=new vu({buffer:n,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:function(){return e.onstop(e)},playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(n.duration-.001))},e.prototype._stop=function(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)},Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)},enumerable:!0,configurable:!0}),e.prototype.restart=function(t){return this._stop(t),this._start(t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source&&this._source.disconnect(),this},e}(yu),bu={brown:null,pink:null,white:null},wu={get brown(){if(!bu.brown){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var r=0,o=0;o<220500;o++){var i=2*Math.random()-1;n[o]=(r+.02*i)/1.02,r=n[o],n[o]*=3.5}}bu.brown=(new Ko).fromArray(t)}return bu.brown},get pink(){if(!bu.pink){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;var r=void 0,o=void 0,i=void 0,a=void 0,u=void 0,s=void 0,c=void 0;r=o=i=a=u=s=c=0;for(var l=0;l<220500;l++){var p=2*Math.random()-1;r=.99886*r+.0555179*p,o=.99332*o+.0750759*p,i=.969*i+.153852*p,a=.8665*a+.3104856*p,u=.55*u+.5329522*p,s=-.7616*s-.016898*p,n[l]=r+o+i+a+u+s+c+.5362*p,n[l]*=.11,c=.115926*p}}bu.pink=(new Ko).fromArray(t)}return bu.pink},get white(){if(!bu.white){for(var t=[],e=0;e<2;e++){var n=new Float32Array(220500);t[e]=n;for(var r=0;r<220500;r++)n[r]=2*Math.random()-1}bu.white=(new Ko).fromArray(t)}return bu.white}},Ou=(cu=function(t,e){return(cu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}cu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),xu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="ToneOscillatorNode",n._oscillator=n.context.createOscillator(),n._internalChannels=[n._oscillator];var r=Ar(e.getDefaults(),arguments,["frequency","type"]);return Bo(n._oscillator,n._gainNode),n.type=r.type,n.frequency=new Io({context:n.context,param:n._oscillator.frequency,units:"frequency",value:r.frequency}),n.detune=new Io({context:n.context,param:n._oscillator.detune,units:"cents",value:r.detune}),n}return Ou(e,t),e.getDefaults=function(){return Object.assign(_i.getDefaults(),{detune:0,frequency:440,type:"sine"})},e.prototype.start=function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this},e.prototype._stopSource=function(t){this._oscillator.stop(t)},e.prototype.setPeriodicWave=function(t){return this._oscillator.setPeriodicWave(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._oscillator.type},set:function(t){this._oscillator.type=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this},e}(_i),Tu=(su=function(t,e){return(su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}su(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ku=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Au=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="Oscillator",n._oscillator=null;var r=Ar(e.getDefaults(),arguments,["frequency","type"]);return n.frequency=new bi({context:n.context,units:"frequency",value:r.frequency}),Wo(n,"frequency"),n.detune=new bi({context:n.context,units:"cents",value:r.detune}),Wo(n,"detune"),n._partials=r.partials,n._partialCount=r.partialCount,n._type=r.type,r.partialCount&&"custom"!==r.type&&(n._type=n.baseType+r.partialCount.toString()),n.phase=r.phase,n}return Tu(e,t),e.getDefaults=function(){return Object.assign(yu.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})},e.prototype._start=function(t){var e=this,n=this.toSeconds(t),r=new xu({context:this.context,onended:function(){return e.onstop(e)}});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(n)},e.prototype._stop=function(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)},e.prototype.restart=function(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this},e.prototype.syncFrequency=function(){return this.context.transport.syncSignal(this.frequency),this},e.prototype.unsyncFrequency=function(){return this.context.transport.unsyncSignal(this.frequency),this},e.prototype._getCachedPeriodicWave=function(){var t=this;if("custom"===this._type)return(n=e._periodicWaveCache.find(function(e){return e.phase===t._phase&&(n=e.partials,r=t._partials,n.length===r.length&&n.every(function(t,e){return r[e]===t}));var n,r}))&&[n.real,n.imag];var n=e._periodicWaveCache.find(function(e){return e.type===t._type&&e.phase===t._phase});return this._partialCount=n?n.partialCount:this._partialCount,n&&[n.real,n.imag]},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t;var n=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&n)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{var r=this._getCachedPeriodicWave();if(ir(r)){var o=ku(r,2),i=o[0],a=o[1];this._wave=this.context.createPeriodicWave(i,a),null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var u=ku(this._getRealImaginary(t,this._phase),2),s=(i=u[0],a=u[1],this.context.createPeriodicWave(i,a));this._wave=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),e._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type}),e._periodicWaveCache.length>100&&e._periodicWaveCache.shift()}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){var e=this._type,n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);n&&(e=n[1]),"custom"!==this._type&&(this.type=0===t?e:e+t.toString())},enumerable:!0,configurable:!0}),e.prototype.get=function(){var e=t.prototype.get.call(this);return"custom"!==e.type&&delete e.partials,e},e.prototype._getRealImaginary=function(t,e){var n=2048,r=new Float32Array(n),o=new Float32Array(n),i=1;if("custom"===t){if(i=this._partials.length+1,this._partialCount=this._partials.length,n=i,0===this._partials.length)return[r,o]}else{var a=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);a?(i=parseInt(a[2],10)+1,this._partialCount=parseInt(a[2],10),t=a[1],n=i=Math.max(i,2)):this._partialCount=0,this._partials=[]}for(var u=1;u<n;++u){var s=2/(u*Math.PI),c=void 0;switch(t){case"sine":c=u<=i?1:0,this._partials[u-1]=c;break;case"square":c=1&u?2*s:0,this._partials[u-1]=c;break;case"sawtooth":c=s*(1&u?1:-1),this._partials[u-1]=c;break;case"triangle":c=1&u?s*s*2*(u-1>>1&1?-1:1):0,this._partials[u-1]=c;break;case"custom":c=this._partials[u-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==c?(r[u]=-c*Math.sin(e*u),o[u]=c*Math.cos(e*u)):(r[u]=0,o[u]=0)}return[r,o]},e.prototype._inverseFFT=function(t,e,n){for(var r=0,o=t.length,i=0;i<o;i++)r+=t[i]*Math.cos(i*n)+e[i]*Math.sin(i*n);return r},e.prototype.getInitialValue=function(){for(var t=ku(this._getRealImaginary(this._type,0),2),e=t[0],n=t[1],r=0,o=2*Math.PI,i=0;i<32;i++)r=Math.max(this._inverseFFT(e,n,i/32*o),r);return-this._inverseFFT(e,n,this._phase)/r},Object.defineProperty(e.prototype,"partials",{get:function(){return this._partials},set:function(t){this._partials=t,t.length&&(this.type="custom")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this},e._periodicWaveCache=[],e}(yu),Cu=(uu=function(t,e){return(uu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}uu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Su=function(t){function e(){return t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["context"])))||this}return Cu(e,t),e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),wi(this,t,e,n),this},e}(qo),Pu=(au=function(t,e){return(au=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}au(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ju=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["mapping","length"])))||this;n.name="WaveShaper",n._shaper=n.context.createWaveShaper(),n.input=n._shaper,n.output=n._shaper;var r=Ar(e.getDefaults(),arguments,["mapping","length"]);return lr(r.mapping)||r.mapping instanceof Float32Array?n.curve=Float32Array.from(r.mapping):ar(r.mapping)&&n.setMap(r.mapping,r.length),n}return Pu(e,t),e.getDefaults=function(){return Object.assign(bi.getDefaults(),{length:1024})},e.prototype.setMap=function(t,e){void 0===e&&(e=1024);for(var n=new Float32Array(e),r=0,o=e;r<o;r++){var i=r/(o-1)*2-1;n[r]=t(i,r)}return this.curve=n,this},Object.defineProperty(e.prototype,"curve",{get:function(){return this._shaper.curve},set:function(t){this._shaper.curve=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){var e=["none","2x","4x"].some(function(e){return e.includes(t)});this.assert(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._shaper.disconnect(),this},e}(Su),Eu=(iu=function(t,e){return(iu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}iu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Du=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="AudioToGain",e._norm=new ju({context:e.context,mapping:function(t){return(t+1)/2}}),e.input=e._norm,e.output=e._norm,e}return Eu(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},e}(Su),Mu=(ou=function(t,e){return(ou=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ou(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ru=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["value"])))||this;n.name="Multiply",n.override=!1,n._mult=new Yo({context:n.context}),n.input=n._mult,n.output=n._mult;var r=Ar(e.getDefaults(),arguments,["value"]);return n.factor=n._param=n._mult.gain,n.factor.setValueAtTime(r.value,0),n}return Mu(e,t),e.getDefaults=function(){return Object.assign(bi.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._mult.dispose(),this},e}(bi),Iu=(ru=function(t,e){return(ru=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ru(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Vu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type","modulationType"]))||this;n.name="AMOscillator",n._modulationScale=new Du({context:n.context}),n._modulationNode=new Yo({context:n.context});var r=Ar(e.getDefaults(),arguments,["frequency","type","modulationType"]);return n._carrier=new Au({context:n.context,detune:r.detune,frequency:r.frequency,onstop:function(){return n.onstop(n)},phase:r.phase,type:r.type}),n.frequency=n._carrier.frequency,n.detune=n._carrier.detune,n._modulator=new Au({context:n.context,phase:r.phase,type:r.modulationType}),n.harmonicity=new Ru({context:n.context,units:"positive",value:r.harmonicity}),n.frequency.chain(n.harmonicity,n._modulator.frequency),n._modulator.chain(n._modulationScale,n._modulationNode.gain),n._carrier.chain(n._modulationNode,n.output),Wo(n,["frequency","detune","harmonicity"]),n}return Iu(e,t),e.getDefaults=function(){return Object.assign(Au.getDefaults(),{harmonicity:1,modulationType:"square"})},e.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},e.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},e.prototype.restart=function(t){return this._modulator.restart(t),this._carrier.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this},e}(yu),Nu=(nu=function(t,e){return(nu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}nu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),qu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type","modulationType"]))||this;n.name="FMOscillator",n._modulationNode=new Yo({context:n.context,gain:0});var r=Ar(e.getDefaults(),arguments,["frequency","type","modulationType"]);return n._carrier=new Au({context:n.context,detune:r.detune,frequency:0,onstop:function(){return n.onstop(n)},phase:r.phase,type:r.type}),n.detune=n._carrier.detune,n.frequency=new bi({context:n.context,units:"frequency",value:r.frequency}),n._modulator=new Au({context:n.context,phase:r.phase,type:r.modulationType}),n.harmonicity=new Ru({context:n.context,units:"positive",value:r.harmonicity}),n.modulationIndex=new Ru({context:n.context,units:"positive",value:r.modulationIndex}),n.frequency.connect(n._carrier.frequency),n.frequency.chain(n.harmonicity,n._modulator.frequency),n.frequency.chain(n.modulationIndex,n._modulationNode),n._modulator.connect(n._modulationNode.gain),n._modulationNode.connect(n._carrier.frequency),n._carrier.connect(n.output),n.detune.connect(n._modulator.detune),Wo(n,["modulationIndex","frequency","detune","harmonicity"]),n}return Nu(e,t),e.getDefaults=function(){return Object.assign(Au.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})},e.prototype._start=function(t){this._modulator.start(t),this._carrier.start(t)},e.prototype._stop=function(t){this._modulator.stop(t),this._carrier.stop(t)},e.prototype.restart=function(t){return this._modulator.restart(t),this._carrier.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return this._carrier.type},set:function(t){this._carrier.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(t){this._carrier.baseType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(t){this._carrier.partialCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(t){this._modulator.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._carrier.phase},set:function(t){this._carrier.phase=t,this._modulator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._carrier.partials},set:function(t){this._carrier.partials=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this},e}(yu),Fu=(eu=function(t,e){return(eu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}eu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Bu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","width"]))||this;n.name="PulseOscillator",n._widthGate=new Yo({context:n.context,gain:0}),n._thresh=new ju({context:n.context,mapping:function(t){return t<=0?-1:1}});var r=Ar(e.getDefaults(),arguments,["frequency","width"]);return n.width=new bi({context:n.context,units:"audioRange",value:r.width}),n._sawtooth=new Au({context:n.context,detune:r.detune,frequency:r.frequency,onstop:function(){return n.onstop(n)},phase:r.phase,type:"sawtooth"}),n.frequency=n._sawtooth.frequency,n.detune=n._sawtooth.detune,n._sawtooth.chain(n._thresh,n.output),n.width.chain(n._widthGate,n._thresh),Wo(n,["width","frequency","detune"]),n}return Fu(e,t),e.getDefaults=function(){return Object.assign(yu.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})},e.prototype._start=function(t){t=this.toSeconds(t),this._sawtooth.start(t),this._widthGate.gain.setValueAtTime(1,t)},e.prototype._stop=function(t){t=this.toSeconds(t),this._sawtooth.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)},e.prototype.restart=function(t){var e=this.toSeconds(t);return this._sawtooth.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e),this},Object.defineProperty(e.prototype,"phase",{get:function(){return this._sawtooth.phase},set:function(t){this._sawtooth.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sawtooth.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this},e}(yu),Lu=(tu=function(t,e){return(tu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}tu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Wu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type","spread"]))||this;n.name="FatOscillator",n._oscillators=[];var r=Ar(e.getDefaults(),arguments,["frequency","type","spread"]);return n.frequency=new bi({context:n.context,units:"frequency",value:r.frequency}),n.detune=new bi({context:n.context,units:"cents",value:r.detune}),n._spread=r.spread,n._type=r.type,n._phase=r.phase,n._partials=r.partials,n._partialCount=r.partialCount,n.count=r.count,Wo(n,["frequency","detune"]),n}return Lu(e,t),e.getDefaults=function(){return Object.assign(Au.getDefaults(),{count:3,spread:20,type:"sawtooth"})},e.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){return e.start(t)})},e.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){return e.stop(t)})},e.prototype.restart=function(t){return t=this.toSeconds(t),this._forEach(function(e){return e.restart(t)}),this},e.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){return e.type=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,n=t/(this._oscillators.length-1);this._forEach(function(t,r){return t.detune.value=e+n*r})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._oscillators.length},set:function(t){var e=this;if(t=Math.max(t,1),this._oscillators.length!==t){this._forEach(function(t){return t.dispose()}),this._oscillators=[];for(var n=0;n<t;n++){var r=new Au({context:this.context,onstop:0===n?function(){return e.onstop(e)}:Qo});"custom"===this.type?r.partials=this._partials:r.type=this._type,r.partialCount=this._partialCount,r.phase=this._phase+n/t*360,r.volume.value=-6-1.1*t,this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.connect(this.output),this._oscillators[n]=r}this.spread=this._spread,"started"===this.state&&this._forEach(function(t){return t.start()})}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){return e.phase=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach(function(e){return e.baseType=t}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,t.length&&(this._type="custom",this._forEach(function(e){return e.partials=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach(function(e){return e.partialCount=t}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach(function(t){return t.dispose()}),this},e}(yu),zu=(Ka=function(t,e){return(Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ka(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Uu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","modulationFrequency"]))||this;n.name="PWMOscillator",n.sourceType="pwm",n._scale=new Ru({context:n.context,value:2});var r=Ar(e.getDefaults(),arguments,["frequency","modulationFrequency"]);return n._pulse=new Bu({context:n.context,frequency:r.modulationFrequency}),n._pulse._sawtooth.type="sine",n.modulationFrequency=n._pulse.frequency,n._modulator=new Au({context:n.context,detune:r.detune,frequency:r.frequency,onstop:function(){return n.onstop(n)},phase:r.phase}),n.frequency=n._modulator.frequency,n.detune=n._modulator.detune,n._modulator.chain(n._scale,n._pulse.width),n._pulse.connect(n.output),Wo(n,["modulationFrequency","frequency","detune"]),n}return zu(e,t),e.getDefaults=function(){return Object.assign(yu.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})},e.prototype._start=function(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)},e.prototype._stop=function(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)},e.prototype.restart=function(t){return this._modulator.restart(t),this._pulse.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseType",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"phase",{get:function(){return this._modulator.phase},set:function(t){this._modulator.phase=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this},e}(yu),Gu=(Ja=function(t,e){return(Ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ja(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qu={am:Vu,fat:Wu,fm:qu,oscillator:Au,pulse:Bu,pwm:Uu},Xu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="OmniOscillator";var r=Ar(e.getDefaults(),arguments,["frequency","type"]);return n.frequency=new bi({context:n.context,units:"frequency",value:r.frequency}),n.detune=new bi({context:n.context,units:"cents",value:r.detune}),Wo(n,["frequency","detune"]),n.set(r),n}return Gu(e,t),e.getDefaults=function(){return Object.assign(Au.getDefaults(),qu.getDefaults(),Vu.getDefaults(),Wu.getDefaults(),Bu.getDefaults(),Uu.getDefaults())},e.prototype._start=function(t){this._oscillator.start(t)},e.prototype._stop=function(t){this._oscillator.stop(t)},e.prototype.restart=function(t){return this._oscillator.restart(t),this},Object.defineProperty(e.prototype,"type",{get:function(){var t=this,e="";return["am","fm","fat"].some(function(e){return t._sourceType===e})&&(e=this._sourceType),e+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)},enumerable:!0,configurable:!0}),e.prototype.set=function(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),t.prototype.set.call(this,e),this},e.prototype._createNewOscillator=function(t){var e=this;if(t!==this._sourceType){this._sourceType=t;var n=Qu[t],r=this.now();if(this._oscillator){var o=this._oscillator;o.stop(r),this.context.setTimeout(function(){return o.dispose()},this.blockTime)}this._oscillator=new n({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return e.onstop(e)},"started"===this.state&&this._oscillator.start(r)}},Object.defineProperty(e.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceType",{get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")},enumerable:!0,configurable:!0}),e.prototype._getOscType=function(t,e){return t instanceof Qu[e]},Object.defineProperty(e.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&ur(t)&&(this._oscillator.count=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spread",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&ur(t)&&(this._oscillator.spread=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationType",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&pr(t)&&(this._oscillator.modulationType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationIndex",{get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"harmonicity",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modulationFrequency",{get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this},e}(yu),Yu=($a=function(t,e){return($a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}$a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Zu=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["url","onload"]))||this;n.name="Player",n._activeSources=new Set;var r=Ar(e.getDefaults(),arguments,["url","onload"]);return n._buffer=new Ko({onload:n._onload.bind(n,r.onload),reverse:r.reverse,url:r.url}),n.autostart=r.autostart,n._loop=r.loop,n._loopStart=r.loopStart,n._loopEnd=r.loopEnd,n._playbackRate=r.playbackRate,n.fadeIn=r.fadeIn,n.fadeOut=r.fadeOut,n}return Yu(e,t),e.getDefaults=function(){return Object.assign(yu.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Qo,playbackRate:1,reverse:!1})},e.prototype.load=function(t){return function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(e){switch(e.label){case 0:return[4,this._buffer.load(t)];case 1:return e.sent(),this._onload(),[2,this]}})})},e.prototype._onload=function(t){void 0===t&&(t=Qo),t(),this.autostart&&this.start()},e.prototype._onSourceEnd=function(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||this._state.setStateAtTime("stopped",this.now())},e.prototype.start=function(e,n,r){return t.prototype.start.call(this,e,n,r),this},e.prototype._start=function(t,e,n){e=this._loop?Cr(e,this._loopStart):Cr(e,0);var r=this.toSeconds(e);this._synced&&(r*=this._playbackRate);var o=n;n=Cr(n,Math.max(this._buffer.duration-r,0));var i=this.toSeconds(n);i/=this._playbackRate,t=this.toSeconds(t);var a=new vu({buffer:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||this._state.setStateAtTime("stopped",t+i,{implicitEnd:!0}),this._activeSources.add(a),this._loop&&or(o)?a.start(t,r):a.start(t,r,i-this.toSeconds(this.fadeOut))},e.prototype._stop=function(t){var e=this.toSeconds(t);this._activeSources.forEach(function(t){return t.stop(e)})},e.prototype.restart=function(t,e,n){return this._stop(t),this._start(t,e,n),this},e.prototype.seek=function(t,e){var n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){var r=this.toSeconds(t);this._stop(n),this._start(n,r)}return this},e.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._activeSources.forEach(function(e){e.loopStart=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._activeSources.forEach(function(e){e.loopEnd=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(function(e){e.loop=t}),t)){var e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(function(t){return t.cancelStop()})),this._activeSources.forEach(function(n){n.playbackRate.setValueAtTime(t,e)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffer.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._activeSources.forEach(function(t){return t.dispose()}),this._activeSources.clear(),this._buffer.dispose(),this},e}(yu),Hu=(Ha=function(t,e){return(Ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ha(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),$u=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["urls","onload"],"urls"))||this;n.name="Players",n.input=void 0,n._players=new Map;var r=Ar(e.getDefaults(),arguments,["urls","onload"],"urls");return n._volume=n.output=new Ji({context:n.context,volume:r.volume}),n.volume=n._volume.volume,Wo(n,"volume"),n._buffers=new li(r.urls,r.onload,r.baseUrl),n.mute=r.mute,n._fadeIn=r.fadeIn,n._fadeOut=r.fadeOut,n}return Hu(e,t),e.getDefaults=function(){return Object.assign(yu.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Qo,urls:{},volume:0})},Object.defineProperty(e.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(t){this._fadeIn=t,this._players.forEach(function(e){e.fadeIn=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(t){this._fadeOut=t,this._players.forEach(function(e){e.fadeOut=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return Array.from(this._players).some(function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2);return e[0],"started"===e[1].state})?"started":"stopped"},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._buffers.has(t)},e.prototype.player=function(t){if(this.assert(this.has(t),"No Player with the name "+t+" exists on this object"),!this._players.has(t)){var e=new Zu({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)},Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),e.prototype.add=function(t,e,n){return this.assert(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this},e.prototype.stopAll=function(t){return this._players.forEach(function(e){return e.stop(t)}),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this.volume.dispose(),this._players.forEach(function(t){return t.dispose()}),this._buffers.dispose(),this},e}(qo),Ju=(Za=function(t,e){return(Za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Za(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ku=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["url","onload"]))||this;n.name="GrainPlayer",n._loopStart=0,n._loopEnd=0,n._activeSources=[];var r=Ar(e.getDefaults(),arguments,["url","onload"]);return n.buffer=new Ko({onload:r.onload,reverse:r.reverse,url:r.url}),n._clock=new Mi({context:n.context,callback:n._tick.bind(n),frequency:1/r.grainSize}),n._playbackRate=r.playbackRate,n._grainSize=r.grainSize,n._overlap=r.overlap,n.detune=r.detune,n.overlap=r.overlap,n.loop=r.loop,n.playbackRate=r.playbackRate,n.grainSize=r.grainSize,n.loopStart=r.loopStart,n.loopEnd=r.loopEnd,n.reverse=r.reverse,n._clock.on("stop",n._onstop.bind(n)),n}return Ju(e,t),e.getDefaults=function(){return Object.assign(yu.getDefaults(),{onload:Qo,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})},e.prototype._start=function(t,e,n){e=Cr(e,0),e=this.toSeconds(e),t=this.toSeconds(t);var r=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/r),n&&this.stop(t+this.toSeconds(n))},e.prototype.restart=function(t,e,n){return this._stop(t),this._start(t,e,n),this},e.prototype._stop=function(t){this._clock.stop(t)},e.prototype._onstop=function(t){this._activeSources.forEach(function(e){e.fadeOut=0,e.stop(t)}),this.onstop(this)},e.prototype._tick=function(t){var e=this,n=this._clock.getTicksAtTime(t),r=n*(1/this._clock.frequency.getValueAtTime(t));if(this.log("offset",r),!this.loop&&r>this.buffer.duration)this.stop(t);else{var o=r<this._overlap?0:this._overlap,i=new vu({context:this.context,buffer:this.buffer,fadeIn:o,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:uo(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*n),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=function(){var t=e._activeSources.indexOf(i);-1!==t&&e._activeSources.splice(t,1)}}},Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this.grainSize=this._grainSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(t){this.buffer.reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grainSize",{get:function(){return this._grainSize},set:function(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"overlap",{get:function(){return this._overlap},set:function(t){this._overlap=this.toSeconds(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loaded",{get:function(){return this.buffer.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(function(t){return t.dispose()}),this},e}(yu),ts=(Ya=function(t,e){return(Ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ya(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),es=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["value"])))||this;return n.override=!1,n.name="Add",n._sum=new Yo({context:n.context}),n.input=n._sum,n.output=n._sum,n.addend=n._param,Fo(n._constantSource,n._sum),n}return ts(e,t),e.getDefaults=function(){return Object.assign(bi.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sum.dispose(),this},e}(bi),ns=(Xa=function(t,e){return(Xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Xa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),rs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Abs",e._abs=new ju({context:e.context,mapping:function(t){return Math.abs(t)<.001?0:Math.abs(t)}}),e.input=e._abs,e.output=e._abs,e}return ns(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this},e}(Su),os=(Qa=function(t,e){return(Qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Qa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),is=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="GainToAudio",e._norm=new ju({context:e.context,mapping:function(t){return 2*Math.abs(t)-1}}),e.input=e._norm,e.output=e._norm,e}return os(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},e}(Su),as=(Ga=function(t,e){return(Ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ga(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),us=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Negate",e._multiply=new Ru({context:e.context,value:-1}),e.input=e._multiply,e.output=e._multiply,e}return as(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this},e}(Su),ss=(Ua=function(t,e){return(Ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ua(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),cs=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["value"])))||this;return n.override=!1,n.name="Subtract",n._sum=new Yo({context:n.context}),n.input=n._sum,n.output=n._sum,n._neg=new us({context:n.context}),n.subtrahend=n._param,Fo(n._constantSource,n._neg,n._sum),n}return ss(e,t),e.getDefaults=function(){return Object.assign(bi.getDefaults(),{value:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._neg.dispose(),this._sum.dispose(),this},e}(bi),ls=(za=function(t,e){return(za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}za(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ps=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments)))||this;return n.name="Zero",n._gain=new Yo({context:n.context}),n.output=n._gain,n.input=void 0,Bo(n.context.getConstant(0),n._gain),n}return ls(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),Lo(this.context.getConstant(0),this._gain),this},e}(Su),fs=(Wa=function(t,e){return(Wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Wa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),hs=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;n.name="Envelope",n._sig=new bi({context:n.context,value:0}),n.output=n._sig,n.input=void 0;var r=Ar(e.getDefaults(),arguments,["attack","decay","sustain","release"]);return n.attack=r.attack,n.decay=r.decay,n.sustain=r.sustain,n.release=r.release,n.attackCurve=r.attackCurve,n.releaseCurve=r.releaseCurve,n.decayCurve=r.decayCurve,n}return fs(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),e.prototype._getCurve=function(t,e){if(pr(t))return t;var n=void 0;for(n in ds)if(ds[n][e]===t)return n;return t},e.prototype._setCurve=function(t,e,n){if(pr(n)&&Reflect.has(ds,n)){var r=ds[n];sr(r)?"_decayCurve"!==t&&(this[t]=r[e]):this[t]=r}else{if(!lr(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}},Object.defineProperty(e.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(t){this._setCurve("_attackCurve","In",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(t){this._setCurve("_releaseCurve","Out",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(t){this.assert(["linear","exponential"].some(function(e){return e===t}),"Invalid envelope curve: "+t),this._decayCurve=t},enumerable:!0,configurable:!0}),e.prototype.triggerAttack=function(t,e){void 0===e&&(e=1),this.log("triggerAttack",t,e),t=this.toSeconds(t);var n=this.toSeconds(this.attack),r=this.toSeconds(this.decay),o=this.getValueAtTime(t);if(o>0&&(n=(1-o)/(1/n)),0===n)this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);for(var i=this._attackCurve,a=1;a<i.length;a++)if(i[a-1]<=o&&o<=i[a]){(i=this._attackCurve.slice(a))[0]=o;break}this._sig.setValueCurveAtTime(i,t,n,e)}if(r){var u=e*this.sustain,s=t+n;this.log("decay",s),"linear"===this._decayCurve?this._sig.linearRampTo(u,r,s+this.sampleTime):(this.assert("exponential"===this._decayCurve,'decayCurve can only be "linear" or "exponential", got '+this._decayCurve),this._sig.exponentialApproachValueAtTime(u,s,r))}return this},e.prototype.triggerRelease=function(t){this.log("triggerRelease",t),t=this.toSeconds(t);var e=this.getValueAtTime(t);if(e>0){var n=this.toSeconds(this.release);"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(this.assert(lr(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this},e.prototype.getValueAtTime=function(t){return this._sig.getValueAtTime(t)},e.prototype.triggerAttackRelease=function(t,e,n){return void 0===n&&(n=1),e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this},e.prototype.cancel=function(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this},e.prototype.connect=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),wi(this,t,e,n),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._sig.dispose(),this},e}(qo),ds=function(){var t,e,n=[];for(t=0;t<128;t++)n[t]=Math.sin(t/127*(Math.PI/2));var r=[];for(t=0;t<127;t++){e=t/127;var o=Math.sin(e*(2*Math.PI)*6.4-Math.PI/2)+1;r[t]=o/10+.83*e}r[127]=1;var i=[];for(t=0;t<128;t++)i[t]=Math.ceil(t/127*5)/5;var a=[];for(t=0;t<128;t++)e=t/127,a[t]=.5*(1-Math.cos(Math.PI*e));var u,s=[];for(t=0;t<128;t++){e=t/127;var c=4*Math.pow(e,3)+.2,l=Math.cos(c*Math.PI*2*e);s[t]=Math.abs(l*(1-e))}function p(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:p(s),Out:s},cosine:{In:n,Out:(u=n,u.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:r,Out:p(r)},sine:{In:a,Out:p(a)},step:{In:i,Out:p(i)}}}(),ys=(La=function(t,e){return(La=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}La(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_s=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;return n.name="AmplitudeEnvelope",n._gainNode=new Yo({context:n.context,gain:0}),n.output=n._gainNode,n.input=n._gainNode,n._sig.connect(n._gainNode.gain),n.output=n._gainNode,n.input=n._gainNode,n}return ys(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._gainNode.dispose(),this},e}(hs),vs=(Ba=function(t,e){return(Ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ba(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ms=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this;n._scheduledEvents=[],n._synced=!1,n._original_triggerAttack=n.triggerAttack,n._original_triggerRelease=n.triggerRelease;var r=Ar(e.getDefaults(),arguments);return n._volume=n.output=new Ji({context:n.context,volume:r.volume}),n.volume=n._volume.volume,Wo(n,"volume"),n}return vs(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{volume:0})},e.prototype.sync=function(){return this._synced||(this._synced=!0,this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this},e.prototype._syncMethod=function(t,e){var n=this,r=this["_original_"+t]=this[t];this[t]=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var i=t[e],a=n.context.transport.schedule(function(o){t[e]=o,r.apply(n,t)},i);n._scheduledEvents.push(a)}},e.prototype.unsync=function(){var t=this;return this._scheduledEvents.forEach(function(e){return t.context.transport.clear(e)}),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},e.prototype.triggerAttackRelease=function(t,e,n,r){var o=this.toSeconds(n),i=this.toSeconds(e);return this.triggerAttack(t,o,r),this.triggerRelease(o+i),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this},e}(qo),gs=(Fa=function(t,e){return(Fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Fa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),bs=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this,r=Ar(e.getDefaults(),arguments);return n.portamento=r.portamento,n.onsilence=r.onsilence,n}return gs(e,t),e.getDefaults=function(){return Object.assign(ms.getDefaults(),{detune:0,onsilence:Qo,portamento:0})},e.prototype.triggerAttack=function(t,e,n){void 0===n&&(n=1),this.log("triggerAttack",t,e,n);var r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,n),this.setNote(t,r),this},e.prototype.triggerRelease=function(t){this.log("triggerRelease",t);var e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this},e.prototype.getLevelAtTime=function(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)},e.prototype.setNote=function(t,e){var n=this.toSeconds(e),r=t instanceof wo?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){var o=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,o,n)}else this.frequency.setValueAtTime(r,n);return this},e}(ms),ws=(qa=function(t,e){return(qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}qa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Os=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},xs=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Os(arguments[e]));return t},Ts=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this;n.name="Synth";var r=Ar(e.getDefaults(),arguments);return n.oscillator=new Xu(Object.assign({context:n.context,detune:r.detune,onstop:function(){return n.onsilence(n)}},r.oscillator)),n.frequency=n.oscillator.frequency,n.detune=n.oscillator.detune,n.envelope=new _s(Object.assign({context:n.context},r.envelope)),n.oscillator.chain(n.envelope,n.output),Wo(n,["oscillator","frequency","detune","envelope"]),n}return ws(e,t),e.getDefaults=function(){return Object.assign(bs.getDefaults(),{envelope:Object.assign(Sr(hs.getDefaults(),Object.keys(qo.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Sr(Xu.getDefaults(),xs(Object.keys(yu.getDefaults()),["frequency","detune"])),{type:"triangle"})})},e.prototype._triggerEnvelopeAttack=function(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){var n=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+n+r)}},e.prototype._triggerEnvelopeRelease=function(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.oscillator.dispose(),this.envelope.dispose(),this},e}(bs),ks=(Na=function(t,e){return(Na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Na(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),As=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))||this;n.name="Sampler",n._activeSources=new Map;var r=Ar(e.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),o={};return Object.keys(r.urls).forEach(function(t){var e=parseInt(t,10);if(n.assert(fr(t)||ur(e)&&isFinite(e),"url key is neither a note or midi pitch: "+t),fr(t)){var i=new wo(n.context,t).toMidi();o[i]=r.urls[t]}else ur(e)&&isFinite(e)&&(o[e]=r.urls[e])}),n._buffers=new li(o,r.onload,r.baseUrl),n.attack=r.attack,n.release=r.release,n.curve=r.curve,n._buffers.loaded&&Promise.resolve().then(r.onload),n}return ks(e,t),e.getDefaults=function(){return Object.assign(ms.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Qo,release:.1,urls:{}})},e.prototype._findClosest=function(t){for(var e=0;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error("No available buffers for note: "+t)},e.prototype.triggerAttack=function(t,e,n){var r=this;return void 0===n&&(n=1),this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach(function(t){var o=new wo(r.context,t).toMidi(),i=r._findClosest(o),a=o-i,u=r._buffers.get(a),s=uo(i),c=new vu({buffer:u,context:r.context,curve:r.curve,fadeIn:r.attack,fadeOut:r.release,playbackRate:s}).connect(r.output);c.start(e,0,u.duration/s,n),lr(r._activeSources.get(o))||r._activeSources.set(o,[]),r._activeSources.get(o).push(c),c.onended=function(){if(r._activeSources&&r._activeSources.has(o)){var t=r._activeSources.get(o),e=t.indexOf(c);-1!==e&&t.splice(e,1)}}}),this},e.prototype.triggerRelease=function(t,e){var n=this;return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(function(t){var r=new wo(n.context,t).toMidi();if(n._activeSources.has(r)&&n._activeSources.get(r).length){var o=n._activeSources.get(r);e=n.toSeconds(e),o.forEach(function(t){t.stop(e)}),n._activeSources.set(r,[])}}),this},e.prototype.releaseAll=function(t){var e=this.toSeconds(t);return this._activeSources.forEach(function(t){for(;t.length;)t.shift().stop(e)}),this},e.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},e.prototype.triggerAttackRelease=function(t,e,n,r){var o=this;void 0===r&&(r=1);var i=this.toSeconds(n);return this.triggerAttack(t,i,r),lr(e)?(this.assert(lr(t),"notes must be an array when duration is array"),t.forEach(function(t,n){var r=e[Math.min(n,e.length-1)];o.triggerRelease(t,i+o.toSeconds(r))})):this.triggerRelease(t,i+this.toSeconds(e)),this},e.prototype.add=function(t,e,n){if(this.assert(fr(t)||isFinite(t),"note must be a pitch or midi: "+t),fr(t)){var r=new wo(this.context,t).toMidi();this._buffers.add(r,e,n)}else this._buffers.add(t,e,n);return this},Object.defineProperty(e.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffers.dispose(),this._activeSources.forEach(function(t){t.forEach(function(t){return t.dispose()})}),this._activeSources.clear(),this},e}(ms),Cs=(Va=function(t,e){return(Va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Va(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ss=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["voice","options"]))||this;n.name="PolySynth",n._availableVoices=[],n._activeVoices=[],n._voices=[],n._gcTimeout=-1,n._averageActiveVoices=0;var r=Ar(e.getDefaults(),arguments,["voice","options"]);n.assert(!ur(r.voice),"DEPRECATED: The polyphony count is no longer the first argument.");var o=r.voice.getDefaults();return n.options=Object.assign(o,r.options),n.voice=r.voice,n.maxPolyphony=r.maxPolyphony,n._gcTimeout=n.context.setInterval(n._collectGarbage.bind(n),1),n}return Cs(e,t),e.getDefaults=function(){return Object.assign(ms.getDefaults(),{maxPolyphony:32,options:{},voice:Ts})},Object.defineProperty(e.prototype,"activeVoices",{get:function(){return this._activeVoices.length},enumerable:!0,configurable:!0}),e.prototype._getActiveVoice=function(t){var e=this._activeVoices.find(function(e){return e.midi===t});if(e)return e.voice},e.prototype._makeVoiceAvailable=function(t){this._availableVoices.push(t);var e=this._activeVoices.findIndex(function(e){return e.voice===t});this._activeVoices.splice(e,1)},e.prototype._getNextAvailableVoice=function(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){var t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}rr("Max polyphony exceeded. Note dropped.")},e.prototype._collectGarbage=function(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>this._averageActiveVoices){var t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),t.dispose()}},e.prototype._triggerAttack=function(t,e,n){var r=this;t.forEach(function(t){var o=new Bi(r.context,t).toMidi(),i=r._getActiveVoice(o);if(i&&i.getLevelAtTime(e)>0){var a=r._activeVoices.findIndex(function(t){return t.voice===i});r._activeVoices.splice(a,1)}else i=r._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),r._activeVoices.unshift({midi:o,voice:i}),r.log("triggerAttack",t,e))})},e.prototype._triggerRelease=function(t,e){var n=this;t.forEach(function(t){var r=new Bi(n.context,t).toMidi(),o=n._getActiveVoice(r);o&&(o.triggerRelease(e),n.log("triggerRelease",t,e))})},e.prototype._scheduleEvent=function(t,e,n,r){var o=this;this.assert(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,r):this._triggerRelease(e,n):this.context.setTimeout(function(){o._scheduleEvent(t,e,n,r)},n-this.now())},e.prototype.triggerAttack=function(t,e,n){Array.isArray(t)||(t=[t]);var r=this.toSeconds(e);return this._scheduleEvent("attack",t,r,n),this},e.prototype.triggerRelease=function(t,e){Array.isArray(t)||(t=[t]);var n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this},e.prototype.triggerAttackRelease=function(t,e,n,r){var o=this.toSeconds(n);if(this.triggerAttack(t,o,r),lr(e)){this.assert(lr(t),"If the duration is an array, the notes must also be an array"),t=t;for(var i=0;i<t.length;i++){var a=e[Math.min(i,e.length-1)],u=this.toSeconds(a);this.assert(u>0,"The duration must be greater than 0"),this.triggerRelease(t[i],o+u)}}else u=this.toSeconds(e),this.assert(u>0,"The duration must be greater than 0"),this.triggerRelease(t,o+u);return this},e.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},e.prototype.set=function(t){var e=this;return this.options=kr(this.options,t),this._voices.forEach(function(t){return t.set(e.options)}),this},e.prototype.get=function(){return Object.assign({},this.options)},e.prototype.releaseAll=function(){var t=this.now();return this._activeVoices.forEach(function(e){e.voice.triggerRelease(t)}),this._activeVoices=[],this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._voices.forEach(function(t){return t.dispose()}),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this},e}(ms),Ps=(Ia=function(t,e){return(Ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ia(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),js=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this;n.name="MembraneSynth",n.portamento=0;var r=Ar(e.getDefaults(),arguments);return n.pitchDecay=r.pitchDecay,n.octaves=r.octaves,Wo(n,["oscillator","envelope"]),n}return Ps(e,t),e.getDefaults=function(){return kr(bs.getDefaults(),Ts.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})},e.prototype.setNote=function(t,e){var n=this.toSeconds(e),r=this.toFrequency(t instanceof wo?t.toFrequency():t),o=r*this.octaves;return this.oscillator.frequency.setValueAtTime(o,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this},e}(Ts),Es=(Ra=function(t,e){return(Ra=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ra(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ds=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Ms=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type","rolloff"]))||this;n.name="Filter",n.input=new Yo({context:n.context}),n.output=new Yo({context:n.context}),n._filters=[];var r=Ar(e.getDefaults(),arguments,["frequency","type","rolloff"]);return n._filters=[],n.Q=new bi({context:n.context,units:"positive",value:r.Q}),n.frequency=new bi({context:n.context,units:"frequency",value:r.frequency}),n.detune=new bi({context:n.context,units:"cents",value:r.detune}),n.gain=new bi({context:n.context,units:"decibels",value:r.gain}),n._type=r.type,n.rolloff=r.rolloff,Wo(n,["detune","frequency","gain","Q"]),n}return Es(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this.assert(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),"Invalid filter type: "+t),this._type=t,this._filters.forEach(function(e){return e.type=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){var e=ur(t)?t:parseInt(t,10),n=[-12,-24,-48,-96],r=n.indexOf(e);this.assert(-1!==r,"rolloff can only be "+n.join(", ")),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(function(t){return t.disconnect()}),this._filters=new Array(r);for(var o=0;o<r;o++){var i=this.context.createBiquadFilter();i.type=this._type,this.frequency.connect(i.frequency),this.detune.connect(i.detune),this.Q.connect(i.Q),this.gain.connect(i.gain),this._filters[o]=i}this._internalChannels=this._filters,Fo.apply(void 0,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ds(arguments[e]));return t}([this.input],this._internalChannels,[this.output]))},enumerable:!0,configurable:!0}),e.prototype.getFrequencyResponse=function(t){var e=this;void 0===t&&(t=128);for(var n=new Float32Array(t).map(function(){return 1}),r=new Float32Array(t),o=0;o<t;o++){var i=19980*Math.pow(o/t,2)+20;r[o]=i}var a=new Float32Array(t),u=new Float32Array(t);return this._filters.forEach(function(){var t=e.context.createBiquadFilter();t.type=e._type,t.Q.value=e.Q.value,t.frequency.value=e.frequency.value,t.gain.value=e.gain.value,t.getFrequencyResponse(r,a,u),a.forEach(function(t,e){n[e]*=t})}),n},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._filters.forEach(function(t){t.disconnect()}),zo(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this},e}(qo),Rs=(Ma=function(t,e){return(Ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ma(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Is=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["min","max"])))||this;n.name="Scale",n.input=new Ru({context:n.context,value:1}),n.output=new es({context:n.context,value:0});var r=Ar(e.getDefaults(),arguments,["min","max"]);return n._outputMin=r.min,n._outputMax=r.max,n.input.connect(n.output),n._setRange(),n}return Rs(e,t),e.getDefaults=function(){return Object.assign(Su.getDefaults(),{max:1,min:0})},Object.defineProperty(e.prototype,"min",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()},enumerable:!0,configurable:!0}),e.prototype._setRange=function(){this.output.value=this._outputMin,this.input.value=this._outputMax-this._outputMin},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this},e}(Su),Vs=(Da=function(t,e){return(Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Da(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ns=[1,1.483,1.932,2.546,2.63,3.897],qs=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this;n.name="MetalSynth",n._oscillators=[],n._freqMultipliers=[];var r=Ar(e.getDefaults(),arguments);n.detune=new bi({context:n.context,units:"cents",value:r.detune}),n.frequency=new bi({context:n.context,units:"frequency"}),n._amplitude=new Yo({context:n.context,gain:0}).connect(n.output),n._highpass=new Ms({Q:-3.0102999566398125,context:n.context,type:"highpass"}).connect(n._amplitude);for(var o=0;o<Ns.length;o++){var i=new qu({context:n.context,harmonicity:r.harmonicity,modulationIndex:r.modulationIndex,modulationType:"square",onstop:0===o?function(){return n.onsilence(n)}:Qo,type:"square"});i.connect(n._highpass),n._oscillators[o]=i;var a=new Ru({context:n.context,value:Ns[o]});n._freqMultipliers[o]=a,n.frequency.chain(a,i.frequency),n.detune.connect(i.detune)}return n._filterFreqScaler=new Is({context:n.context,max:7e3,min:n.toFrequency(r.resonance)}),n.envelope=new hs({attack:r.envelope.attack,attackCurve:"linear",context:n.context,decay:r.envelope.decay,release:r.envelope.release,sustain:0}),n.envelope.chain(n._filterFreqScaler,n._highpass.frequency),n.envelope.connect(n._amplitude.gain),n._octaves=r.octaves,n.octaves=r.octaves,n}return Vs(e,t),e.getDefaults=function(){return kr(bs.getDefaults(),{envelope:Object.assign(Sr(hs.getDefaults(),Object.keys(qo.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})},e.prototype._triggerEnvelopeAttack=function(t,e){var n=this;return void 0===e&&(e=1),this.envelope.triggerAttack(t,e),this._oscillators.forEach(function(e){return e.start(t)}),0===this.envelope.sustain&&this._oscillators.forEach(function(e){e.stop(t+n.toSeconds(n.envelope.attack)+n.toSeconds(n.envelope.decay))}),this},e.prototype._triggerEnvelopeRelease=function(t){var e=this;return this.envelope.triggerRelease(t),this._oscillators.forEach(function(n){return n.stop(t+e.toSeconds(e.envelope.release))}),this},Object.defineProperty(e.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(t){this._oscillators.forEach(function(e){return e.modulationIndex.value=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(t){this._oscillators.forEach(function(e){return e.harmonicity.value=t})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"octaves",{get:function(){return this._octaves},set:function(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._oscillators.forEach(function(t){return t.dispose()}),this._freqMultipliers.forEach(function(t){return t.dispose()}),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this},e}(bs),Fs=(Ea=function(t,e){return(Ea=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ea(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Bs=function(t){function e(e){var n=t.call(this,e)||this;n.name="ToneAudioWorklet",n.workletOptions={};var r=URL.createObjectURL(new Blob([n._audioWorklet()],{type:"text/javascript"})),o=n._audioWorkletName();return n.context.addAudioWorkletModule(r,o).then(function(){n.disposed||(n._worklet=n.context.createAudioWorkletNode(o,n.workletOptions),n._worklet.onprocessorerror=function(t){throw t.error},n.onReady(n._worklet))}),n}return Fs(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._worklet&&this._worklet.disconnect(),this},e}(qo),Ls=(ja=function(t,e){return(ja=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ja(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ws=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["delayTime","resonance"]))||this;n.name="FeedbackCombFilter",n.workletOptions={numberOfInputs:1,numberOfOutputs:1};var r=Ar(e.getDefaults(),arguments,["delayTime","resonance"]);n.input=new Yo({context:n.context}),n.output=new Yo({context:n.context});var o=n.context.createGain();return n.delayTime=new Io({context:n.context,value:r.delayTime,units:"time",minValue:0,maxValue:1,param:o.gain,swappable:!0}),n.resonance=new Io({context:n.context,value:r.resonance,units:"normalRange",param:o.gain,swappable:!0}),Wo(n,["resonance","delayTime"]),n}return Ls(e,t),e.prototype._audioWorkletName=function(){return"feedback-comb-filter"},e.prototype._audioWorklet=function(){return' \n\t\t\tregisterProcessor("'+this._audioWorkletName()+'", class extends AudioWorkletProcessor {\n\t\t\t\tstatic get parameterDescriptors() {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\tname: "delayTime",\n\t\t\t\t\t\tdefaultValue: 0.1,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: "feedback",\n\t\t\t\t\t\tdefaultValue: 0.5,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 0.9999,\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t\n\t\t\t\tconstructor(options) {\n\t\t\t\t\tsuper(options);\n\t\t\t\t\tthis.delayBuffer = new Float32Array(sampleRate);\n\t\t\t\t\tthis.currentFrame = 0\n\t\t\t\t}\n\t\t\t\n\t\t\t\tgetParameter(name, index, parameters) {\n\t\t\t\t\tif (parameters[name].length > 1) {\n\t\t\t\t\t\treturn parameters[name][index];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn parameters[name][0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\n\t\t\t\tprocess(inputs, outputs, parameters) {\n\t\t\t\t\tconst input = inputs[0];\n\t\t\t\t\tconst output = outputs[0];\n\t\t\t\t\tthis.currentFrame += 128\n\t\t\t\t\tif (input && output) {\n\t\t\t\t\t\tconst delayLength = this.delayBuffer.length;\n\t\t\t\t\t\tinput.forEach((inputChannel, channelNum) => {\n\t\t\t\t\t\t\tinputChannel.forEach((value, index) => {\n\t\t\t\t\t\t\t\tconst delayTime = this.getParameter("delayTime", index, parameters);\n\t\t\t\t\t\t\t\tconst feedback = this.getParameter("feedback", index, parameters);\n\t\t\t\t\t\t\t\tconst delaySamples = Math.floor(delayTime * sampleRate);\n\t\t\t\t\t\t\t\tconst currentIndex = (this.currentFrame + index) % delayLength;\n\t\t\t\t\t\t\t\tconst delayedIndex = (this.currentFrame + index + delaySamples) % delayLength;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// the current value to output\n\t\t\t\t\t\t\t\tconst currentValue = this.delayBuffer[currentIndex];\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// write the current value to the delayBuffer in the future\n\t\t\t\t\t\t\t\tthis.delayBuffer[delayedIndex] = value + currentValue * feedback;\n\t\t\t\n\t\t\t\t\t\t\t\t// set all of the output channels to the same value\n\t\t\t\t\t\t\t\toutput[channelNum][index] = delaySamples > 0 ? currentValue : value;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t'},e.getDefaults=function(){return Object.assign(qo.getDefaults(),{delayTime:.1,resonance:.5})},e.prototype.onReady=function(t){Fo(this.input,t,this.output);var e=t.parameters.get("delayTime");this.delayTime.setParam(e);var n=t.parameters.get("feedback");this.resonance.setParam(n)},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this},e}(Bs),zs=(Pa=function(t,e){return(Pa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Pa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Us=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["frequency","type"]))||this;n.name="OnePoleFilter";var r=Ar(e.getDefaults(),arguments,["frequency","type"]);return n._frequency=r.frequency,n._type=r.type,n.input=new Yo({context:n.context}),n.output=new Yo({context:n.context}),n._createFilter(),n}return zs(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{frequency:.5,type:"lowpass"})},e.prototype._createFilter=function(){var t=this,e=this._filter,n=this.toFrequency(this._frequency),r=1/(2*Math.PI*n);if("lowpass"===this._type){var o=1/(r*this.context.sampleRate),i=o-1;this._filter=this.context.createIIRFilter([o,0],[1,i])}else i=1/(r*this.context.sampleRate)-1,this._filter=this.context.createIIRFilter([1,-1],[1,i]);this.input.chain(this._filter,this.output),e&&this.context.setTimeout(function(){t.disposed||(t.input.disconnect(e),e.disconnect())},this.blockTime)},Object.defineProperty(e.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t,this._createFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._createFilter()},enumerable:!0,configurable:!0}),e.prototype.getFrequencyResponse=function(t){void 0===t&&(t=128);for(var e=new Float32Array(t),n=0;n<t;n++){var r=19980*Math.pow(n/t,2)+20;e[n]=r}var o=new Float32Array(t),i=new Float32Array(t);return this._filter.getFrequencyResponse(e,o,i),o},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this},e}(qo),Gs=(Sa=function(t,e){return(Sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Sa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Qs=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["delayTime","resonance","dampening"]))||this;n.name="LowpassCombFilter";var r=Ar(e.getDefaults(),arguments,["delayTime","resonance","dampening"]);return n._combFilter=n.output=new Ws({context:n.context,delayTime:r.delayTime,resonance:r.resonance}),n.delayTime=n._combFilter.delayTime,n.resonance=n._combFilter.resonance,n._lowpass=n.input=new Us({context:n.context,frequency:r.dampening,type:"lowpass"}),n._lowpass.connect(n._combFilter),n}return Gs(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})},Object.defineProperty(e.prototype,"dampening",{get:function(){return this._lowpass.frequency},set:function(t){this._lowpass.frequency=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._combFilter.dispose(),this._lowpass.dispose(),this},e}(qo),Xs=(Ca=function(t,e){return(Ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ca(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Ys=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments))||this;n.name="PluckSynth";var r=Ar(e.getDefaults(),arguments);return n._noise=new gu({context:n.context,type:"pink"}),n.attackNoise=r.attackNoise,n._lfcf=new Qs({context:n.context,dampening:r.dampening,resonance:r.resonance}),n.resonance=r.resonance,n.release=r.release,n._noise.connect(n._lfcf),n._lfcf.connect(n.output),n}return Xs(e,t),e.getDefaults=function(){return kr(ms.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})},Object.defineProperty(e.prototype,"dampening",{get:function(){return this._lfcf.dampening},set:function(t){this._lfcf.dampening=t},enumerable:!0,configurable:!0}),e.prototype.triggerAttack=function(t,e){var n=this.toFrequency(t);e=this.toSeconds(e);var r=1/n;return this._lfcf.delayTime.setValueAtTime(r,e),this._noise.start(e),this._noise.stop(e+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this},e.prototype.triggerRelease=function(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this},e}(ms),Zs=(Aa=function(t,e){return(Aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Aa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Hs=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["callback","value"]))||this;n.name="ToneEvent",n._state=new di("stopped"),n._startOffset=0;var r=Ar(e.getDefaults(),arguments,["callback","value"]);return n._loop=r.loop,n.callback=r.callback,n.value=r.value,n._loopStart=n.toTicks(r.loopStart),n._loopEnd=n.toTicks(r.loopEnd),n._playbackRate=r.playbackRate,n._probability=r.probability,n._humanize=r.humanize,n.mute=r.mute,n.playbackRate=r.playbackRate,n}return Zs(e,t),e.getDefaults=function(){return Object.assign(Mo.getDefaults(),{callback:Qo,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})},e.prototype._rescheduleEvents=function(t){var e=this;void 0===t&&(t=-1),this._state.forEachFrom(t,function(t){var n;if("started"===t.state){-1!==t.id&&e.context.transport.clear(t.id);var r=t.time+Math.round(e.startOffset/e._playbackRate);if(!0===e._loop||ur(e._loop)&&e._loop>1){n=1/0,ur(e._loop)&&(n=e._loop*e._getLoopDuration());var o=e._state.getAfter(r);null!==o&&(n=Math.min(n,o.time-r)),n!==1/0&&(e._state.setStateAtTime("stopped",r+n+1,{id:-1}),n=new Vi(e.context,n));var i=new Vi(e.context,e._getLoopDuration());t.id=e.context.transport.scheduleRepeat(e._tick.bind(e),i,new Vi(e.context,r),n)}else t.id=e.context.transport.schedule(e._tick.bind(e),new Vi(e.context,r))}})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state.getValueAtTime(this.context.transport.ticks)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t},enumerable:!0,configurable:!0}),e.prototype.start=function(t){var e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this},e.prototype.stop=function(t){this.cancel(t);var e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});var n=this._state.getBefore(e),r=e;null!==n&&(r=n.time),this._rescheduleEvents(r)}return this},e.prototype.cancel=function(t){var e=this;t=Cr(t,-1/0);var n=this.toTicks(t);return this._state.forEachFrom(n,function(t){e.context.transport.clear(t.id)}),this._state.cancel(n),this},e.prototype._tick=function(t){var e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var n=.02;cr(this.humanize)||(n=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*n}this.callback(t,this.value)}},e.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new Vi(this.context,this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new Vi(this.context,this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){if(this._loop){var t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){var n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.cancel(),this._state.dispose(),this},e}(Mo),$s=(ka=function(t,e){return(ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ka(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Js=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["callback","events"]))||this;return n.name="Part",n._state=new di("stopped"),n._events=new Set,Ar(e.getDefaults(),arguments,["callback","events"]).events.forEach(function(t){lr(t)?n.add(t[0],t[1]):n.add(t)}),n}return $s(e,t),e.getDefaults=function(){return Object.assign(Hs.getDefaults(),{events:[]})},e.prototype.start=function(t,e){var n=this,r=this.toTicks(t);if("started"!==this._state.getValueAtTime(r)){e=Cr(e,this._loop?this._loopStart:0),e=this._loop?Cr(e,this._loopStart):Cr(e,0);var o=this.toTicks(e);this._state.add({id:-1,offset:o,state:"started",time:r}),this._forEach(function(t){n._startNote(t,r,o)})}return this},e.prototype._startNote=function(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new Vi(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new Vi(this.context,e))):t.startOffset>=n&&t.start(new Vi(this.context,e))},Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){var e=this;this._startOffset=t,this._forEach(function(t){t.startOffset+=e._startOffset})},enumerable:!0,configurable:!0}),e.prototype.stop=function(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(function(e){e.stop(t)}),this},e.prototype.at=function(t,e){for(var n=new Co(this.context,t).toTicks(),r=new Vi(this.context,1).toSeconds(),o=this._events.values(),i=o.next();!i.done;){var a=i.value;if(Math.abs(n-a.startOffset)<r)return ir(e)&&(a.value=e),a;i=o.next()}return ir(e)?(this.add(t,e),this.at(t)):null},e.prototype.add=function(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);var n,r=this.toTicks(t);return e instanceof Hs?(n=e).callback=this._tick.bind(this):n=new Hs({callback:this._tick.bind(this),context:this.context,value:e}),n.startOffset=r,n.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(n),this._restartEvent(n),this},e.prototype._restartEvent=function(t){var e=this;this._state.forEach(function(n){"started"===n.state?e._startNote(t,n.time,n.offset):t.stop(new Vi(e.context,n.time))})},e.prototype.remove=function(t,e){var n=this;return sr(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(function(r){r.startOffset===t&&(or(e)||ir(e)&&r.value===e)&&(n._events.delete(r),r.dispose())}),this},e.prototype.clear=function(){return this._forEach(function(t){return t.dispose()}),this._events.clear(),this},e.prototype.cancel=function(t){return this._forEach(function(e){return e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},e.prototype._forEach=function(t){return this._events&&this._events.forEach(function(n){n instanceof e?n._forEach(t):t(n)}),this},e.prototype._setAll=function(t,e){this._forEach(function(n){n[t]=e})},e.prototype._tick=function(t,e){this.mute||this.callback(t,e)},e.prototype._testLoopBoundries=function(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)},Object.defineProperty(e.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){var e=this;this._loop=t,this._forEach(function(n){n.loopStart=e.loopStart,n.loopEnd=e.loopEnd,n.loop=t,e._testLoopBoundries(n)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return new Vi(this.context,this._loopEnd).toSeconds()},set:function(t){var e=this;this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(n){n.loopEnd=t,e._testLoopBoundries(n)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return new Vi(this.context,this._loopStart).toSeconds()},set:function(t){var e=this;this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=e.loopStart,e._testLoopBoundries(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._events.size},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.clear(),this},e}(Hs),Ks=(Ta=function(t,e){return(Ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Ta(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),tc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["callback","events","subdivision"]))||this;n.name="Sequence",n._part=new Js({callback:n._seqCallback.bind(n),context:n.context}),n._events=[],n._eventsArray=[];var r=Ar(e.getDefaults(),arguments,["callback","events","subdivision"]);return n._subdivision=n.toTicks(r.subdivision),n.events=r.events,n.loop=r.loop,n.loopStart=r.loopStart,n.loopEnd=r.loopEnd,n.playbackRate=r.playbackRate,n.probability=r.probability,n.humanize=r.humanize,n.mute=r.mute,n.playbackRate=r.playbackRate,n}return Ks(e,t),e.getDefaults=function(){return Object.assign(Sr(Hs.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})},e.prototype._seqCallback=function(t,e){null!==e&&this.callback(t,e)},Object.defineProperty(e.prototype,"events",{get:function(){return this._events},set:function(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e){return this._part.start(t,e?this._indexTime(e):e),this},e.prototype.stop=function(t){return this._part.stop(t),this},Object.defineProperty(e.prototype,"subdivision",{get:function(){return new Vi(this.context,this._subdivision).toSeconds()},enumerable:!0,configurable:!0}),e.prototype._createSequence=function(t){var e=this;return new Proxy(t,{get:function(t,e){return t[e]},set:function(t,n,r){return pr(n)&&isFinite(parseInt(n,10))?(parseInt(n,10),lr(r)?t[n]=e._createSequence(r):t[n]=r):t[n]=r,e._eventsUpdated(),!0}})},e.prototype._eventsUpdated=function(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd},e.prototype._rescheduleSequence=function(t,e,n){var r=this;t.forEach(function(t,o){var i=o*e+n;if(lr(t))r._rescheduleSequence(t,e/t.length,i);else{var a=new Vi(r.context,i,"i").toSeconds();r._part.add(a,t)}})},e.prototype._indexTime=function(t){return new Vi(this.context,t*this._subdivision+this.startOffset).toSeconds()},e.prototype.clear=function(){return this._part.clear(),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._part.dispose(),this},Object.defineProperty(e.prototype,"loop",{get:function(){return this._part.loop},set:function(t){this._part&&(this._part.loop=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this._part&&(this._part.loopStart=this._indexTime(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this._part&&(this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startOffset",{get:function(){return this._part.startOffset},set:function(t){this._part&&(this._part.startOffset=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this._part.playbackRate},set:function(t){this._part&&(this._part.playbackRate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"probability",{get:function(){return this._part.probability},set:function(t){this._part&&(this._part.probability=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"humanize",{get:function(){return this._part.humanize},set:function(t){this._part&&(this._part.humanize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._part.length},enumerable:!0,configurable:!0}),e}(Hs),ec=(xa=function(t,e){return(xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}xa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),nc=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["fade"])))||this;n.name="CrossFade",n._panner=n.context.createStereoPanner(),n._split=n.context.createChannelSplitter(2),n._g2a=new is({context:n.context}),n.a=new Yo({context:n.context,gain:0}),n.b=new Yo({context:n.context,gain:0}),n.output=new Yo({context:n.context}),n._internalChannels=[n.a,n.b];var r=Ar(e.getDefaults(),arguments,["fade"]);return n.fade=new bi({context:n.context,units:"normalRange",value:r.fade}),Wo(n,"fade"),n.context.getConstant(1).connect(n._panner),n._panner.connect(n._split),n._panner.channelCount=1,n._panner.channelCountMode="explicit",Bo(n._split,n.a.gain,0),Bo(n._split,n.b.gain,1),n.fade.chain(n._g2a,n._panner.pan),n.a.connect(n.output),n.b.connect(n.output),n}return ec(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{fade:.5})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this},e}(qo),rc=(Oa=function(t,e){return(Oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}Oa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),oc=function(t){function e(e){var n=t.call(this,e)||this;return n.name="Effect",n._dryWet=new nc({context:n.context}),n.wet=n._dryWet.fade,n.effectSend=new Yo({context:n.context}),n.effectReturn=new Yo({context:n.context}),n.input=new Yo({context:n.context}),n.output=n._dryWet,n.input.fan(n._dryWet.a,n.effectSend),n.effectReturn.connect(n._dryWet.b),n.wet.setValueAtTime(e.wet,0),n._internalChannels=[n.effectReturn,n.effectSend],Wo(n,"wet"),n}return rc(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{wet:1})},e.prototype.connectEffect=function(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this},e}(qo),ic=(wa=function(t,e){return(wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}wa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ac=function(t){function e(e){var n=t.call(this,e)||this;return n.name="FeedbackEffect",n._feedbackGain=new Yo({context:n.context,gain:e.feedback,units:"normalRange"}),n.feedback=n._feedbackGain.gain,Wo(n,"feedback"),n.effectReturn.chain(n._feedbackGain,n.effectSend),n}return ic(e,t),e.getDefaults=function(){return Object.assign(oc.getDefaults(),{feedback:.125})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._feedbackGain.dispose(),this.feedback.dispose(),this},e}(oc),uc=(ba=function(t,e){return(ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ba(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),sc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["delayTime","feedback"]))||this;n.name="FeedbackDelay";var r=Ar(e.getDefaults(),arguments,["delayTime","feedback"]);return n._delayNode=new fi({context:n.context,delayTime:r.delayTime,maxDelay:r.maxDelay}),n.delayTime=n._delayNode.delayTime,n.connectEffect(n._delayNode),Wo(n,"delayTime"),n}return uc(e,t),e.getDefaults=function(){return Object.assign(ac.getDefaults(),{delayTime:.25,maxDelay:1})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._delayNode.dispose(),this.delayTime.dispose(),this},e}(ac),cc=(ga=function(t,e){return(ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ga(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),lc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["url","onload"]))||this;n.name="Convolver",n._convolver=n.context.createConvolver();var r=Ar(e.getDefaults(),arguments,["url","onload"]);return n._buffer=new Ko(r.url,function(t){n.buffer=t,r.onload()}),n._buffer.loaded&&(n.buffer=n._buffer),n.normalize=r.normalize,n.connectEffect(n._convolver),n}return cc(e,t),e.getDefaults=function(){return Object.assign(oc.getDefaults(),{normalize:!0,onload:Qo})},e.prototype.load=function(t){return function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function(){var e;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(n){switch(n.label){case 0:return e=this,[4,this._buffer.load(t)];case 1:return e.buffer=n.sent(),[2]}})})},Object.defineProperty(e.prototype,"buffer",{get:function(){return this._buffer.length?this._buffer:null},set:function(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.effectSend.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.connectEffect(this._convolver));var e=this._buffer.get();this._convolver.buffer=e||null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalize",{get:function(){return this._convolver.normalize},set:function(t){this._convolver.normalize=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer.dispose(),this._convolver.disconnect(),this},e}(oc),pc=(ma=function(t,e){return(ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ma(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),fc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["channels"]))||this;n.name="Merge";var r=Ar(e.getDefaults(),arguments,["channels"]);return n._merger=n.output=n.input=n.context.createChannelMerger(r.channels),n}return pc(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{channels:2})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._merger.disconnect(),this},e}(qo),hc=(va=function(t,e){return(va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}va(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),dc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["decay"]))||this;n.name="Reverb",n._convolver=n.context.createConvolver();var r=Ar(e.getDefaults(),arguments,["decay"]);return n.decay=r.decay,n.preDelay=r.preDelay,n.connectEffect(n._convolver),n}return hc(e,t),e.getDefaults=function(){return Object.assign(oc.getDefaults(),{decay:1.5,preDelay:.01})},e.prototype.generate=function(){return t=this,e=void 0,r=function(){var t,e=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,function(n){switch(n.label){case 0:return[4,ni(function(t){var n=new gu({context:t}),r=new gu({context:t}),o=new fc({context:t});n.connect(o,0,0),r.connect(o,0,1);var i=new Yo({context:t}).toDestination();o.connect(i),n.start(0),r.start(0),i.gain.setValueAtTime(0,0),i.gain.setValueAtTime(1,e.preDelay),i.gain.exponentialApproachValueAtTime(0,e.preDelay,e.decay)},this.decay+this.preDelay)];case 1:return t=n.sent(),this._convolver.buffer=t.get(),[2,this]}})},new((n=void 0)||(n=Promise))(function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,u)}s((r=r.apply(t,e||[])).next())});var t,e,n,r},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._convolver.disconnect(),this},e}(oc),yc=(_a=function(t,e){return(_a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}_a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_c=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["type","size"]))||this;n.name="Analyser",n._analyser=n.context.createAnalyser();var r=Ar(e.getDefaults(),arguments,["type","size"]);return n.size=r.size,n.type=r.type,n.input=n.output=n._analyser,n}return yc(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{size:1024,smoothing:.8,type:"fft"})},e.prototype.getValue=function(){return"fft"===this._type?this._analyser.getFloatFrequencyData(this._buffer):"waveform"===this._type&&this._analyser.getFloatTimeDomainData(this._buffer),this._buffer},Object.defineProperty(e.prototype,"size",{get:function(){return this._analyser.frequencyBinCount},set:function(t){this._analyser.fftSize=2*t,this._buffer=new Float32Array(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this.assert("waveform"===t||"fft"===t,"Analyser: invalid type: "+t),this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"smoothing",{get:function(){return this._analyser.smoothingTimeConstant},set:function(t){this._analyser.smoothingTimeConstant=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.disconnect(),this},e}(qo),vc=(ya=function(t,e){return(ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ya(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),mc=function(t){function e(){var n=t.call(this,Object.assign(Ar(e.getDefaults(),arguments,["pan"])))||this;n.name="Panner",n._panner=n.context.createStereoPanner(),n.input=n._panner,n.output=n._panner;var r=Ar(e.getDefaults(),arguments,["pan"]);return n.pan=new Io({context:n.context,param:n._panner.pan,value:r.pan}),n._panner.channelCount=1,n._panner.channelCountMode="explicit",Wo(n,"pan"),n}return vc(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{pan:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._panner.disconnect(),this.pan.dispose(),this},e}(qo),gc=(da=function(t,e){return(da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}da(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),bc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["lowFrequency","highFrequency"]))||this;n.name="MultibandSplit",n.input=new Yo({context:n.context}),n.output=void 0,n.low=new Ms({context:n.context,frequency:0,type:"lowpass"}),n._lowMidFilter=new Ms({context:n.context,frequency:0,type:"highpass"}),n.mid=new Ms({context:n.context,frequency:0,type:"lowpass"}),n.high=new Ms({context:n.context,frequency:0,type:"highpass"}),n._internalChannels=[n.low,n.mid,n.high];var r=Ar(e.getDefaults(),arguments,["lowFrequency","highFrequency"]);return n.lowFrequency=new bi({context:n.context,units:"frequency",value:r.lowFrequency}),n.highFrequency=new bi({context:n.context,units:"frequency",value:r.highFrequency}),n.Q=new bi({context:n.context,units:"positive",value:r.Q}),n.input.fan(n.low,n.high),n.input.chain(n._lowMidFilter,n.mid),n.lowFrequency.fan(n.low.frequency,n._lowMidFilter.frequency),n.highFrequency.fan(n.mid.frequency,n.high.frequency),n.Q.connect(n.low.Q),n.Q.connect(n._lowMidFilter.Q),n.Q.connect(n.mid.Q),n.Q.connect(n.high.Q),Wo(n,["high","mid","low","highFrequency","lowFrequency"]),n}return gc(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),zo(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this},e}(qo),wc=(ha=function(t,e){return(ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}ha(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Oc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["low","mid","high"]))||this;n.name="EQ3",n.output=new Yo({context:n.context}),n._internalChannels=[];var r=Ar(e.getDefaults(),arguments,["low","mid","high"]);return n.input=n._multibandSplit=new bc({context:n.context,highFrequency:r.highFrequency,lowFrequency:r.lowFrequency}),n._lowGain=new Yo({context:n.context,gain:r.low,units:"decibels"}),n._midGain=new Yo({context:n.context,gain:r.mid,units:"decibels"}),n._highGain=new Yo({context:n.context,gain:r.high,units:"decibels"}),n.low=n._lowGain.gain,n.mid=n._midGain.gain,n.high=n._highGain.gain,n.Q=n._multibandSplit.Q,n.lowFrequency=n._multibandSplit.lowFrequency,n.highFrequency=n._multibandSplit.highFrequency,n._multibandSplit.low.chain(n._lowGain,n.output),n._multibandSplit.mid.chain(n._midGain,n.output),n._multibandSplit.high.chain(n._highGain,n.output),Wo(n,["low","mid","high","lowFrequency","highFrequency"]),n._internalChannels=[n._multibandSplit],n}return wc(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})},e.prototype.dispose=function(){return t.prototype.dispose.call(this),zo(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this},e}(qo),xc=(fa=function(t,e){return(fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}fa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Tc=function(t){function e(){var n=t.call(this,Ar(e.getDefaults(),arguments,["threshold","ratio"]))||this;n.name="Compressor",n._compressor=n.context.createDynamicsCompressor(),n.input=n._compressor,n.output=n._compressor;var r=Ar(e.getDefaults(),arguments,["threshold","ratio"]);return n.threshold=new Io({minValue:n._compressor.threshold.minValue,maxValue:n._compressor.threshold.maxValue,context:n.context,convert:!1,param:n._compressor.threshold,units:"decibels",value:r.threshold}),n.attack=new Io({minValue:n._compressor.attack.minValue,maxValue:n._compressor.attack.maxValue,context:n.context,param:n._compressor.attack,units:"time",value:r.attack}),n.release=new Io({minValue:n._compressor.release.minValue,maxValue:n._compressor.release.maxValue,context:n.context,param:n._compressor.release,units:"time",value:r.release}),n.knee=new Io({minValue:n._compressor.knee.minValue,maxValue:n._compressor.knee.maxValue,context:n.context,convert:!1,param:n._compressor.knee,units:"decibels",value:r.knee}),n.ratio=new Io({minValue:n._compressor.ratio.minValue,maxValue:n._compressor.ratio.maxValue,context:n.context,convert:!1,param:n._compressor.ratio,units:"number",value:r.ratio}),Wo(n,["knee","release","attack","ratio","threshold"]),n}return xc(e,t),e.getDefaults=function(){return Object.assign(qo.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})},Object.defineProperty(e.prototype,"reduction",{get:function(){return this._compressor.reduction},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this},e}(qo);function kc(){return no().now()}o.d(n,"now",function(){return kc}),o.d(n,"Transport",function(){return Ac}),o.d(n,"Destination",function(){return Cc}),o.d(n,"getContext",function(){return no}),o.d(n,"setContext",function(){return ro}),o.d(n,"ToneAudioNode",function(){return qo}),o.d(n,"Param",function(){return Io}),o.d(n,"Gain",function(){return Yo}),o.d(n,"Context",function(){return $r}),o.d(n,"OfflineContext",function(){return Kr}),o.d(n,"Offline",function(){return ni}),o.d(n,"ToneAudioBuffer",function(){return Ko}),o.d(n,"ToneAudioBuffers",function(){return li}),o.d(n,"Delay",function(){return fi}),o.d(n,"Clock",function(){return Mi}),o.d(n,"Frequency",function(){return To}),o.d(n,"Time",function(){return mo}),o.d(n,"Ticks",function(){return Ni}),o.d(n,"Midi",function(){return Li}),o.d(n,"TransportTime",function(){return So}),o.d(n,"Draw",function(){return Xi}),o.d(n,"StateTimeline",function(){return di}),o.d(n,"IntervalTimeline",function(){return Zi}),o.d(n,"Timeline",function(){return Lr}),o.d(n,"Emitter",function(){return Rr}),o.d(n,"Tone",function(){return Er}),o.d(n,"dbToGain",function(){return io}),o.d(n,"gainToDb",function(){return ao}),o.d(n,"intervalToFrequencyRatio",function(){return uo}),o.d(n,"optionsFromArguments",function(){return Ar}),o.d(n,"defaultArg",function(){return Cr}),o.d(n,"Unit",function(){return hu}),o.d(n,"debug",function(){return a}),o.d(n,"Add",function(){return es}),o.d(n,"Abs",function(){return rs}),o.d(n,"AudioToGain",function(){return Du}),o.d(n,"GainToAudio",function(){return is}),o.d(n,"Multiply",function(){return Ru}),o.d(n,"Negate",function(){return us}),o.d(n,"Signal",function(){return bi}),o.d(n,"Subtract",function(){return cs}),o.d(n,"WaveShaper",function(){return ju}),o.d(n,"Zero",function(){return ps}),o.d(n,"Part",function(){return Js}),o.d(n,"Sequence",function(){return tc}),o.d(n,"ToneEvent",function(){return Hs}),o.d(n,"FeedbackDelay",function(){return sc}),o.d(n,"Convolver",function(){return lc}),o.d(n,"Reverb",function(){return dc}),o.d(n,"connect",function(){return Bo}),o.d(n,"disconnect",function(){return Lo}),o.d(n,"connectSeries",function(){return Fo}),o.d(n,"isUndef",function(){return or}),o.d(n,"isDefined",function(){return ir}),o.d(n,"isFunction",function(){return ar}),o.d(n,"isNumber",function(){return ur}),o.d(n,"isObject",function(){return sr}),o.d(n,"isBoolean",function(){return cr}),o.d(n,"isArray",function(){return lr}),o.d(n,"isString",function(){return pr}),o.d(n,"isNote",function(){return fr}),o.d(n,"Noise",function(){return gu}),o.d(n,"Oscillator",function(){return Au}),o.d(n,"AMOscillator",function(){return Vu}),o.d(n,"FMOscillator",function(){return qu}),o.d(n,"PulseOscillator",function(){return Bu}),o.d(n,"FatOscillator",function(){return Wu}),o.d(n,"PWMOscillator",function(){return Uu}),o.d(n,"OmniOscillator",function(){return Xu}),o.d(n,"ToneOscillatorNode",function(){return xu}),o.d(n,"ToneBufferSource",function(){return vu}),o.d(n,"Player",function(){return Zu}),o.d(n,"Players",function(){return $u}),o.d(n,"GrainPlayer",function(){return Ku}),o.d(n,"Synth",function(){return Ts}),o.d(n,"Sampler",function(){return As}),o.d(n,"PolySynth",function(){return Ss}),o.d(n,"MembraneSynth",function(){return js}),o.d(n,"MetalSynth",function(){return qs}),o.d(n,"PluckSynth",function(){return Ys}),o.d(n,"Analyser",function(){return _c}),o.d(n,"CrossFade",function(){return nc}),o.d(n,"Merge",function(){return fc}),o.d(n,"Volume",function(){return Ji}),o.d(n,"Panner",function(){return mc}),o.d(n,"AmplitudeEnvelope",function(){return _s}),o.d(n,"Envelope",function(){return hs}),o.d(n,"EQ3",function(){return Oc}),o.d(n,"Filter",function(){return Ms}),o.d(n,"Compressor",function(){return Tc}),o.d(n,"OnePoleFilter",function(){return Us}),o.d(n,"FeedbackCombFilter",function(){return Ws}),o.d(n,"LowpassCombFilter",function(){return Qs}),o.d(n,"start",function(){return oo});var Ac=no().transport,Cc=no().destination}])});
},{}]},{},["Avhi"], null)
//# sourceMappingURL=game/Tone.js.map