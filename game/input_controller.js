parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"hOc9":[function(require,module,exports) {
var define;
var e;function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InputController=t.KeyMappings=t.GamePadState=void 0;var a=function e(t,n){i(this,e),this.buttonDown=!1,this.buttonNum=-1,this.buttonTimer=0,this.keyName="",this.buttonNum=t,this.keyName=n};t.GamePadState=a;t.KeyMappings=function e(){i(this,e),this.Mapping_Left=null,this.Mapping_Right=null,this.Mapping_Up=null,this.Mapping_Down=null,this.Mapping_Action_1=null,this.Mapping_Action_2=null,this.Mapping_Action_3=null,this.Mapping_Action_4=null,this.Mapping_Action_5=null,this.Mapping_Action_6=null,this.Mapping_Action_7=null,this.Mapping_Start=null,this.Mapping_Select=null};var o=function(){function e(t,n){i(this,e),this.gamepadButtons=[],this.Key_Up=!1,this.Key_Down=!1,this.Key_Left=!1,this.Key_Right=!1,this.Key_Action_1=!1,this.Key_Action_2=!1,this.Key_Action_3=!1,this.Key_Action_4=!1,this.Key_Action_5=!1,this.Key_Action_6=!1,this.Key_Action_7=!1,this.Key_Start=!1,this.Key_Select=!1,this.Gamepad_Process_Axis=!1,this.GamepadHorizontalAccess=0,this.GamepadVerticalAccess=0,this.Touch_Tap=!1,this.DebugKeycodes=!1,this.LastKey="",this.LastGameButton="",this.GamepadDetails="",this._last_key_press=null,this.KEY_PRESS=null,this.Mobile1=!1,this.Mobile2=!1,this.MobileStart=!1,this.MobileSelect=!1,this.touchX_Start=0,this.touchY_Start=0,this.touch_tap_counter=0,window.inputController=this,t&&(n&&(document.getElementById(n).addEventListener("touchstart",function(e){e.stopPropagation()},!1),document.getElementById(n).addEventListener("touchend",function(e){e.stopPropagation()},!1)),document.getElementById(t).addEventListener("touchstart",this.touchStart,!1),document.getElementById(t).addEventListener("touchend",this.touchEnd,!1),document.getElementById(t).addEventListener("touchmove",this.touchMove,!1),document.getElementById("mobile1").addEventListener("touchstart",this.mobilePressA.bind(this),!1),document.getElementById("mobile2").addEventListener("touchstart",this.mobilePressB.bind(this),!1),document.getElementById("mobileStart").addEventListener("touchstart",this.mobilePressStart.bind(this),!1),document.getElementById("mobileSelect").addEventListener("touchstart",this.mobilePressSelect.bind(this),!1),document.getElementById("mobile1").addEventListener("touchend",this.mobileReleaseA.bind(this),!1),document.getElementById("mobile2").addEventListener("touchend",this.mobileReleaseB.bind(this),!1),document.getElementById("mobileStart").addEventListener("touchend",this.mobileReleaseStart.bind(this),!1),document.getElementById("mobileSelect").addEventListener("touchend",this.mobileReleaseSelect.bind(this),!1),document.getElementById("mobile1").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("mobile2").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("mobileStart").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("mobileSelect").addEventListener("touchmove",function(e){e.preventDefault()},!1),document.getElementById("menuDiv").addEventListener("touchstart",this.canvasTouch.bind(this),!1)),this.KeyMappings={Mapping_Left:"ArrowLeft",Mapping_Right:"ArrowRight",Mapping_Up:"ArrowUp",Mapping_Down:"ArrowDown",Mapping_Action_1:"a",Mapping_Action_2:"s",Mapping_Action_3:"z",Mapping_Action_4:"x",Mapping_Action_5:"q",Mapping_Action_6:"w",Mapping_Action_7:"w",Mapping_Start:"p",Mapping_Select:"n"},document.onkeydown=this.keyDown,document.onkeyup=this.keyUp,console.log("InputController Initialized")}return n(e,[{key:"canvasTouch",value:function(e){e.touches[0].clientY<50&&$("#divMain").show(),$("#menuDiv").hide()}},{key:"mobilePressA",value:function(e){e.preventDefault(),this.Key_Action_1=!0,this.Mobile1=!0}},{key:"mobilePressB",value:function(e){e.preventDefault(),this.Key_Action_2=!0,this.Mobile2=!0}},{key:"mobilePressStart",value:function(e){e.preventDefault(),this.Key_Start=!0,this.MobileStart=!0}},{key:"mobilePressSelect",value:function(e){e.preventDefault(),this.Key_Select=!0,this.MobileSelect=!0}},{key:"mobileReleaseA",value:function(e){e.preventDefault(),this.Mobile1=!1,this.Key_Action_1=!1}},{key:"mobileReleaseB",value:function(e){e.preventDefault(),this.Mobile2=!1,this.Key_Action_2=!1}},{key:"mobileReleaseStart",value:function(e){e.preventDefault(),this.MobileStart=!1,this.Key_Start=!1}},{key:"mobileReleaseSelect",value:function(e){e.preventDefault(),this.MobileSelect=!1,this.Key_Start=!1}},{key:"setupGamePad",value:function(){window.addEventListener("gamepadconnected",this.initGamePad.bind(this)),this.gamepadButtons.push(new a(14,this.KeyMappings.Mapping_Left)),this.gamepadButtons.push(new a(15,this.KeyMappings.Mapping_Right)),this.gamepadButtons.push(new a(13,this.KeyMappings.Mapping_Down)),this.gamepadButtons.push(new a(12,this.KeyMappings.Mapping_Up)),this.gamepadButtons.push(new a(9,this.KeyMappings.Mapping_Start)),this.gamepadButtons.push(new a(8,this.KeyMappings.Mapping_Select))}},{key:"initGamePad",value:function(e){try{e.gamepad.buttons.length}catch(t){}console.log("Gamepad connected at index %d: %s. %d buttons, %d axes.",e.gamepad.index,e.gamepad.id,e.gamepad.buttons.length,e.gamepad.axes.length),window.inputController.GamepadDetails="Gamepad connected at index "+e.gamepad.index+" ID:"+e.gamepad.id+" Buttons: "+e.gamepad.buttons.length+" Axes: "+e.gamepad.axes.length}},{key:"processGamepad",value:function(){var e=this;try{var t=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads:[];if(!t)return;for(var n=null,i=0;i<t.length;i++)t[i]&&t[i].buttons.length>0&&(n=t[i]);if(n){for(var a=0;a<n.buttons.length;a++)n.buttons[a].pressed&&(this.DebugKeycodes&&console.log("Gamepad Button: "+a),this.LastGameButton=a.toString());if(this.gamepadButtons.forEach(function(t){n.buttons[t.buttonNum].pressed?(0==t.buttonTimer&&e.sendKeyDownEvent(t.keyName),t.buttonDown=!0,t.buttonTimer++):t.buttonDown&&(n.buttons[t.buttonNum].pressed||(t.buttonDown=!1,t.buttonTimer=0,e.sendKeyUpEvent(t.keyName)))}),this.Gamepad_Process_Axis)try{var o=n.axes[0],p=n.axes[1];this.GamepadHorizontalAccess=o,this.GamepadVerticalAccess=p,this.Key_Left=o<-.5,this.Key_Right=o>.5,this.Key_Down=p<-.5,this.Key_Up=p>.5}catch(s){}}}catch(u){}}},{key:"sendKeyDownEvent",value:function(e){var t=new KeyboardEvent("Gamepad Event Down",{key:e});this.keyDown(t)}},{key:"sendKeyUpEvent",value:function(e){var t=new KeyboardEvent("Gamepad Event Up",{key:e});this.keyUp(t)}},{key:"keyDown",value:function(e){var t=window.inputController;t.DebugKeycodes&&console.log(e),t.LastKey=e.key,"Left"==e.key&&"ArrowLeft"==t.KeyMappings.Mapping_Left&&(e=new KeyboardEvent("",{key:"ArrowLeft"})),"Right"==e.key&&"ArrowRight"==t.KeyMappings.Mapping_Right&&(e=new KeyboardEvent("",{key:"ArrowRight"})),"Up"==e.key&&"ArrowUp"==t.KeyMappings.Mapping_Up&&(e=new KeyboardEvent("",{key:"ArrowUp"})),"Down"==e.key&&"ArrowDown"==t.KeyMappings.Mapping_Down&&(e=new KeyboardEvent("",{key:"ArrowDown"})),e.key==t.KeyMappings.Mapping_Down&&(t.Key_Down=!0),e.key==t.KeyMappings.Mapping_Up&&(t.Key_Up=!0),e.key==t.KeyMappings.Mapping_Left&&(t.Key_Left=!0),e.key==t.KeyMappings.Mapping_Right&&(t.Key_Right=!0),e.key==t.KeyMappings.Mapping_Action_1&&(t.Key_Action_1=!0),e.key==t.KeyMappings.Mapping_Action_2&&(t.Key_Action_2=!0),e.key==t.KeyMappings.Mapping_Action_3&&(t.Key_Action_3=!0),e.key==t.KeyMappings.Mapping_Action_4&&(t.Key_Action_4=!0),e.key==t.KeyMappings.Mapping_Action_5&&(t.Key_Action_5=!0),e.key==t.KeyMappings.Mapping_Action_6&&(t.Key_Action_6=!0),e.key==t.KeyMappings.Mapping_Action_7&&(t.Key_Action_7=!0),e.key==t.KeyMappings.Mapping_Start&&(t.Key_Start=!0),e.key==t.KeyMappings.Mapping_Select&&(t.Key_Select=!0)}},{key:"keyUp",value:function(e){var t=window.inputController;"Left"==e.key&&"ArrowLeft"==t.KeyMappings.Mapping_Left&&(e=new KeyboardEvent("",{key:"ArrowLeft"})),"Right"==e.key&&"ArrowRight"==t.KeyMappings.Mapping_Right&&(e=new KeyboardEvent("",{key:"ArrowRight"})),"Up"==e.key&&"ArrowUp"==t.KeyMappings.Mapping_Up&&(e=new KeyboardEvent("",{key:"ArrowUp"})),"Down"==e.key&&"ArrowDown"==t.KeyMappings.Mapping_Down&&(e=new KeyboardEvent("",{key:"ArrowDown"})),e.key==t.KeyMappings.Mapping_Down&&(t.Key_Down=!1),e.key==t.KeyMappings.Mapping_Up&&(t.Key_Up=!1),e.key==t.KeyMappings.Mapping_Left&&(t.Key_Left=!1),e.key==t.KeyMappings.Mapping_Right&&(t.Key_Right=!1),e.key==t.KeyMappings.Mapping_Action_1&&(t.Key_Action_1=!1),e.key==t.KeyMappings.Mapping_Action_2&&(t.Key_Action_2=!1),e.key==t.KeyMappings.Mapping_Action_3&&(t.Key_Action_3=!1),e.key==t.KeyMappings.Mapping_Action_4&&(t.Key_Action_4=!1),e.key==t.KeyMappings.Mapping_Action_5&&(t.Key_Action_5=!1),e.key==t.KeyMappings.Mapping_Action_6&&(t.Key_Action_6=!1),e.key==t.KeyMappings.Mapping_Action_7&&(t.Key_Action_7=!1),e.key==t.KeyMappings.Mapping_Start&&(t.Key_Start=!1),e.key==t.KeyMappings.Mapping_Select&&(t.Key_Select=!1),t._last_key_press=e.key}},{key:"prevent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"touchStart",value:function(e){e.preventDefault();var t=window.inputController;t.touchX_Start=e.touches[0].clientX,t.touchY_Start=e.touches[0].clientY}},{key:"touchMove",value:function(e){e.preventDefault();var t=window.inputController,n=e.touches[0].clientX-t.touchX_Start,i=e.touches[0].clientY-t.touchY_Start;n>10&&(t.Key_Right=!0),n<-10&&(t.Key_Left=!0),i>10&&(t.Key_Down=!0),i<-10&&(t.Key_Up=!0)}},{key:"touchEnd",value:function(e){e.preventDefault(),e.stopPropagation();var t=window.inputController;0==t.Key_Left&&0==t.Key_Right&&0==t.Key_Down&&0==t.Key_Up&&(t.Touch_Tap=!0),t.Key_Left=!1,t.Key_Right=!1,t.Key_Up=!1,t.Key_Down=!1}},{key:"mouseUp",value:function(e){e.preventDefault()}},{key:"mouseDown",value:function(e){e.preventDefault()}},{key:"mouseMove",value:function(e){e.preventDefault()}},{key:"update",value:function(){this.processGamepad(),this.Touch_Tap&&this.touch_tap_counter++,this.touch_tap_counter>1&&(this.Touch_Tap=!1,this.touch_tap_counter=0),this.KEY_PRESS&&(this.KEY_PRESS=null),this._last_key_press&&(this.KEY_PRESS=this._last_key_press,this._last_key_press=null)}},{key:"loop",value:function(){this.update(),window.requestAnimationFrame(this.loop.bind(this))}}]),e}();t.InputController=o});
},{}]},{},["hOc9"], null)
//# sourceMappingURL=game/input_controller.js.map